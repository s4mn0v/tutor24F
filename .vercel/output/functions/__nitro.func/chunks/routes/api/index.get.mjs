import{PrismaClient as t}from"@prisma/client";import{d as r,b as o,c as s}from"../../nitro/nitro.mjs";import e from"jsonwebtoken";import"mammoth";import"pdf.js-extract";import"node:http";import"node:https";import"@vercel/kv";import"@iconify/utils";import"consola/core";const a=new t,i=r((async t=>{const r=o(t,"Authorization");if(!r||!r.startsWith("Bearer "))throw s({statusCode:401,statusMessage:"Acceso no autorizado"});const i=r.split(" ")[1];let n;try{n=e.verify(i,process.env.JWT_SECRET||"fallback_secret")}catch(t){if("TokenExpiredError"===t.name)throw s({statusCode:401,statusMessage:"Token expirado"});if("JsonWebTokenError"===t.name)throw s({statusCode:401,statusMessage:"Token inv√°lido"});throw s({statusCode:500,statusMessage:"Error interno del servidor"})}const c=n.userId;try{return await a.asignatura.findMany({where:{idDocente:c},include:{estudiantes:!0}})}catch(t){throw console.error("Error al obtener las asignaturas:",t),s({statusCode:500,statusMessage:"Error al obtener las asignaturas"})}}));export{i as default};
//# sourceMappingURL=index.get.mjs.map
