import{PrismaClient as r}from"@prisma/client";import t from"bcryptjs";import{d as e,r as a}from"../../../nitro/nitro.mjs";import"mammoth";import"pdf.js-extract";import"node:http";import"node:https";import"@vercel/kv";import"@iconify/utils";import"consola/core";const o=new r,n=e((async r=>{try{const e=await a(r),{documentoIdentidad:n,nombre:s,carrera:i,correo:c,contrasena:d,enlaceRegistro:m}=e,u=await t.hash(d,10),p=await o.asignatura.findUnique({where:{enlaceRegistro:m}});if(!p)return console.error("Asignatura no encontrada"),{status:404,message:"Asignatura no encontrada"};const g=await o.estudiante.create({data:{documentoIdentidad:n,nombre:s,carrera:i,correo:c,contrasena:u,asignaturaId:p.id,usuarioId:1}});return console.log("Estudiante registrado:",g),{status:200,message:"Estudiante registrado exitosamente"}}catch(r){return console.error("Error registrando el estudiante:",r),{status:500,message:"Error interno del servidor"}}}));export{n as default};
//# sourceMappingURL=register.post.mjs.map
