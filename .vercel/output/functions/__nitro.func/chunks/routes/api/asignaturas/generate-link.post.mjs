import{d as r,r as o,c as t}from"../../../nitro/nitro.mjs";import{PrismaClient as e}from"@prisma/client";import{v4 as i}from"uuid";import"underscore";import"bluebird/js/release/promise";import"base64-js";import"jszip";import"@xmldom/xmldom";import"@xmldom/xmldom/lib/dom";import"xmlbuilder";import"dingbat-to-unicode";import"fs";import"url";import"os";import"path";import"path-is-absolute";import"pdf.js-extract";import"node:http";import"node:https";import"@vercel/kv";import"@iconify/utils";import"consola/core";const a=new e,s=r((async r=>{var e;const s=Number(null==(e=r.context.params)?void 0:e.asignaturaId),m=await o(r),{duracionHoras:n}=m;try{const r=i(),o=new Date;o.setHours(o.getHours()+n);const t=await a.asignatura.update({where:{id:s},data:{enlaceRegistro:r,fechaExpiracion:o}});return{enlaceRegistro:t.enlaceRegistro,fechaExpiracion:t.fechaExpiracion}}catch(r){return console.error("Error generando el enlace:",r),t({statusCode:500,message:"Error generando el enlace"})}finally{await a.$disconnect()}}));export{s as default};
//# sourceMappingURL=generate-link.post.mjs.map
