import{d as r,r as e,c as t}from"../../../nitro/nitro.mjs";import{PrismaClient as a}from"@prisma/client";import{v4 as o}from"uuid";import"mammoth";import"pdf.js-extract";import"node:http";import"node:https";import"@vercel/kv";import"@iconify/utils";import"consola/core";const i=new a,n=r((async r=>{var a;const n=Number(null==(a=r.context.params)?void 0:a.asignaturaId),s=await e(r),{duracionHoras:c}=s;try{const r=o(),e=new Date;e.setHours(e.getHours()+c);const t=await i.asignatura.update({where:{id:n},data:{enlaceRegistro:r,fechaExpiracion:e}});return{enlaceRegistro:t.enlaceRegistro,fechaExpiracion:t.fechaExpiracion}}catch(r){return console.error("Error generando el enlace:",r),t({statusCode:500,message:"Error generando el enlace"})}finally{await i.$disconnect()}}));export{n as default};
//# sourceMappingURL=generate-link.post.mjs.map
