import{defineComponent as e,ref as r,computed as a,watch as t,mergeProps as d,useSSRContext as s}from"vue";import{ssrRenderAttrs as l,ssrInterpolate as o,ssrRenderStyle as i,ssrRenderList as n,ssrRenderClass as c,ssrRenderAttr as g,ssrIncludeBooleanAttr as u}from"vue/server-renderer";import b from"dompurify";import{marked as v}from"marked";const p=e({__name:"chat",__ssrInlineRender:!0,setup(e){const s=r([]),p=r(""),x=r(1),y=r(0),m=r(""),f=r(!1),k=r([]);r(null);const h=r(""),w=r([]),$=r(Date.now()),j=r(Date.now()),C=a((()=>{const e=Math.floor((j.value-$.value)/1e3),r=Math.floor(e/3600),a=Math.floor(e%3600/60),t=e%60;return r>0?`${r}h ${a}m`:a>0?`${a}m ${t}s`:`${t}s`})),E=e=>{var r;return(null==(r=w.value.find((r=>r.name===e)))?void 0:r.completed)||!1},z=e=>{var r;return(null==(r=w.value.find((r=>r.name===e)))?void 0:r.inProgress)||!1},F=a((()=>0===w.value.length?0:w.value.reduce(((e,r)=>e+r.progress),0)/w.value.length));return t(F,(e=>{100===e&&k.value.push({role:"assistant",content:"¬°Felicidades! Has completado todos los temas del curso. ¬øHay algo m√°s en lo que pueda ayudarte?"})})),(e,r,a,t)=>{var w;r(`<div${l(d({class:"h-screen p-2 md:p-4"},t))}><div class="max-w-full md:max-w-6xl mx-auto h-full bg-gradient-to-br from-gray-100 via-gray-200 to-gray-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900"><div class="grid grid-cols-1 md:grid-cols-[300px,1fr] gap-4 bg-white/70 dark:bg-gray-800/30 backdrop-blur-xl rounded-xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 h-full"><div class="p-6 border-r border-gray-200/50 dark:border-gray-700/50"><div class="text-center mb-8"><div class="relative inline-block"><div class="w-20 h-20 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center text-2xl font-bold text-white mb-2">${o((w=p.value||"Estudiante",w.split(" ").map((e=>e[0])).join("").toUpperCase()))}</div><div class="absolute -bottom-2 -right-2 bg-yellow-500 rounded-full w-8 h-8 flex items-center justify-center text-gray-900 font-bold text-sm border-2 border-gray-300 dark:border-gray-800">${o(x.value)}</div></div><h2 class="text-gray-900 dark:text-white font-medium mt-4">${o(p.value||"Estudiante")}</h2></div><div class="mb-8"><div class="flex justify-between items-center mb-2"><h3 class="text-gray-900 dark:text-white font-medium">Progreso General</h3><span class="text-blue-400 font-medium">${o(Math.round(F.value))}%</span></div><div class="w-full h-3 bg-gray-300 dark:bg-gray-700 rounded-full overflow-hidden"><div class="h-full bg-gradient-to-r from-blue-400 to-purple-400 dark:from-blue-500 dark:to-purple-500 transition-all duration-500 ease-out" style="${i({width:`${F.value}%`})}"></div></div></div><div class="space-y-4 mb-8"><h3 class="text-gray-900 dark:text-white font-medium mb-4">Material de Estudio</h3>`),s.value&&s.value.length>0?(r('<div class="space-y-2">\x3c!--[--\x3e'),n(s.value,(e=>{var a;r(`<div class="rounded-lg"><div class="flex items-center justify-between p-3 bg-gray-100/50 dark:bg-gray-800/50 cursor-pointer hover:bg-gray-200/50 dark:hover:bg-gray-700/50 transition-all"><div class="flex items-center gap-2"><span class="text-blue-400"> üìÑ </span><span class="text-gray-900 dark:text-gray-200">${o((a=e.title,a.replace(/\.[^/.]+$/,"").toUpperCase()))}</span></div><span class="${c([e.isExpanded?"rotate-180":"","text-gray-500 dark:text-gray-400 transform transition-transform"])}"> ‚ñº </span></div>`),e.isExpanded?(r('<div class="bg-white/30 dark:bg-gray-900/30">\x3c!--[--\x3e'),n(e.topics,(e=>{r(`<div class="p-3 text-gray-800 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-200/30 dark:hover:bg-gray-700/30 cursor-pointer transition-all flex items-center gap-2 group border-t border-gray-200/50 dark:border-gray-800/50"><div class="${c([[E(e)?"bg-green-500":z(e)?"bg-yellow-500":"bg-gray-500"],"w-2 h-2 rounded-full"])}"></div><span class="flex-1">${o(e)}</span><span class="opacity-0 group-hover:opacity-100 text-blue-400 text-sm"> Estudiar ‚Üí </span></div>`)})),r("\x3c!--]--\x3e</div>")):r("\x3c!----\x3e"),r("</div>")})),r("\x3c!--]--\x3e</div>")):r('<div class="text-gray-800 dark:text-gray-400 text-center p-4 bg-gray-100/50 dark:bg-gray-800/50 rounded-lg"> No hay materiales disponibles </div>'),r('</div></div><div class="flex flex-col h-[calc(100vh-50px)]"><div class="p-4 md:p-6 border-b border-gray-200/50 dark:border-gray-700/50"><div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4"><div><h1 class="text-xl md:text-2xl font-bold text-gray-900 dark:text-white mb-1"> Tu Asistente de Aprendizaje Inteligente </h1>'),h.value?r(`<div class="flex items-center gap-2 text-gray-700 dark:text-gray-400"><span class="w-2 h-2 rounded-full bg-green-500"></span> Estudiando: ${o(h.value)}</div>`):r("\x3c!----\x3e"),r(`</div><div class="flex items-center gap-3 bg-gray-200/30 dark:bg-gray-700/30 px-4 py-2 rounded-lg border border-gray-300/30 dark:border-gray-600/30"><div class="flex items-center gap-1"><span class="text-blue-400">‚è±Ô∏è</span><span class="text-gray-900 dark:text-white font-medium">${o(C.value)}</span><span class="text-gray-700 dark:text-gray-400 text-sm">conectado</span></div><div class="h-4 w-px bg-gray-300 dark:bg-gray-600"></div><div class="group relative"><div class="flex items-center gap-1"><span class="text-purple-400">‚≠ê</span><span class="text-gray-900 dark:text-white font-medium">${o(y.value)}</span><span class="text-gray-700 dark:text-gray-400 text-sm">XP</span></div><div class="absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-200 dark:bg-gray-800 text-gray-900 dark:text-white text-sm px-3 py-1 rounded-lg whitespace-nowrap"> Gana XP respondiendo correctamente </div></div></div></div></div><div class="flex-1 overflow-y-auto p-6 space-y-6">\x3c!--[--\x3e`),n(k.value,((e,a)=>{var t,d;r(`<div class="${c(["flex","user"===e.role?"justify-end":"justify-start"])}"><div class="${c(["rounded-2xl p-4 max-w-[80%] shadow-lg","user"===e.role?"bg-gradient-to-br from-blue-400 to-blue-500 dark:from-blue-600 dark:to-blue-700 text-black dark:text-red-600 ml-auto":"bg-zinc-900/50 dark:bg-gray-700/50 backdrop-blur-sm text-black dark:text-red-600"])}"><div class="prose prose-invert max-w-none"><div>${null!=(t=(e=>{if(!e)return"";const r=v.parse(e,{async:!1});return b.sanitize(r)})(e.content))?t:""}</div>`),e.videoEmbed?r(`<div class="mt-4">${null!=(d=e.videoEmbed)?d:""}</div>`):r("\x3c!----\x3e"),r("</div>"),e.quiz?(r(`<div class="mt-4 space-y-4"><div class="p-6 bg-gray-100/50 dark:bg-gray-800/50 backdrop-blur-sm rounded-xl border border-gray-300/50 dark:border-gray-700/50"><p class="font-medium text-lg mb-6">${o(e.quiz.question)}</p><div class="space-y-3">\x3c!--[--\x3e`),n(e.quiz.options,((e,a)=>{r(`<button class="w-full text-left p-4 rounded-xl border border-gray-300/50 dark:border-gray-600/50 bg-gray-100/30 dark:bg-gray-700/30 hover:bg-gray-200/30 dark:hover:bg-gray-700/50 hover:border-blue-500/50 transition-all duration-300 flex items-center space-x-4"><span class="flex-shrink-0 w-10 h-10 rounded-lg bg-gray-100/50 dark:bg-gray-800/50 flex items-center justify-center font-medium text-blue-400">${o(String.fromCharCode(65+a))}</span><span class="flex-1">${o(e)}</span></button>`)})),r("\x3c!--]--\x3e</div></div></div>")):r("\x3c!----\x3e"),e.answerFeedback?(r(`<div class="${c(["mt-4 p-4 rounded-xl border",e.answerFeedback.isCorrect?"bg-green-100/30 border-green-300/30 text-green-900 dark:bg-green-900/30 dark:border-green-500/30 dark:text-green-100":"bg-red-100/30 border-red-300/30 text-red-900 dark:bg-red-900/30 dark:border-red-500/30 dark:text-red-100"])}"><div class="flex items-start gap-3"><div class="${c(["flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center",e.answerFeedback.isCorrect?"bg-green-500":"bg-red-500"])}">`),e.answerFeedback.isCorrect?r('<span class="text-xl">‚úì</span>'):r('<span class="text-xl">‚úó</span>'),r(`</div><div><p class="font-medium mb-1">${o(e.answerFeedback.isCorrect?"¬°Correcto!":"Incorrecto")}</p><p class="text-sm opacity-90">${o(e.answerFeedback.feedback)}</p></div></div></div>`)):r("\x3c!----\x3e"),r("</div></div>")})),r(`\x3c!--]--\x3e</div><div class="p-4 border-t border-gray-200/50 dark:border-gray-700/50 bg-gray-100/30 dark:bg-gray-800/30 backdrop-blur-sm"><form class="flex gap-3"><input${g("value",m.value)} type="text" placeholder="Escribe tu mensaje aqu√≠..." class="flex-1 p-4 rounded-xl border border-gray-300/50 dark:border-gray-600/50 bg-gray-100 text-gray-900 dark:bg-gray-700/30 dark:text-gray-100 placeholder-gray-600 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all duration-300"${u(f.value)?" disabled":""}><button type="submit"${u(f.value)?" disabled":""} class="px-6 py-4 bg-gradient-to-r from-blue-400 to-blue-500 dark:from-blue-600 dark:to-blue-700 text-white rounded-xl hover:from-blue-300 hover:to-blue-400 dark:hover:from-blue-500 dark:hover:to-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 flex items-center gap-2 font-medium shadow-lg shadow-blue-500/20">`),f.value?r('<span><svg class="animate-spin h-5 w-5" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></span>'):r("\x3c!----\x3e"),r(`<span>${o(f.value?"Procesando...":"Enviar")}</span></button></form></div></div></div></div></div>`)}}}),x=p.setup;p.setup=(e,r)=>{const a=s();return(a.modules||(a.modules=new Set)).add("pages/student/chat.vue"),x?x(e,r):void 0};export{p as default};
//# sourceMappingURL=chat-CK1TahBW.mjs.map
