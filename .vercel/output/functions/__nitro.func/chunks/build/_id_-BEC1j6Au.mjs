import e from"./Button-C-PkUfPN.mjs";import{unref as t,mergeProps as r,withCtx as i,createTextVNode as s,useSSRContext as a}from"vue";import{ssrRenderAttrs as o,ssrRenderComponent as l,ssrInterpolate as n,ssrIncludeBooleanAttr as d,ssrRenderList as c,ssrRenderAttr as m}from"vue/server-renderer";import{u,_ as p}from"./entry-B1wW15I9.mjs";import"./Link-BdFoBY4y.mjs";import"../nitro/nitro.mjs";import"underscore";import"bluebird/js/release/promise";import"base64-js";import"jszip";import"@xmldom/xmldom";import"@xmldom/xmldom/lib/dom";import"xmlbuilder";import"dingbat-to-unicode";import"fs";import"url";import"os";import"path";import"path-is-absolute";import"pdf.js-extract";import"node:http";import"node:https";import"@vercel/kv";import"@iconify/utils";import"consola/core";import"./link-Ch5OrHHS.mjs";import"unhead";import"@unhead/shared";import"vue-router";import"@prisma/client";import"@vueuse/core";import"tailwind-merge";import"@iconify/vue";import"vue3-apexcharts";import"./Icon-Di_vDYyH.mjs";import"./index-CQS-gLPq.mjs";import"@iconify/utils/lib/css/icon";import"./tooltip-P8fr8pDa.mjs";import"./useButtonGroup-DOVi4PLM.mjs";import"./button-CHOj1P8S.mjs";const h={props:{idAsignatura:{type:Number,required:!0}},data:()=>({selectedFile:null,uploading:!1,success:!1,error:null,materiales:[],deleting:null}),mounted(){this.fetchMateriales()},methods:{handleFileChange(e){this.selectedFile=e.target.files[0]},async fetchMateriales(){try{const e=await fetch(`/api/materials/${this.idAsignatura}`);if(!e.ok)throw new Error("Error al obtener los materiales.");this.materiales=await e.json()}catch(e){this.error=e.message}},async uploadFile(){if(!this.selectedFile)return;this.uploading=!0,this.success=!1,this.error=null;const e=new FormData;e.append("file",this.selectedFile),e.append("idAsignatura",this.idAsignatura.toString());try{const t=await fetch("/api/files/upload",{method:"POST",body:e});if(!t.ok){const e=await t.json();throw new Error(e.message||"Error al subir el archivo.")}this.success=!0,await this.fetchMateriales()}catch(e){this.error=e.message}finally{this.uploading=!1}},async deleteMaterial(e){this.deleting=e;try{const t=await fetch(`/api/materials/${e}`,{method:"DELETE"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Error al eliminar el archivo.")}await this.fetchMateriales()}catch(e){this.error=e.message}finally{this.deleting=null}}}},g=h.setup;h.setup=(e,t)=>{const r=a();return(r.modules||(r.modules=new Set)).add("components/FileUploader.vue"),g?g(e,t):void 0};const b=p(h,[["ssrRender",function(t,a,u,p,h,g,b,v){const f=e;a(`<div${o(r({class:"flex justify-center p-4"},p))}><div class="p-6 max-w-2xl w-full bg-gradient-to-br from-blue-50 to-blue-100 dark:from-zinc-700 dark:to-zinc-800 shadow-md rounded-md"><h2 class="text-2xl font-bold mb-6 text-gray-800 dark:text-gray-100">Subir Archivo</h2><label for="fileInput" class="block w-full border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg py-8 text-center cursor-pointer hover:border-blue-400 transition-colors">`),b.selectedFile?a(`<div class="text-gray-700 dark:text-gray-200"><span class="block mb-2">Archivo seleccionado:</span><span class="font-medium">${n(b.selectedFile.name)}</span></div>`):a('<div class="text-gray-500 dark:text-gray-300"><span class="block mb-2">Arrastra y suelta un archivo aquí</span><span class="text-sm">O haz clic para seleccionar uno</span></div>'),a(`<input id="fileInput" type="file" class="hidden"></label><button${d(!b.selectedFile||b.uploading)?" disabled":""} class="mt-4 w-full bg-green-500 hover:bg-green-600 disabled:bg-green-300 text-white font-semibold py-2 px-4 rounded transition-colors">${n(b.uploading?"Subiendo...":"Subir Archivo")}</button>`),b.error?a(`<div class="mt-4 p-3 bg-red-100 text-red-700 rounded"> Error: ${n(b.error)}</div>`):a("\x3c!----\x3e"),b.success?a('<div class="mt-4 p-3 bg-green-100 text-green-700 rounded"> Archivo subido con éxito. </div>'):a("\x3c!----\x3e"),a('<div class="mt-6"><h3 class="text-xl font-bold mb-3 text-gray-800 dark:text-gray-100">Archivos Subidos:</h3>'),b.materiales.length>0?(a('<div><ul class="divide-y divide-gray-200 dark:divide-gray-700">\x3c!--[--\x3e'),c(b.materiales,(e=>{a(`<li class="py-3 flex items-center justify-between"><div><a${m("href",e.url)} target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline font-medium">${n(e.nombre)}</a><p class="text-sm text-gray-500 dark:text-gray-400">(${n(e.tipo)})</p></div>`),a(l(f,{onClick:t=>v.deleteMaterial(e.id),color:"red",variant:"ghost",icon:"i-heroicons-trash",loading:b.deleting===e.id},{default:i(((e,t,r,i)=>{if(!t)return[s(" Eliminar ")];t(" Eliminar ")})),_:2},u)),a("</li>")})),a("\x3c!--]--\x3e</ul></div>")):a('<div class="mt-4 text-center text-gray-500 dark:text-gray-400"> No hay archivos subidos aún. </div>'),a("</div></div></div>")}]]),v={__name:"[id]",__ssrInlineRender:!0,setup(e){const r=u(),i=parseInt(r.params.id);return(e,r,s,a)=>{const n=b;r(`<div${o(a)}>`),r(l(n,{"id-asignatura":t(i)},null,s)),r("</div>")}}},f=v.setup;v.setup=(e,t)=>{const r=a();return(r.modules||(r.modules=new Set)).add("pages/teacher/asignatura/[id].vue"),f?f(e,t):void 0};export{v as default};
//# sourceMappingURL=_id_-BEC1j6Au.mjs.map
