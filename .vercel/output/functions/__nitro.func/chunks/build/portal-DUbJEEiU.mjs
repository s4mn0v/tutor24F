import{defineComponent as e,inject as t,ref as l,provide as r,h as o,watchEffect as n,computed as a,onMounted as u,getCurrentInstance as s,watch as i,onUnmounted as d,Teleport as f,reactive as p}from"vue";import{u as v,i as m}from"./focus-management-DUDUmKqn.mjs";import{d as c}from"./use-outside-click-qQ0I4h8Q.mjs";import{i as h,r as g}from"./hidden-CFl4aoYx.mjs";import{m as y,u as P}from"./keyboard-CrgOGGit.mjs";function b(e,t,l,r){m.isServer||n((o=>{(e=null!=e?e:void 0).addEventListener(t,l,r),o((()=>e.removeEventListener(t,l,r)))}))}var T,E=((T=E||{})[T.Forwards=0]="Forwards",T[T.Backwards=1]="Backwards",T);function w(){let e=l(0);return c("keydown",(t=>{"Tab"===t.key&&(e.value=t.shiftKey?1:0)})),e}function j({defaultContainers:e=[],portals:t,mainTreeNodeRef:r}={}){let n=l(null),a=v(n);function u2(){var l,r,o;let u=[];for(let t of e)null!==t&&(t instanceof HTMLElement?u.push(t):"value"in t&&t.value instanceof HTMLElement&&u.push(t.value));if(null!=t&&t.value)for(let e of t.value)u.push(e);for(let e of null!=(l=null==a?void 0:a.querySelectorAll("html > *, body > *"))?l:[])e!==(void 0).body&&e!==(void 0).head&&e instanceof HTMLElement&&"headlessui-portal-root"!==e.id&&(e.contains(P(n))||e.contains(null==(o=null==(r=P(n))?void 0:r.getRootNode())?void 0:o.host)||u.some((t=>e.contains(t)))||u.push(e));return u}return{resolveContainers:u2,contains:e=>u2().some((t=>t.contains(e))),mainTreeNodeRef:n,MainTreeNode:()=>null!=r?null:o(h,{features:g.Hidden,ref:n})}}function C(){let e=l(null);return{mainTreeNodeRef:e,MainTreeNode:()=>o(h,{features:g.Hidden,ref:e})}}let S=Symbol("ForcePortalRootContext"),k=e({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup:(e,{slots:t,attrs:l})=>(r(S,e.force),()=>{let{force:r,...o}=e;return y({theirProps:o,ourProps:{},slot:{},slots:t,attrs:l,name:"ForcePortalRoot"})})});const R=new WeakMap;function x(e,t){let l=t((r=e,null!=(o=R.get(r))?o:0));var r,o;return l<=0?R.delete(e):R.set(e,l),l}let F=e({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:r,attrs:p}){let m=l(null),c=a((()=>v(m))),h=t(S,!1),g=t(M,null),T=l(!0===h||null==g?function(e){let t=v(e);if(!t){if(null===e)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let l=t.getElementById("headlessui-portal-root");if(l)return l;let r=t.createElement("div");return r.setAttribute("id","headlessui-portal-root"),t.body.appendChild(r)}(m.value):g.resolveTarget());T.value&&x(T.value,(e=>e+1));let E=l(!1);u((()=>{E.value=!0})),n((()=>{h||null!=g&&(T.value=g.resolveTarget())}));let k=t(H,null),R=!1,F=s();return i(m,(()=>{if(R||!k)return;let e=P(m);e&&(d(k.register(e),F),R=!0)})),d((()=>{var e,t;let l=null==(e=c.value)?void 0:e.getElementById("headlessui-portal-root");!l||T.value!==l||x(T.value,(e=>e-1))||T.value.children.length>0||null==(t=T.value.parentElement)||t.removeChild(T.value)})),()=>{if(!E.value||null===T.value)return null;let t={ref:m,"data-headlessui-portal":""};return o(f,{to:T.value},y({ourProps:t,theirProps:e,slot:{},attrs:p,slots:r,name:"Portal"}))}}}),H=Symbol("PortalParentContext");function N(){let o=t(H,null),n=l([]);function a2(e){let t=n.value.indexOf(e);-1!==t&&n.value.splice(t,1),o&&o.unregister(e)}let a={register:function(e){return n.value.push(e),o&&o.register(e),()=>a2(e)},unregister:a2,portals:n};return[n,e({name:"PortalWrapper",setup:(e,{slots:t})=>(r(H,a),()=>{var e;return null==(e=t.default)?void 0:e.call(t)})})]}let M=Symbol("PortalGroupContext"),O=e({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:l}){let o=p({resolveTarget:()=>e.target});return r(M,o),()=>{let{target:r,...o}=e;return y({theirProps:o,ourProps:{},slot:{},attrs:t,slots:l,name:"PortalGroup"})}}});export{C,E,O as F,F as H,N,b,j,k,w};
//# sourceMappingURL=portal-DUbJEEiU.mjs.map
