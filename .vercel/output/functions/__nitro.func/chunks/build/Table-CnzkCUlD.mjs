import e from"./Checkbox-DluAUzfD.mjs";import t from"./Button-C-PkUfPN.mjs";import o from"./Progress-C6AH6urk.mjs";import a from"./Icon-Di_vDYyH.mjs";import{mergeProps as n,defineComponent as l,toRef as r,computed as i,ref as s,watch as d,toRaw as u,useSSRContext as c}from"vue";import{K as p,v as m,L as g}from"../nitro/nitro.mjs";import{useVModel as x}from"@vueuse/core";import{s as f}from"./tooltip-P8fr8pDa.mjs";import{_ as y,m as v,j as b,g as h}from"./entry-B1wW15I9.mjs";import{ssrRenderAttrs as S,ssrRenderClass as w,ssrRenderSlot as k,ssrInterpolate as $,ssrRenderList as j,ssrRenderAttr as C,ssrRenderComponent as B}from"vue/server-renderer";import"tailwind-merge";import"./useFormGroup-Dj1FOV-7.mjs";import"./Link-BdFoBY4y.mjs";import"./link-Ch5OrHHS.mjs";import"./useButtonGroup-DOVi4PLM.mjs";import"./button-CHOj1P8S.mjs";import"mammoth";import"pdf.js-extract";import"node:http";import"node:https";import"@vercel/kv";import"@iconify/utils";import"consola/core";import"./index-CQS-gLPq.mjs";import"@iconify/vue";import"@iconify/utils/lib/css/icon";import"unhead";import"@unhead/shared";import"vue-router";import"@prisma/client";import"vue3-apexcharts";const A=v(h.ui.strategy,h.ui.table,{wrapper:"relative overflow-x-auto",base:"min-w-full table-fixed",divide:"divide-y divide-gray-300 dark:divide-gray-700",thead:"relative",tbody:"divide-y divide-gray-200 dark:divide-gray-800",caption:"sr-only",tr:{base:"",selected:"bg-gray-50 dark:bg-gray-800/50",expanded:"bg-gray-50 dark:bg-gray-800/50",active:"hover:bg-gray-50 dark:hover:bg-gray-800/50 cursor-pointer"},th:{base:"text-left rtl:text-right",padding:"px-4 py-3.5",color:"text-gray-900 dark:text-white",font:"font-semibold",size:"text-sm"},td:{base:"whitespace-nowrap",padding:"px-4 py-4",color:"text-gray-500 dark:text-gray-400",font:"",size:"text-sm"},checkbox:{padding:"ps-4"},loadingState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4 animate-spin"},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4"},expand:{icon:"transform transition-transform duration-200"},progress:{wrapper:"absolute inset-x-0 -bottom-[0.5px] p-0"},default:{sortAscIcon:"i-heroicons-bars-arrow-up-20-solid",sortDescIcon:"i-heroicons-bars-arrow-down-20-solid",sortButton:{icon:"i-heroicons-arrows-up-down-20-solid",trailing:!0,square:!0,color:"gray",variant:"ghost",class:"-m-1.5"},expandButton:{icon:"i-heroicons-chevron-down",color:"gray",variant:"ghost",size:"xs",class:"-my-1.5 align-middle"},checkbox:{color:"primary"},progress:{color:"primary",animation:"carousel"},loadingState:{icon:"i-heroicons-arrow-path-20-solid",label:"Loading..."},emptyState:{icon:"i-heroicons-circle-stack-20-solid",label:"No items."}}});function O(e,t){return g(e,t)}function R(e,t,o){return e===t?0:"asc"===o?e<t?-1:1:e>t?-1:1}function V(e){return new Set(e.map((e=>JSON.stringify(e))))}const D=l({components:{UIcon:a,UButton:t,UProgress:o,UCheckbox:e},inheritAttrs:!1,props:{modelValue:{type:Array,default:null},by:{type:[String,Function],default:()=>O},rows:{type:Array,default:()=>[]},columns:{type:Array,default:null},columnAttribute:{type:String,default:"label"},sort:{type:Object,default:()=>({})},sortMode:{type:String,default:"auto"},sortButton:{type:Object,default:()=>A.default.sortButton},sortAscIcon:{type:String,default:()=>A.default.sortAscIcon},sortDescIcon:{type:String,default:()=>A.default.sortDescIcon},expandButton:{type:Object,default:()=>A.default.expandButton},expand:{type:Object,default:()=>null},loading:{type:Boolean,default:!1},loadingState:{type:Object,default:()=>A.default.loadingState},emptyState:{type:Object,default:()=>A.default.emptyState},caption:{type:String,default:null},progress:{type:Object,default:()=>A.default.progress},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},multipleExpand:{type:Boolean,default:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue","update:sort","update:expand","select:all"],setup(e,{emit:t,attrs:o}){const{ui:a,attrs:n}=f("table",r(e,"ui"),A,r(e,"class")),l=i((()=>{var t;const o=null!=(t=e.columns)?t:Object.keys(e.rows[0]).map((e=>({key:e,label:p(e),sortable:!1,class:void 0,sort:R})));return o.find((e=>"select"===e.key))||!e.modelValue?o:[{key:"select",sortable:!1,class:void 0,sort:R},...o]})),c=x(e,"sort",t,{passive:!0,defaultValue:m({},e.sort,{column:null,direction:"asc"})}),g=x(e,"expand",t,{passive:!0,defaultValue:m({},e.expand,{openedRows:[],row:null})}),y=s(null),v={column:c.value.column,direction:null},h=i((()=>{var t;if(!(null==(t=c.value)?void 0:t.column)||"manual"===e.sortMode)return e.rows;const{column:o,direction:a}=c.value;return e.rows.slice().sort(((e,t)=>{var n,r;const i=b(e,o),s=b(t,o);return(null!=(n=null==(r=l.value.find((e=>e.key===o)))?void 0:r.sort)?n:R)(i,s,a)}))})),S=i({get:()=>e.modelValue,set(e){t("update:modelValue",e)}}),w=i((()=>e.rows.length)),k=i((()=>{const t=V(S.value),o=V(e.rows);return Array.from(t).filter((e=>o.has(e))).length})),$=i((()=>!(!S.value||!e.rows)&&k.value>0&&k.value<w.value)),j=i((()=>k.value===w.value)),C=i((()=>null===e.emptyState?null:{...a.value.default.emptyState,...e.emptyState})),B=i((()=>null===e.loadingState?null:{...a.value.default.loadingState,...e.loadingState}));function O2(t,o){if("string"==typeof e.by){const n=(a=e.by,e=>b(e,a));return n(t)===n(o)}var a;return e.by(t,o)}function E2(t){return!!e.modelValue&&S.value.some((e=>O2(u(e),u(t))))}function I2(e){var t;return!!(null==(t=g.value)?void 0:t.openedRows)&&g.value.openedRows.some((t=>O2(t,e)))}return d(h,(()=>{y.value=new Date}),{deep:!0}),{ui:a,attrs:n,sort:c,columns:l,rows:h,selected:S,indeterminate:$,emptyState:C,loadingState:B,isAllRowChecked:j,onChangeCheckbox:function(t,o){S.value=t?e.singleSelect?[o]:[...S.value,o]:S.value.filter((e=>!O2(u(e),u(o))))},isSelected:E2,onSort:function(e){if(c.value.column===e.key){const t=e.direction&&"asc"!==e.direction?"asc":"desc";c.value.direction===t?c.value=m({},v,{column:null,direction:"asc"}):c.value={column:c.value.column,direction:"asc"===c.value.direction?"desc":"asc"}}else c.value={column:e.key,direction:e.direction||"asc"}},onSelect:function(e){const t=(void 0).getSelection();t&&t.toString().length>0||o.onSelect&&o.onSelect(e)},onContextmenu:function(e,t){o.onContextmenu&&o.onContextmenu(e,t)},onChange:function(o){o?function(){const t=[...S.value];e.rows.forEach((e=>{E2(e)||t.push(e)})),S.value=t}():S.value=[],t("select:all",o)},getRowData:function(e,t,o=""){return b(e,t,o)},toggleOpened:function(t){g.value={openedRows:I2(t)?g.value.openedRows.filter((e=>!O2(e,t))):e.multipleExpand?[...g.value.openedRows,t]:[t],row:t}},getAriaSort:function(e){if(e.sortable)return c.value.column!==e.key?"none":"asc"===c.value.direction?"ascending":"desc"===c.value.direction?"descending":void 0},isExpanded:I2,retriggerSlot:y}}}),E=D.setup;D.setup=(e,t)=>{const o=c();return(o.modules||(o.modules=new Set)).add("node_modules/@nuxt/ui/dist/runtime/components/data/Table.vue"),E?E(e,t):void 0};const I=y(D,[["ssrRender",function(l,r,i,s,d,u,c,p){const m=e,g=t,x=o,f=a;r(`<div${S(n({class:l.ui.wrapper},l.attrs,s))}><table class="${w([l.ui.base,l.ui.divide])}">`),l.$slots.caption||l.caption?k(l.$slots,"caption",{},(()=>{r(`<caption class="${w(l.ui.caption)}">${$(l.caption)}</caption>`)}),r,i):r("\x3c!----\x3e"),r(`<thead class="${w(l.ui.thead)}"><tr class="${w(l.ui.tr.base)}">`),l.expand?r(`<th scope="col" class="${w(l.ui.tr.base)}"><span class="sr-only">Expand</span></th>`):r("\x3c!----\x3e"),r("\x3c!--[--\x3e"),j(l.columns,((e,t)=>{r(`<th scope="col" class="${w([l.ui.th.base,l.ui.th.padding,l.ui.th.color,l.ui.th.font,l.ui.th.size,"select"===e.key&&l.ui.checkbox.padding,e.class])}"${C("aria-sort",l.getAriaSort(e))}>`),!l.singleSelect&&l.modelValue&&"select"===e.key?k(l.$slots,"select-header",{indeterminate:l.indeterminate,checked:l.isAllRowChecked,change:l.onChange},(()=>{r(B(m,n({"model-value":l.isAllRowChecked,indeterminate:l.indeterminate,ref_for:!0},l.ui.default.checkbox,{"aria-label":"Select all",onChange:l.onChange}),null,i))}),r,i):k(l.$slots,`${e.key}-header`,{column:e,sort:l.sort,onSort:l.onSort},(()=>{e.sortable?r(B(g,n({ref_for:!0},{...l.ui.default.sortButton||{},...l.sortButton},{icon:l.sort.column&&l.sort.column===e.key?"asc"===l.sort.direction?l.sortAscIcon:l.sortDescIcon:l.sortButton.icon||l.ui.default.sortButton.icon,label:e[l.columnAttribute],onClick:t=>l.onSort(e)}),null,i)):r(`<span>${$(e[l.columnAttribute])}</span>`)}),r,i),r("</th>")})),r("\x3c!--]--\x3e</tr>"),l.loading&&l.progress?(r(`<tr><td${C("colspan",0)} class="${w(l.ui.progress.wrapper)}">`),r(B(x,n({...l.ui.default.progress||{},...l.progress},{size:"2xs"}),null,i)),r("</td></tr>")):r("\x3c!----\x3e"),r(`</thead><tbody class="${w(l.ui.tbody)}">`),l.loadingState&&l.loading&&!l.rows.length?(r(`<tr><td${C("colspan",l.columns.length+(l.modelValue?1:0)+(l.expand?1:0))}>`),k(l.$slots,"loading-state",{},(()=>{r(`<div class="${w(l.ui.loadingState.wrapper)}">`),l.loadingState.icon?r(B(f,{name:l.loadingState.icon,class:l.ui.loadingState.icon,"aria-hidden":"true"},null,i)):r("\x3c!----\x3e"),r(`<p class="${w(l.ui.loadingState.label)}">${$(l.loadingState.label)}</p></div>`)}),r,i),r("</td></tr>")):l.emptyState&&!l.rows.length?(r(`<tr><td${C("colspan",l.columns.length+(l.modelValue?1:0)+(l.expand?1:0))}>`),k(l.$slots,"empty-state",{},(()=>{r(`<div class="${w(l.ui.emptyState.wrapper)}">`),l.emptyState.icon?r(B(f,{name:l.emptyState.icon,class:l.ui.emptyState.icon,"aria-hidden":"true"},null,i)):r("\x3c!----\x3e"),r(`<p class="${w(l.ui.emptyState.label)}">${$(l.emptyState.label)}</p></div>`)}),r,i),r("</td></tr>")):(r("\x3c!--[--\x3e"),j(l.rows,((e,t)=>{r(`\x3c!--[--\x3e<tr class="${w([l.ui.tr.base,l.isSelected(e)&&l.ui.tr.selected,l.isExpanded(e)&&l.ui.tr.expanded,l.$attrs.onSelect&&l.ui.tr.active,null==e?void 0:e.class])}">`),l.expand?(r(`<td class="${w([l.ui.td.base,l.ui.td.padding,l.ui.td.color,l.ui.td.font,l.ui.td.size])}">`),l.$slots["expand-action"]?k(l.$slots,"expand-action",{row:e,isExpanded:l.isExpanded(e),toggle:()=>l.toggleOpened(e)},null,r,i):r(B(g,n({disabled:e.disabledExpand,ref_for:!0},{...l.ui.default.expandButton||{},...l.expandButton},{ui:{icon:{base:[l.ui.expand.icon,l.isExpanded(e)&&"rotate-180"].join(" ")}},onClick:t=>l.toggleOpened(e)}),null,i)),r("</td>")):r("\x3c!----\x3e"),r("\x3c!--[--\x3e"),j(l.columns,((o,a)=>{var s;r(`<td class="${w([l.ui.td.base,l.ui.td.padding,l.ui.td.color,l.ui.td.font,l.ui.td.size,null==o?void 0:o.rowClass,null==(s=e[o.key])?void 0:s.class,"select"===o.key&&l.ui.checkbox.padding])}">`),l.modelValue&&"select"===o.key?k(l.$slots,"select-data",{checked:l.isSelected(e),change:t=>l.onChangeCheckbox(t,e)},(()=>{r(B(m,n({"model-value":l.isSelected(e),ref_for:!0},l.ui.default.checkbox,{"aria-label":"Select row",onChange:t=>l.onChangeCheckbox(t,e)}),null,i))}),r,i):k(l.$slots,`${o.key}-data`,{key:l.retriggerSlot,column:o,row:e,index:t,getRowData:t=>l.getRowData(e,o.key,t)},(()=>{r(`${$(l.getRowData(e,o.key))}`)}),r,i),r("</td>")})),r("\x3c!--]--\x3e</tr>"),l.isExpanded(e)?(r('<tr><td colspan="100%">'),k(l.$slots,"expand",{row:e,index:t},null,r,i),r("</td></tr>")):r("\x3c!----\x3e"),r("\x3c!--]--\x3e")})),r("\x3c!--]--\x3e")),r("</tbody></table></div>")}]]);export{I as default};
//# sourceMappingURL=Table-CnzkCUlD.mjs.map
