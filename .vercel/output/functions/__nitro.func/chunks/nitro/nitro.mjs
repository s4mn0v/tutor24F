import*as e from"underscore";import*as t from"bluebird/js/release/promise";import*as n from"base64-js";import*as o from"jszip";import*as s from"@xmldom/xmldom";import*as a from"@xmldom/xmldom/lib/dom";import*as i from"xmlbuilder";import*as l from"dingbat-to-unicode";import*as c from"fs";import*as u from"url";import*as d from"os";import*as f from"path";import*as h from"path-is-absolute";import{PDFExtract as p}from"pdf.js-extract";import m from"node:http";import g from"node:https";import{createClient as y}from"@vercel/kv";import{getIcons as w}from"@iconify/utils";import{createConsola as v}from"consola/core";const b=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,E=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,_=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t;!function(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}(e)}function destr(e,t={}){if("string"!=typeof e)return e;const n=e.trim();if('"'===e[0]&&e.endsWith('"')&&!e.includes("\\"))return n.slice(1,-1);if(n.length<=9){const e=n.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;if("undefined"===e)return;if("null"===e)return null;if("nan"===e)return Number.NaN;if("infinity"===e)return Number.POSITIVE_INFINITY;if("-infinity"===e)return Number.NEGATIVE_INFINITY}if(!_.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(b.test(e)||E.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,jsonParseTransform)}return JSON.parse(e)}catch(n){if(t.strict)throw n;return e}}const R=/#/g,C=/&/g,x=/\//g,I=/=/g,S=/\+/g,A=/%5e/gi,k=/%60/gi,T=/%7c/gi,N=/%20/gi;function encodeQueryValue(e){return(t="string"==typeof e?e:JSON.stringify(e),encodeURI(""+t).replace(T,"|")).replace(S,"%2B").replace(N,"+").replace(R,"%23").replace(C,"%26").replace(k,"`").replace(A,"^").replace(x,"%2F");var t}function encodeQueryKey(e){return encodeQueryValue(e).replace(I,"%3D")}function decode(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function decodeQueryValue(e){return decode(e.replace(S," "))}function parseQuery(e=""){const t={};"?"===e[0]&&(e=e.slice(1));for(const n of e.split("&")){const e=n.match(/([^=]+)=?(.*)/)||[];if(e.length<2)continue;const o=decode(e[1].replace(S," "));if("__proto__"===o||"constructor"===o)continue;const s=decodeQueryValue(e[2]||"");void 0===t[o]?t[o]=s:Array.isArray(t[o])?t[o].push(s):t[o]=[t[o],s]}return t}function stringifyQuery(e){return Object.keys(e).filter((t=>void 0!==e[t])).map((t=>{return n=t,"number"!=typeof(o=e[t])&&"boolean"!=typeof o||(o=String(o)),o?Array.isArray(o)?o.map((e=>`${encodeQueryKey(n)}=${encodeQueryValue(e)}`)).join("&"):`${encodeQueryKey(n)}=${encodeQueryValue(o)}`:encodeQueryKey(n);var n,o})).filter(Boolean).join("&")}const O=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,j=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,P=/^([/\\]\s*){2,}[^/\\]/,M=/^[\s\0]*(blob|data|javascript|vbscript):$/i,H=/\/$|\/\?|\/#/,B=/^\.?\//;function hasProtocol(e,t={}){return"boolean"==typeof t&&(t={acceptRelative:t}),t.strict?O.test(e):j.test(e)||!!t.acceptRelative&&P.test(e)}function isScriptProtocol(e){return!!e&&M.test(e)}function hasTrailingSlash(e="",t){return t?H.test(e):e.endsWith("/")}function withoutTrailingSlash(e="",t){if(!t)return(hasTrailingSlash(e)?e.slice(0,-1):e)||"/";if(!hasTrailingSlash(e,!0))return e||"/";let n=e,o="";const s=e.indexOf("#");s>=0&&(n=e.slice(0,s),o=e.slice(s));const[a,...i]=n.split("?");return((a.endsWith("/")?a.slice(0,-1):a)||"/")+(i.length>0?`?${i.join("?")}`:"")+o}function withTrailingSlash(e="",t){if(!t)return e.endsWith("/")?e:e+"/";if(hasTrailingSlash(e,!0))return e||"/";let n=e,o="";const s=e.indexOf("#");if(s>=0&&(n=e.slice(0,s),o=e.slice(s),!n))return o;const[a,...i]=n.split("?");return a+"/"+(i.length>0?`?${i.join("?")}`:"")+o}function withoutBase(e,t){if(isEmptyURL(t))return e;const n=withoutTrailingSlash(t);if(!e.startsWith(n))return e;const o=e.slice(n.length);return"/"===o[0]?o:"/"+o}function withQuery(e,t){const n=parseURL(e),o={...parseQuery(n.search),...t};return n.search=stringifyQuery(o),function(e){const t=e.pathname||"",n=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",o=e.hash||"",s=e.auth?e.auth+"@":"",a=e.host||"",i=e.protocol||e[$]?(e.protocol||"")+"//":"";return i+s+a+t+n+o}(n)}function getQuery$1(e){return parseQuery(parseURL(e).search)}function isEmptyURL(e){return!e||"/"===e}function joinURL(e,...t){let n=e||"";for(const e of t.filter((e=>function(e){return e&&"/"!==e}(e))))if(n){const t=e.replace(B,"");n=withTrailingSlash(n)+t}else n=e;return n}function joinRelativeURL(...e){const t=/\/(?!\/)/,n=e.filter(Boolean),o=[];let s=0;for(const e of n)if(e&&"/"!==e)for(const[n,a]of e.split(t).entries())if(a&&"."!==a)if(".."!==a)1===n&&o[o.length-1]?.endsWith(":/")?o[o.length-1]+="/"+a:(o.push(a),s++);else{if(1===o.length&&hasProtocol(o[0]))continue;o.pop(),s--}let a=o.join("/");return s>=0?n[0]?.startsWith("/")&&!a.startsWith("/")?a="/"+a:n[0]?.startsWith("./")&&!a.startsWith("./")&&(a="./"+a):a="../".repeat(-1*s)+a,n[n.length-1]?.endsWith("/")&&!a.endsWith("/")&&(a+="/"),a}const $=Symbol.for("ufo:protocolRelative");function parseURL(e="",t){const n=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,e,t=""]=n;return{protocol:e.toLowerCase(),pathname:t,href:e+t,auth:"",host:"",search:"",hash:""}}if(!hasProtocol(e,{acceptRelative:!0}))return parsePath(e);const[,o="",s,a=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,i="",l=""]=a.match(/([^#/?]*)(.*)?/)||[];"file:"===o&&(l=l.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:u,hash:d}=parsePath(l);return{protocol:o.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:i,pathname:c,search:u,hash:d,[$]:!o}}function parsePath(e=""){const[t="",n="",o=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:n,hash:o}}const L=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function objectHash(e,t){const n=createHasher(t=t?{...L,...t}:L);return n.dispatch(e),n.toString()}const F=Object.freeze(["prototype","__proto__","constructor"]);function createHasher(e){let t="",n=new Map;const write=e=>{t+=e};return{toString:()=>t,getContext:()=>n,dispatch(t){e.replacer&&(t=e.replacer(t));return this[null===t?"null":typeof t](t)},object(t){if(t&&"function"==typeof t.toJSON)return this.object(t.toJSON());const o=Object.prototype.toString.call(t);let s="";const a=o.length;s=a<10?"unknown:["+o+"]":o.slice(8,a-1),s=s.toLowerCase();let i=null;if(void 0!==(i=n.get(t)))return this.dispatch("[CIRCULAR:"+i+"]");if(n.set(t,n.size),"undefined"!=typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(t))return write("buffer:"),write(t.toString("utf8"));if("object"!==s&&"function"!==s&&"asyncfunction"!==s)this[s]?this[s](t):e.ignoreUnknown||this.unkown(t,s);else{let n=Object.keys(t);e.unorderedObjects&&(n=n.sort());let o=[];!1===e.respectType||isNativeFunction(t)||(o=F),e.excludeKeys&&(n=n.filter((t=>!e.excludeKeys(t))),o=o.filter((t=>!e.excludeKeys(t)))),write("object:"+(n.length+o.length)+":");const dispatchForKey=n=>{this.dispatch(n),write(":"),e.excludeValues||this.dispatch(t[n]),write(",")};for(const e of n)dispatchForKey(e);for(const e of o)dispatchForKey(e)}},array(t,o){if(o=void 0===o?!1!==e.unorderedArrays:o,write("array:"+t.length+":"),!o||t.length<=1){for(const e of t)this.dispatch(e);return}const s=new Map,a=t.map((t=>{const n=createHasher(e);n.dispatch(t);for(const[e,t]of n.getContext())s.set(e,t);return n.toString()}));return n=s,a.sort(),this.array(a,!1)},date:e=>write("date:"+e.toJSON()),symbol:e=>write("symbol:"+e.toString()),unkown(e,t){if(write(t),e)return write(":"),e&&"function"==typeof e.entries?this.array(Array.from(e.entries()),!0):void 0},error:e=>write("error:"+e.toString()),boolean:e=>write("bool:"+e),string(e){write("string:"+e.length+":"),write(e)},function(t){write("fn:"),isNativeFunction(t)?this.dispatch("[native]"):this.dispatch(t.toString()),!1!==e.respectFunctionNames&&this.dispatch("function-name:"+String(t.name)),e.respectFunctionProperties&&this.object(t)},number:e=>write("number:"+e),xml:e=>write("xml:"+e.toString()),null:()=>write("Null"),undefined:()=>write("Undefined"),regexp:e=>write("regex:"+e.toString()),uint8array(e){return write("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},uint8clampedarray(e){return write("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},int8array(e){return write("int8array:"),this.dispatch(Array.prototype.slice.call(e))},uint16array(e){return write("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},int16array(e){return write("int16array:"),this.dispatch(Array.prototype.slice.call(e))},uint32array(e){return write("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},int32array(e){return write("int32array:"),this.dispatch(Array.prototype.slice.call(e))},float32array(e){return write("float32array:"),this.dispatch(Array.prototype.slice.call(e))},float64array(e){return write("float64array:"),this.dispatch(Array.prototype.slice.call(e))},arraybuffer(e){return write("arraybuffer:"),this.dispatch(new Uint8Array(e))},url:e=>write("url:"+e.toString()),map(t){write("map:");const n=[...t];return this.array(n,!1!==e.unorderedSets)},set(t){write("set:");const n=[...t];return this.array(n,!1!==e.unorderedSets)},file(e){return write("file:"),this.dispatch([e.name,e.size,e.type,e.lastModfied])},blob(){if(e.ignoreUnknown)return write("[blob]");throw new Error('Hashing Blob objects is currently not supported\nUse "options.replacer" or "options.ignoreUnknown"\n')},domwindow:()=>write("domwindow"),bigint:e=>write("bigint:"+e.toString()),process:()=>write("process"),timer:()=>write("timer"),pipe:()=>write("pipe"),tcp:()=>write("tcp"),udp:()=>write("udp"),tty:()=>write("tty"),statwatcher:()=>write("statwatcher"),securecontext:()=>write("securecontext"),connection:()=>write("connection"),zlib:()=>write("zlib"),context:()=>write("context"),nodescript:()=>write("nodescript"),httpparser:()=>write("httpparser"),dataview:()=>write("dataview"),signal:()=>write("signal"),fsevent:()=>write("fsevent"),tlswrap:()=>write("tlswrap")}}const D="[native code] }",q=D.length;function isNativeFunction(e){return"function"==typeof e&&Function.prototype.toString.call(e).slice(-q)===D}var z=Object.defineProperty,__publicField$1=(e,t,n)=>(((e,t,n)=>{t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class WordArray{constructor(e,t){__publicField$1(this,"words"),__publicField$1(this,"sigBytes"),e=this.words=e||[],this.sigBytes=void 0===t?4*e.length:t}toString(e){return(e||U).stringify(this)}concat(e){if(this.clamp(),this.sigBytes%4)for(let t=0;t<e.sigBytes;t++){const n=e.words[t>>>2]>>>24-t%4*8&255;this.words[this.sigBytes+t>>>2]|=n<<24-(this.sigBytes+t)%4*8}else for(let t=0;t<e.sigBytes;t+=4)this.words[this.sigBytes+t>>>2]=e.words[t>>>2];return this.sigBytes+=e.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new WordArray([...this.words])}}const U={stringify(e){const t=[];for(let n=0;n<e.sigBytes;n++){const o=e.words[n>>>2]>>>24-n%4*8&255;t.push((o>>>4).toString(16),(15&o).toString(16))}return t.join("")}},G={stringify(e){const t=[];for(let n=0;n<e.sigBytes;n+=3){const o=(e.words[n>>>2]>>>24-n%4*8&255)<<16|(e.words[n+1>>>2]>>>24-(n+1)%4*8&255)<<8|e.words[n+2>>>2]>>>24-(n+2)%4*8&255;for(let s=0;s<4&&8*n+6*s<8*e.sigBytes;s++)t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(o>>>6*(3-s)&63))}return t.join("")}},K={parse(e){const t=e.length,n=[];for(let o=0;o<t;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new WordArray(n,t)}},W={parse:e=>K.parse(unescape(encodeURIComponent(e)))};class BufferedBlockAlgorithm{constructor(){__publicField$1(this,"_data",new WordArray),__publicField$1(this,"_nDataBytes",0),__publicField$1(this,"_minBufferSize",0),__publicField$1(this,"blockSize",16)}reset(){this._data=new WordArray,this._nDataBytes=0}_append(e){"string"==typeof e&&(e=W.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_doProcessBlock(e,t){}_process(e){let t,n=this._data.sigBytes/(4*this.blockSize);n=e?Math.ceil(n):Math.max((0|n)-this._minBufferSize,0);const o=n*this.blockSize,s=Math.min(4*o,this._data.sigBytes);if(o){for(let e=0;e<o;e+=this.blockSize)this._doProcessBlock(this._data.words,e);t=this._data.words.splice(0,o),this._data.sigBytes-=s}return new WordArray(t,s)}}class Hasher extends BufferedBlockAlgorithm{update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e)}}var X=Object.defineProperty,__publicField=(e,t,n)=>(((e,t,n)=>{t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,t+"",n),n);const V=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Y=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],J=[];class SHA256 extends Hasher{constructor(){super(...arguments),__publicField(this,"_hash",new WordArray([...V]))}reset(){super.reset(),this._hash=new WordArray([...V])}_doProcessBlock(e,t){const n=this._hash.words;let o=n[0],s=n[1],a=n[2],i=n[3],l=n[4],c=n[5],u=n[6],d=n[7];for(let n=0;n<64;n++){if(n<16)J[n]=0|e[t+n];else{const e=J[n-15],t=(e<<25|e>>>7)^(e<<14|e>>>18)^e>>>3,o=J[n-2],s=(o<<15|o>>>17)^(o<<13|o>>>19)^o>>>10;J[n]=t+J[n-7]+s+J[n-16]}const f=o&s^o&a^s&a,h=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),p=d+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&c^~l&u)+Y[n]+J[n];d=u,u=c,c=l,l=i+p|0,i=a,a=s,s=o,o=p+(h+f)|0}n[0]=n[0]+o|0,n[1]=n[1]+s|0,n[2]=n[2]+a|0,n[3]=n[3]+i|0,n[4]=n[4]+l|0,n[5]=n[5]+c|0,n[6]=n[6]+u|0,n[7]=n[7]+d|0}finalize(e){super.finalize(e);const t=8*this._nDataBytes,n=8*this._data.sigBytes;return this._data.words[n>>>5]|=128<<24-n%32,this._data.words[14+(n+64>>>9<<4)]=Math.floor(t/4294967296),this._data.words[15+(n+64>>>9<<4)]=t,this._data.sigBytes=4*this._data.words.length,this._process(),this._hash}}function hash(e,t={}){const n="string"==typeof e?e:objectHash(e,t);return(o=n,(new SHA256).finalize(o).toString(G)).slice(0,10);var o}function isEqual(e,t,n={}){return e===t||objectHash(e,n)===objectHash(t,n)}function diff(e,t,n={}){return _diff(_toHashedObject(e,n),_toHashedObject(t,n),n)}function _diff(e,t,n={}){const o=[],s=new Set([...Object.keys(e.props||{}),...Object.keys(t.props||{})]);if(e.props&&t.props)for(const a of s){const s=e.props[a],i=t.props[a];s&&i?o.push(..._diff(e.props?.[a],t.props?.[a],n)):(s||i)&&o.push(new DiffEntry((i||s).key,s?"removed":"added",i,s))}return 0===s.size&&e.hash!==t.hash&&o.push(new DiffEntry((t||e).key,"changed",t,e)),o}function _toHashedObject(e,t,n=""){if(e&&"object"!=typeof e)return new DiffHashedObject(n,e,objectHash(e,t));const o={},s=[];for(const a in e)o[a]=_toHashedObject(e[a],t,n?`${n}.${a}`:a),s.push(o[a].hash);return new DiffHashedObject(n,e,`{${s.join(":")}}`,o)}class DiffEntry{constructor(e,t,n,o){this.key=e,this.type=t,this.newValue=n,this.oldValue=o}toString(){return this.toJSON()}toJSON(){switch(this.type){case"added":return`Added   \`${this.key}\``;case"removed":return`Removed \`${this.key}\``;case"changed":return`Changed \`${this.key}\` from \`${this.oldValue?.toString()||"-"}\` to \`${this.newValue.toString()}\``}}}class DiffHashedObject{constructor(e,t,n,o){this.key=e,this.value=t,this.hash=n,this.props=o}toString(){return this.props?`{${Object.keys(this.props).join(",")}}`:JSON.stringify(this.value)}toJSON(){const e=this.key||".";return this.props?`${e}({${Object.keys(this.props).join(",")}})`:`${e}(${this.value})`}}const Q=0,Z=1,ee=2;function createRouter$1(e={}){const t={options:e,rootNode:createRadixNode(),staticRoutesMap:{}},normalizeTrailingSlash=t=>e.strictTrailingSlash?t:t.replace(/\/$/,"")||"/";if(e.routes)for(const n in e.routes)insert(t,normalizeTrailingSlash(n),e.routes[n]);return{ctx:t,lookup:e=>function(e,t){const n=e.staticRoutesMap[t];if(n)return n.data;const o=t.split("/"),s={};let a=!1,i=null,l=e.rootNode,c=null;for(let e=0;e<o.length;e++){const t=o[e];null!==l.wildcardChildNode&&(i=l.wildcardChildNode,c=o.slice(e).join("/"));const n=l.children.get(t);if(void 0===n){if(l&&l.placeholderChildren.length>1){const t=o.length-e;l=l.placeholderChildren.find((e=>e.maxDepth===t))||null}else l=l.placeholderChildren[0]||null;if(!l)break;l.paramName&&(s[l.paramName]=t),a=!0}else l=n}null!==l&&null!==l.data||null===i||(l=i,s[l.paramName||"_"]=c,a=!0);if(!l)return null;if(a)return{...l.data,params:a?s:void 0};return l.data}(t,normalizeTrailingSlash(e)),insert:(e,n)=>insert(t,normalizeTrailingSlash(e),n),remove:e=>function(e,t){let n=!1;const o=t.split("/");let s=e.rootNode;for(const e of o)if(s=s.children.get(e),!s)return n;if(s.data){const e=o.at(-1)||"";s.data=null,0===Object.keys(s.children).length&&s.parent&&(s.parent.children.delete(e),s.parent.wildcardChildNode=null,s.parent.placeholderChildren=[]),n=!0}return n}(t,normalizeTrailingSlash(e))}}function insert(e,t,n){let o=!0;const s=t.split("/");let a=e.rootNode,i=0;const l=[a];for(const e of s){let t;if(t=a.children.get(e))a=t;else{const n=getNodeType(e);t=createRadixNode({type:n,parent:a}),a.children.set(e,t),n===ee?(t.paramName="*"===e?"_"+i++:e.slice(1),a.placeholderChildren.push(t),o=!1):n===Z&&(a.wildcardChildNode=t,t.paramName=e.slice(3)||"_",o=!1),l.push(t),a=t}}for(const[e,t]of l.entries())t.maxDepth=Math.max(l.length-e,t.maxDepth||0);return a.data=n,!0===o&&(e.staticRoutesMap[t]=a),a}function createRadixNode(e={}){return{type:e.type||Q,maxDepth:0,parent:e.parent||null,children:new Map,data:e.data||null,paramName:e.paramName||null,wildcardChildNode:null,placeholderChildren:[]}}function getNodeType(e){return e.startsWith("**")?Z:":"===e[0]||"*"===e?ee:Q}function toRouteMatcher(e){return function(e,t){return{ctx:{table:e},matchAll:n=>_matchRoutes(n,e,t)}}(_routerNodeToTable("",e.ctx.rootNode),e.ctx.options.strictTrailingSlash)}function _matchRoutes(e,t,n){!0!==n&&e.endsWith("/")&&(e=e.slice(0,-1)||"/");const o=[];for(const[n,s]of _sortRoutesMap(t.wildcard))(e===n||e.startsWith(n+"/"))&&o.push(s);for(const[n,s]of _sortRoutesMap(t.dynamic))if(e.startsWith(n+"/")){const t="/"+e.slice(n.length).split("/").splice(2).join("/");o.push(..._matchRoutes(t,s))}const s=t.static.get(e);return s&&o.push(s),o.filter(Boolean)}function _sortRoutesMap(e){return[...e.entries()].sort(((e,t)=>e[0].length-t[0].length))}function _routerNodeToTable(e,t){const n={static:new Map,wildcard:new Map,dynamic:new Map};return function _addNode(e,t){if(e)if(t.type!==Q||e.includes("*")||e.includes(":")){if(t.type===Z)n.wildcard.set(e.replace("/**",""),t.data);else if(t.type===ee){const o=_routerNodeToTable("",t);return t.data&&o.static.set("/",t.data),void n.dynamic.set(e.replace(/\/\*|\/:\w+/,""),o)}}else t.data&&n.static.set(e,t.data);for(const[n,o]of t.children.entries())_addNode(`${e}/${n}`.replace("//","/"),o)}(e,t),n}function isPlainObject(e){if(null===e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&(!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e)))}function _defu(e,t,n=".",o){if(!isPlainObject(t))return _defu(e,{},n,o);const s=Object.assign({},t);for(const t in e){if("__proto__"===t||"constructor"===t)continue;const a=e[t];null!=a&&(o&&o(s,t,a,n)||(Array.isArray(a)&&Array.isArray(s[t])?s[t]=[...a,...s[t]]:isPlainObject(a)&&isPlainObject(s[t])?s[t]=_defu(a,s[t],(n?`${n}.`:"")+t.toString(),o):s[t]=a))}return s}function createDefu(e){return(...t)=>t.reduce(((t,n)=>_defu(t,n,"",e)),{})}const te=createDefu(),ne=createDefu(((e,t,n)=>{if(void 0!==e[t]&&"function"==typeof n)return e[t]=n(e[t]),!0}));function hasProp(e,t){try{return t in e}catch{return!1}}class H3Error extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,t={}){super(e,t),t.cause&&!this.cause&&(this.cause=t.cause)}toJSON(){const e={message:this.message,statusCode:sanitizeStatusCode(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=sanitizeStatusMessage(this.statusMessage)),void 0!==this.data&&(e.data=this.data),e}}function createError$1(e){if("string"==typeof e)return new H3Error(e);if(isError(e))return e;const t=new H3Error(e.message??e.statusMessage??"",{cause:e.cause||e});if(hasProp(e,"stack"))try{Object.defineProperty(t,"stack",{get:()=>e.stack})}catch{try{t.stack=e.stack}catch{}}if(e.data&&(t.data=e.data),e.statusCode?t.statusCode=sanitizeStatusCode(e.statusCode,t.statusCode):e.status&&(t.statusCode=sanitizeStatusCode(e.status,t.statusCode)),e.statusMessage?t.statusMessage=e.statusMessage:e.statusText&&(t.statusMessage=e.statusText),t.statusMessage){const e=t.statusMessage;sanitizeStatusMessage(t.statusMessage)!==e&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return void 0!==e.fatal&&(t.fatal=e.fatal),void 0!==e.unhandled&&(t.unhandled=e.unhandled),t}function isError(e){return!0===e?.constructor?.__h3_error__}function getQuery(e){return getQuery$1(e.path||"")}function getRouterParam(e,t,n={}){const o=function(e,t={}){let n=e.context.params||{};if(t.decode){n={...n};for(const e in n)n[e]=decode(n[e])}return n}(e,n);return o[t]}function getRequestHeaders(e){const t={};for(const n in e.node.req.headers){const o=e.node.req.headers[n];t[n]=Array.isArray(o)?o.filter(Boolean).join(", "):o}return t}function getRequestHeader(e,t){return getRequestHeaders(e)[t.toLowerCase()]}const re=getRequestHeader;const oe=Symbol.for("h3RawBody"),se=Symbol.for("h3ParsedBody"),ae=["PATCH","POST","PUT","DELETE"];function readRawBody(e,t="utf8"){!function(e,t){if(!function(e,t){if("string"==typeof t){if(e.method===t)return!0}else if(t.includes(e.method))return!0;return!1}(e,t))throw createError$1({statusCode:405,statusMessage:"HTTP method is not allowed."})}(e,ae);const n=e._requestBody||e.web?.request?.body||e.node.req[oe]||e.node.req.rawBody||e.node.req.body;if(n){const e=Promise.resolve(n).then((e=>Buffer.isBuffer(e)?e:"function"==typeof e.pipeTo?new Promise(((t,n)=>{const o=[];e.pipeTo(new WritableStream({write(e){o.push(e)},close(){t(Buffer.concat(o))},abort(e){n(e)}})).catch(n)})):"function"==typeof e.pipe?new Promise(((t,n)=>{const o=[];e.on("data",(e=>{o.push(e)})).on("end",(()=>{t(Buffer.concat(o))})).on("error",n)})):e.constructor===Object?Buffer.from(JSON.stringify(e)):e instanceof URLSearchParams?Buffer.from(e.toString()):Buffer.from(e)));return t?e.then((e=>e.toString(t))):e}if(!Number.parseInt(e.node.req.headers["content-length"]||"")&&!String(e.node.req.headers["transfer-encoding"]??"").split(",").map((e=>e.trim())).filter(Boolean).includes("chunked"))return Promise.resolve(void 0);const o=e.node.req[oe]=new Promise(((t,n)=>{const o=[];e.node.req.on("error",(e=>{n(e)})).on("data",(e=>{o.push(e)})).on("end",(()=>{t(Buffer.concat(o))}))}));return t?o.then((e=>e.toString(t))):o}async function readBody(e,t={}){const n=e.node.req;if(hasProp(n,se))return n[se];const o=n.headers["content-type"]||"",s=await readRawBody(e);let a;return a="application/json"===o?_parseJSON(s,t.strict??!0):o.startsWith("application/x-www-form-urlencoded")?function(e){const t=new URLSearchParams(e),n=Object.create(null);for(const[e,o]of t.entries())hasProp(n,e)?(Array.isArray(n[e])||(n[e]=[n[e]]),n[e].push(o)):n[e]=o;return n}(s):o.startsWith("text/")?s:_parseJSON(s,t.strict??!1),n[se]=a,a}function _parseJSON(e="",t){if(e)try{return destr(e,{strict:t})}catch{throw createError$1({statusCode:400,statusMessage:"Bad Request",message:"Invalid JSON body"})}}function handleCacheHeaders(e,t){const n=["public",...t.cacheControls||[]];let o=!1;if(void 0!==t.maxAge&&n.push("max-age="+ +t.maxAge,"s-maxage="+ +t.maxAge),t.modifiedTime){const n=new Date(t.modifiedTime),s=e.node.req.headers["if-modified-since"];e.node.res.setHeader("last-modified",n.toUTCString()),s&&new Date(s)>=t.modifiedTime&&(o=!0)}if(t.etag){e.node.res.setHeader("etag",t.etag);e.node.req.headers["if-none-match"]===t.etag&&(o=!0)}return e.node.res.setHeader("cache-control",n.join(", ")),!!o&&(e.node.res.statusCode=304,e.handled||e.node.res.end(),!0)}const ie={html:"text/html",json:"application/json"},le=/[^\u0009\u0020-\u007E]/g;function sanitizeStatusMessage(e=""){return e.replace(le,"")}function sanitizeStatusCode(e,t=200){return e?("string"==typeof e&&(e=Number.parseInt(e,10)),e<100||e>999?t:e):t}function splitCookiesString(e){if(Array.isArray(e))return e.flatMap((e=>splitCookiesString(e)));if("string"!=typeof e)return[];const t=[];let n,o,s,a,i,l=0;const skipWhitespace=()=>{for(;l<e.length&&/\s/.test(e.charAt(l));)l+=1;return l<e.length};for(;l<e.length;){for(n=l,i=!1;skipWhitespace();)if(o=e.charAt(l),","===o){for(s=l,l+=1,skipWhitespace(),a=l;l<e.length&&(o=e.charAt(l),"="!==o&&";"!==o&&","!==o);)l+=1;l<e.length&&"="===e.charAt(l)?(i=!0,l=a,t.push(e.slice(n,s)),n=l):l=s+1}else l+=1;(!i||l>=e.length)&&t.push(e.slice(n))}return t}const ce="undefined"==typeof setImmediate?e=>e():setImmediate;function send(e,t,n){return n&&function(e,t){t&&304!==e.node.res.statusCode&&!e.node.res.getHeader("content-type")&&e.node.res.setHeader("content-type",t)}(e,n),new Promise((n=>{ce((()=>{e.handled||e.node.res.end(t),n()}))}))}function setResponseStatus(e,t,n){t&&(e.node.res.statusCode=sanitizeStatusCode(t,e.node.res.statusCode)),n&&(e.node.res.statusMessage=sanitizeStatusMessage(n))}function getResponseStatus(e){return e.node.res.statusCode}function getResponseStatusText(e){return e.node.res.statusMessage}function setResponseHeaders(e,t){for(const[n,o]of Object.entries(t))e.node.res.setHeader(n,o)}const ue=setResponseHeaders;function setResponseHeader(e,t,n){e.node.res.setHeader(t,n)}function sendStream(e,t){if(!t||"object"!=typeof t)throw new Error("[h3] Invalid stream provided.");if(e.node.res._data=t,!e.node.res.socket)return e._handled=!0,Promise.resolve();if(hasProp(t,"pipeTo")&&"function"==typeof t.pipeTo)return t.pipeTo(new WritableStream({write(t){e.node.res.write(t)}})).then((()=>{e.node.res.end()}));if(hasProp(t,"pipe")&&"function"==typeof t.pipe)return new Promise(((n,o)=>{t.pipe(e.node.res),t.on&&(t.on("end",(()=>{e.node.res.end(),n()})),t.on("error",(e=>{o(e)}))),e.node.res.on("close",(()=>{t.abort&&t.abort()}))}));throw new Error("[h3] Invalid or incompatible stream provided.")}function sendWebResponse(e,t){for(const[n,o]of t.headers)"set-cookie"===n?e.node.res.appendHeader(n,splitCookiesString(o)):e.node.res.setHeader(n,o);if(t.status&&(e.node.res.statusCode=sanitizeStatusCode(t.status,e.node.res.statusCode)),t.statusText&&(e.node.res.statusMessage=sanitizeStatusMessage(t.statusText)),t.redirected&&e.node.res.setHeader("location",t.url),t.body)return sendStream(e,t.body);e.node.res.end()}const de=new Set(["PATCH","POST","PUT","DELETE"]),fe=new Set(["transfer-encoding","accept-encoding","connection","keep-alive","upgrade","expect","host","accept"]);async function proxyRequest(e,t,n={}){let o,s;de.has(e.method)&&(n.streamRequest?(o=function(e){if(!ae.includes(e.method))return;const t=e.web?.request?.body||e._requestBody;return t||(oe in e.node.req||"rawBody"in e.node.req||"body"in e.node.req||"__unenv__"in e.node.req?new ReadableStream({async start(t){const n=await readRawBody(e,!1);n&&t.enqueue(n),t.close()}}):new ReadableStream({start:t=>{e.node.req.on("data",(e=>{t.enqueue(e)})),e.node.req.on("end",(()=>{t.close()})),e.node.req.on("error",(e=>{t.error(e)}))}}))}(e),s="half"):o=await readRawBody(e,!1).catch((()=>{})));const a=n.fetchOptions?.method||e.method,i=function(e,...t){const n=t.filter(Boolean);if(0===n.length)return e;const o=new Headers(e);for(const e of n)for(const[t,n]of Object.entries(e))void 0!==n&&o.set(t,n);return o}(getProxyRequestHeaders(e,{host:t.startsWith("/")}),n.fetchOptions?.headers,n.headers);return async function(e,t,n={}){let o;try{o=await _getFetch(n.fetch)(t,{headers:n.headers,ignoreResponseError:!0,...n.fetchOptions})}catch(e){throw createError$1({status:502,statusMessage:"Bad Gateway",cause:e})}e.node.res.statusCode=sanitizeStatusCode(o.status,e.node.res.statusCode),e.node.res.statusMessage=sanitizeStatusMessage(o.statusText);const s=[];for(const[t,n]of o.headers.entries())"content-encoding"!==t&&"content-length"!==t&&("set-cookie"!==t?e.node.res.setHeader(t,n):s.push(...splitCookiesString(n)));s.length>0&&e.node.res.setHeader("set-cookie",s.map((e=>(n.cookieDomainRewrite&&(e=rewriteCookieProperty(e,n.cookieDomainRewrite,"domain")),n.cookiePathRewrite&&(e=rewriteCookieProperty(e,n.cookiePathRewrite,"path")),e))));n.onResponse&&await n.onResponse(e,o);if(void 0!==o._data)return o._data;if(e.handled)return;if(!1===n.sendStream){const t=new Uint8Array(await o.arrayBuffer());return e.node.res.end(t)}if(o.body)for await(const t of o.body)e.node.res.write(t);return e.node.res.end()}(e,t,{...n,fetchOptions:{method:a,body:o,duplex:s,...n.fetchOptions,headers:i}})}function getProxyRequestHeaders(e,t){const n=Object.create(null),o=getRequestHeaders(e);for(const e in o)(!fe.has(e)||"host"===e&&t?.host)&&(n[e]=o[e]);return n}function fetchWithEvent(e,t,n,o){return _getFetch(o?.fetch)(t,{...n,context:n?.context||e.context,headers:{...getProxyRequestHeaders(e,{host:"string"==typeof t&&t.startsWith("/")}),...n?.headers}})}function _getFetch(e){if(e)return e;if(globalThis.fetch)return globalThis.fetch;throw new Error("fetch is not available. Try importing `node-fetch-native/polyfill` for Node.js.")}function rewriteCookieProperty(e,t,n){const o="string"==typeof t?{"*":t}:t;return e.replace(new RegExp(`(;\\s*${n}=)([^;]+)`,"gi"),((e,t,n)=>{let s;if(n in o)s=o[n];else{if(!("*"in o))return e;s=o["*"]}return s?t+s:""}))}class H3Event{__is_event__=!0;node;web;context={};_method;_path;_headers;_requestBody;_handled=!1;_onBeforeResponseCalled;_onAfterResponseCalled;constructor(e,t){this.node={req:e,res:t}}get method(){return this._method||(this._method=(this.node.req.method||"GET").toUpperCase()),this._method}get path(){return this._path||this.node.req.url||"/"}get headers(){return this._headers||(this._headers=function(e){const t=new Headers;for(const[n,o]of Object.entries(e))if(Array.isArray(o))for(const e of o)t.append(n,e);else o&&t.set(n,o);return t}(this.node.req.headers)),this._headers}get handled(){return this._handled||this.node.res.writableEnded||this.node.res.headersSent}respondWith(e){return Promise.resolve(e).then((e=>sendWebResponse(this,e)))}toString(){return`[${this.method}] ${this.path}`}toJSON(){return this.toString()}get req(){return this.node.req}get res(){return this.node.res}}function isEvent(e){return hasProp(e,"__is_event__")}function createEvent(e,t){return new H3Event(e,t)}function defineEventHandler(e){if("function"==typeof e)return e.__is_handler__=!0,e;const t={onRequest:_normalizeArray(e.onRequest),onBeforeResponse:_normalizeArray(e.onBeforeResponse)},_handler=n=>async function(e,t,n){if(n.onRequest)for(const t of n.onRequest)if(await t(e),e.handled)return;const o=await t(e),s={body:o};if(n.onBeforeResponse)for(const t of n.onBeforeResponse)await t(e,s);return s.body}(n,e.handler,t);return _handler.__is_handler__=!0,_handler.__resolve__=e.handler.__resolve__,_handler.__websocket__=e.websocket,_handler}function _normalizeArray(e){return e?Array.isArray(e)?e:[e]:void 0}const he=defineEventHandler;function isEventHandler(e){return hasProp(e,"__is_handler__")}function toEventHandler(e,t,n){return isEventHandler(e)||console.warn("[h3] Implicit event handler conversion is deprecated. Use `eventHandler()` or `fromNodeMiddleware()` to define event handlers.",n&&"/"!==n?`\n     Route: ${n}`:"",`\n     Handler: ${e}`),e}const lazyEventHandler=function(e){let t,n;const resolveHandler=()=>n?Promise.resolve(n):(t||(t=Promise.resolve(e()).then((e=>{const t=e.default||e;if("function"!=typeof t)throw new TypeError("Invalid lazy handler result. It should be a function:",t);return n={handler:toEventHandler(e.default||e)},n}))),t),o=he((e=>n?n.handler(e):resolveHandler().then((t=>t.handler(e)))));return o.__resolve__=resolveHandler,o};function createApp(e={}){const t=[],n=function(e,t){const n=t.debug?2:void 0;return he((async o=>{o.node.req.originalUrl=o.node.req.originalUrl||o.node.req.url||"/";const s=o._path||o.node.req.url||"/";let a;t.onRequest&&await t.onRequest(o);for(const i of e){if(i.route.length>1){if(!s.startsWith(i.route))continue;a=s.slice(i.route.length)||"/"}else a=s;if(i.match&&!i.match(a,o))continue;o._path=a,o.node.req.url=a;const e=await i.handler(o),l=void 0===e?void 0:await e;if(void 0!==l){const e={body:l};return t.onBeforeResponse&&(o._onBeforeResponseCalled=!0,await t.onBeforeResponse(o,e)),await handleHandlerResponse(o,e.body,n),void(t.onAfterResponse&&(o._onAfterResponseCalled=!0,await t.onAfterResponse(o,e)))}if(o.handled)return void(t.onAfterResponse&&(o._onAfterResponseCalled=!0,await t.onAfterResponse(o,void 0)))}if(!o.handled)throw createError$1({statusCode:404,statusMessage:`Cannot find any path matching ${o.path||"/"}.`});t.onAfterResponse&&(o._onAfterResponseCalled=!0,await t.onAfterResponse(o,void 0))}))}(t,e),o=function(e){return async t=>{let n;for(const o of e){if("/"===o.route&&!o.handler.__resolve__)continue;if(!t.startsWith(o.route))continue;if(n=t.slice(o.route.length)||"/",o.match&&!o.match(n,void 0))continue;let e={route:o.route,handler:o.handler};if(e.handler.__resolve__){const t=await e.handler.__resolve__(n);if(!t)continue;e={...e,...t,route:joinURL(e.route||"/",t.route||"/")}}return e}}}(t);n.__resolve__=o;const s=function(e){let t;return()=>(t||(t=e()),t)}((()=>{return t=o,{...e.websocket,async resolve(e){const n=e.request?.url||e.url||"/",{pathname:o}="string"==typeof n?parseURL(n):n,s=await t(o);return s?.handler?.__websocket__||{}}};var t})),a={use:(e,t,n)=>use(a,e,t,n),resolve:o,handler:n,stack:t,options:e,get websocket(){return s()}};return a}function use(e,t,n,o){if(Array.isArray(t))for(const s of t)use(e,s,n,o);else if(Array.isArray(n))for(const s of n)use(e,t,s,o);else"string"==typeof t?e.stack.push(normalizeLayer({...o,route:t,handler:n})):"function"==typeof t?e.stack.push(normalizeLayer({...n,handler:t})):e.stack.push(normalizeLayer({...t}));return e}function normalizeLayer(e){let t=e.handler;return t.handler&&(t=t.handler),e.lazy?t=lazyEventHandler(t):isEventHandler(t)||(t=toEventHandler(t,0,e.route)),{route:withoutTrailingSlash(e.route),match:e.match,handler:t}}function handleHandlerResponse(e,t,n){if(null===t)return function(e,t){if(e.handled)return;t||200===e.node.res.statusCode||(t=e.node.res.statusCode);const n=sanitizeStatusCode(t,204);204===n&&e.node.res.removeHeader("content-length"),e.node.res.writeHead(n),e.node.res.end()}(e);if(t){if(o=t,"undefined"!=typeof Response&&o instanceof Response)return sendWebResponse(e,t);if(function(e){if(!e||"object"!=typeof e)return!1;if("function"==typeof e.pipe){if("function"==typeof e._read)return!0;if("function"==typeof e.abort)return!0}return"function"==typeof e.pipeTo}(t))return sendStream(e,t);if(t.buffer)return send(e,t);if(t.arrayBuffer&&"function"==typeof t.arrayBuffer)return t.arrayBuffer().then((n=>send(e,Buffer.from(n),t.type)));if(t instanceof Error)throw createError$1(t);if("function"==typeof t.end)return!0}var o;const s=typeof t;if("string"===s)return send(e,t,ie.html);if("object"===s||"boolean"===s||"number"===s)return send(e,JSON.stringify(t,void 0,n),ie.json);if("bigint"===s)return send(e,t.toString(),ie.json);throw createError$1({statusCode:500,statusMessage:`[h3] Cannot send ${s} as response.`})}const pe=["connect","delete","get","head","options","post","put","trace","patch"];function toNodeListener(e){return async function(t,n){const o=createEvent(t,n);try{await e.handler(o)}catch(t){const n=createError$1(t);if(isError(t)||(n.unhandled=!0),setResponseStatus(o,n.statusCode,n.statusMessage),e.options.onError&&await e.options.onError(n,o),o.handled)return;(n.unhandled||n.fatal)&&console.error("[h3]",n.fatal?"[fatal]":"[unhandled]",n),e.options.onBeforeResponse&&!o._onBeforeResponseCalled&&await e.options.onBeforeResponse(o,{body:n}),await function(e,t,n){if(e.handled)return;const o=isError(t)?t:createError$1(t),s={statusCode:o.statusCode,statusMessage:o.statusMessage,stack:[],data:o.data};if(n&&(s.stack=(o.stack||"").split("\n").map((e=>e.trim()))),e.handled)return;setResponseStatus(e,Number.parseInt(o.statusCode),o.statusMessage),e.node.res.setHeader("content-type",ie.json),e.node.res.end(JSON.stringify(s,void 0,2))}(o,n,!!e.options.debug),e.options.onAfterResponse&&!o._onAfterResponseCalled&&await e.options.onAfterResponse(o,{body:n})}}}function flatHooks(e,t={},n){for(const o in e){const s=e[o],a=n?`${n}:${o}`:o;"object"==typeof s&&null!==s?flatHooks(s,t,a):"function"==typeof s&&(t[a]=s)}return t}const me={run:e=>e()},ge=void 0!==console.createTask?console.createTask:()=>me;function serialTaskCaller(e,t){const n=t.shift(),o=ge(n);return e.reduce(((e,n)=>e.then((()=>o.run((()=>n(...t)))))),Promise.resolve())}function parallelTaskCaller(e,t){const n=t.shift(),o=ge(n);return Promise.all(e.map((e=>o.run((()=>e(...t))))))}function callEachWith(e,t){for(const n of[...e])n(t)}class Hookable{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,t,n={}){if(!e||"function"!=typeof t)return()=>{};const o=e;let s;for(;this._deprecatedHooks[e];)s=this._deprecatedHooks[e],e=s.to;if(s&&!n.allowDeprecated){let e=s.message;e||(e=`${o} hook has been deprecated`+(s.to?`, please use ${s.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(e)||(console.warn(e),this._deprecatedMessages.add(e))}if(!t.name)try{Object.defineProperty(t,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(t),()=>{t&&(this.removeHook(e,t),t=void 0)}}hookOnce(e,t){let n,_function=(...e)=>("function"==typeof n&&n(),n=void 0,_function=void 0,t(...e));return n=this.hook(e,_function),n}removeHook(e,t){if(this._hooks[e]){const n=this._hooks[e].indexOf(t);-1!==n&&this._hooks[e].splice(n,1),0===this._hooks[e].length&&delete this._hooks[e]}}deprecateHook(e,t){this._deprecatedHooks[e]="string"==typeof t?{to:t}:t;const n=this._hooks[e]||[];delete this._hooks[e];for(const t of n)this.hook(e,t)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const t in e)this.deprecateHook(t,e[t])}addHooks(e){const t=flatHooks(e),n=Object.keys(t).map((e=>this.hook(e,t[e])));return()=>{for(const e of n.splice(0,n.length))e()}}removeHooks(e){const t=flatHooks(e);for(const e in t)this.removeHook(e,t[e])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...t){return t.unshift(e),this.callHookWith(serialTaskCaller,e,...t)}callHookParallel(e,...t){return t.unshift(e),this.callHookWith(parallelTaskCaller,e,...t)}callHookWith(e,t,...n){const o=this._before||this._after?{name:t,args:n,context:{}}:void 0;this._before&&callEachWith(this._before,o);const s=e(t in this._hooks?[...this._hooks[t]]:[],n);return s instanceof Promise?s.finally((()=>{this._after&&o&&callEachWith(this._after,o)})):(this._after&&o&&callEachWith(this._after,o),s)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(void 0!==this._before){const t=this._before.indexOf(e);-1!==t&&this._before.splice(t,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(void 0!==this._after){const t=this._after.indexOf(e);-1!==t&&this._after.splice(t,1)}}}}function createHooks(){return new Hookable}const ye=globalThis.Headers,we=globalThis.AbortController,ve=globalThis.fetch||(()=>{throw new Error("[node-fetch-native] Failed to fetch: `globalThis.fetch` is not available!")});class FetchError extends Error{constructor(e,t){super(e,t),this.name="FetchError",t?.cause&&!this.cause&&(this.cause=t.cause)}}const be=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function isPayloadMethod(e="GET"){return be.has(e.toUpperCase())}const Ee=new Set(["image/svg","application/xml","application/xhtml","application/html"]),_e=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function resolveFetchOptions(e,t,n,o){const s=function(e,t,n){if(!t)return new n(e);const o=new n(t);if(e)for(const[t,s]of Symbol.iterator in e||Array.isArray(e)?e:new n(e))o.set(t,s);return o}(t?.headers??e?.headers,n?.headers,o);let a;return(n?.query||n?.params||t?.params||t?.query)&&(a={...n?.params,...n?.query,...t?.params,...t?.query}),{...n,...t,query:a,params:a,headers:s}}async function callHooks(e,t){if(t)if(Array.isArray(t))for(const n of t)await n(e);else await t(e)}const Re=new Set([408,409,425,429,500,502,503,504]),Ce=new Set([101,204,205,304]);function createFetch$1(e={}){const{fetch:t=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:o=globalThis.AbortController}=e;async function onError(e){const t=e.error&&"AbortError"===e.error.name&&!e.options.timeout||!1;if(!1!==e.options.retry&&!t){let t;t="number"==typeof e.options.retry?e.options.retry:isPayloadMethod(e.options.method)?0:1;const n=e.response&&e.response.status||500;if(t>0&&(Array.isArray(e.options.retryStatusCodes)?e.options.retryStatusCodes.includes(n):Re.has(n))){const n="function"==typeof e.options.retryDelay?e.options.retryDelay(e):e.options.retryDelay||0;return n>0&&await new Promise((e=>setTimeout(e,n))),$fetchRaw(e.request,{...e.options,retry:t-1})}}const n=function(e){const t=e.error?.message||e.error?.toString()||"",n=e.request?.method||e.options?.method||"GET",o=e.request?.url||String(e.request)||"/",s=`[${n}] ${JSON.stringify(o)}`,a=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",i=new FetchError(`${s}: ${a}${t?` ${t}`:""}`,e.error?{cause:e.error}:void 0);for(const t of["request","options","response"])Object.defineProperty(i,t,{get:()=>e[t]});for(const[t,n]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(i,t,{get:()=>e.response&&e.response[n]});return i}(e);throw Error.captureStackTrace&&Error.captureStackTrace(n,$fetchRaw),n}const $fetchRaw=async function(s,a={}){const i={request:s,options:resolveFetchOptions(s,a,e.defaults,n),response:void 0,error:void 0};let l;if(i.options.method&&(i.options.method=i.options.method.toUpperCase()),i.options.onRequest&&await callHooks(i,i.options.onRequest),"string"==typeof i.request&&(i.options.baseURL&&(i.request=function(e,t){if(isEmptyURL(t)||hasProtocol(e))return e;const n=withoutTrailingSlash(t);return e.startsWith(n)?e:joinURL(n,e)}(i.request,i.options.baseURL)),i.options.query&&(i.request=withQuery(i.request,i.options.query),delete i.options.query),"query"in i.options&&delete i.options.query,"params"in i.options&&delete i.options.params),i.options.body&&isPayloadMethod(i.options.method)&&(!function(e){if(void 0===e)return!1;const t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}(i.options.body)?("pipeTo"in i.options.body&&"function"==typeof i.options.body.pipeTo||"function"==typeof i.options.body.pipe)&&("duplex"in i.options||(i.options.duplex="half")):(i.options.body="string"==typeof i.options.body?i.options.body:JSON.stringify(i.options.body),i.options.headers=new n(i.options.headers||{}),i.options.headers.has("content-type")||i.options.headers.set("content-type","application/json"),i.options.headers.has("accept")||i.options.headers.set("accept","application/json"))),!i.options.signal&&i.options.timeout){const e=new o;l=setTimeout((()=>{const t=new Error("[TimeoutError]: The operation was aborted due to timeout");t.name="TimeoutError",t.code=23,e.abort(t)}),i.options.timeout),i.options.signal=e.signal}try{i.response=await t(i.request,i.options)}catch(e){return i.error=e,i.options.onRequestError&&await callHooks(i,i.options.onRequestError),await onError(i)}finally{l&&clearTimeout(l)}if((i.response.body||i.response._bodyInit)&&!Ce.has(i.response.status)&&"HEAD"!==i.options.method){const e=(i.options.parseResponse?"json":i.options.responseType)||function(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return _e.test(t)?"json":Ee.has(t)||t.startsWith("text/")?"text":"blob"}(i.response.headers.get("content-type")||"");switch(e){case"json":{const e=await i.response.text(),t=i.options.parseResponse||destr;i.response._data=t(e);break}case"stream":i.response._data=i.response.body||i.response._bodyInit;break;default:i.response._data=await i.response[e]()}}return i.options.onResponse&&await callHooks(i,i.options.onResponse),!i.options.ignoreResponseError&&i.response.status>=400&&i.response.status<600?(i.options.onResponseError&&await callHooks(i,i.options.onResponseError),await onError(i)):i.response},$fetch=async function(e,t){return(await $fetchRaw(e,t))._data};return $fetch.raw=$fetchRaw,$fetch.native=(...e)=>t(...e),$fetch.create=(t={},n={})=>createFetch$1({...e,...n,defaults:{...e.defaults,...n.defaults,...t}}),$fetch}const xe=globalThis.fetch?(...e)=>globalThis.fetch(...e):function(){if(!JSON.parse(process.env.FETCH_KEEP_ALIVE||"false"))return ve;const e={keepAlive:!0},t=new m.Agent(e),n=new g.Agent(e),o={agent:e=>"http:"===e.protocol?t:n};return function(e,t){return ve(e,{...o,...t})}}(),Ie=globalThis.Headers||ye,Se=globalThis.AbortController||we,Ae=createFetch$1({fetch:xe,Headers:Ie,AbortController:Se});function createNotImplementedError(e){throw new Error(`[unenv] ${e} is not implemented yet!`)}let ke=10,Te=class{__unenv__=!0;_events=Object.create(null);_maxListeners;static get defaultMaxListeners(){return ke}static set defaultMaxListeners(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");ke=e}setMaxListeners(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this}getMaxListeners(){return _getMaxListeners(this)}emit(e,...t){if(!this._events[e]||0===this._events[e].length)return!1;if("error"===e){let e;if(t.length>0&&(e=t[0]),e instanceof Error)throw e;const n=new Error("Unhandled error."+(e?" ("+e.message+")":""));throw n.context=e,n}for(const n of this._events[e])(n.listener||n).apply(this,t);return!0}addListener(e,t){return _addListener(this,e,t,!1)}on(e,t){return _addListener(this,e,t,!1)}prependListener(e,t){return _addListener(this,e,t,!0)}once(e,t){return this.on(e,_wrapOnce(this,e,t))}prependOnceListener(e,t){return this.prependListener(e,_wrapOnce(this,e,t))}removeListener(e,t){return function(e,t,n){if(_checkListener(n),!e._events[t]||0===e._events[t].length)return e;const o=e._events[t].length;if(e._events[t]=e._events[t].filter((e=>e!==n)),o===e._events[t].length)return e;e._events.removeListener&&e.emit("removeListener",t,n.listener||n);0===e._events[t].length&&delete e._events[t];return e}(this,e,t)}off(e,t){return this.removeListener(e,t)}removeAllListeners(e){return function(e,t){if(!e._events[t]||0===e._events[t].length)return e;if(e._events.removeListener)for(const n of e._events[t])e.emit("removeListener",t,n.listener||n);return delete e._events[t],e}(this,e)}listeners(e){return _listeners(this,e,!0)}rawListeners(e){return _listeners(this,e,!1)}listenerCount(e){return this.rawListeners(e).length}eventNames(){return Object.keys(this._events)}};function _addListener(e,t,n,o){_checkListener(n),void 0!==e._events.newListener&&e.emit("newListener",t,n.listener||n),e._events[t]||(e._events[t]=[]),o?e._events[t].unshift(n):e._events[t].push(n);const s=_getMaxListeners(e);if(s>0&&e._events[t].length>s&&!e._events[t].warned){e._events[t].warned=!0;const n=new Error(`[unenv] Possible EventEmitter memory leak detected. ${e._events[t].length} ${t} listeners added. Use emitter.setMaxListeners() to increase limit`);n.name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=e._events[t]?.length,console.warn(n)}return e}function _wrapOnce(e,t,n){let o=!1;const wrapper=(...s)=>{if(!o)return e.removeListener(t,wrapper),o=!0,0===s.length?n.call(e):n.apply(e,s)};return wrapper.listener=n,wrapper}function _getMaxListeners(e){return e._maxListeners??Te.defaultMaxListeners}function _listeners(e,t,n){let o=e._events[t];return"function"==typeof o&&(o=[o]),n?o.map((e=>e.listener||e)):o}function _checkListener(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}const Ne=globalThis.EventEmitter||Te;class _Readable extends Ne{__unenv__=!0;readableEncoding=null;readableEnded=!0;readableFlowing=!1;readableHighWaterMark=0;readableLength=0;readableObjectMode=!1;readableAborted=!1;readableDidRead=!1;closed=!1;errored=null;readable=!1;destroyed=!1;static from(e,t){return new _Readable(t)}constructor(e){super()}_read(e){}read(e){}setEncoding(e){return this}pause(){return this}resume(){return this}isPaused(){return!0}unpipe(e){return this}unshift(e,t){}wrap(e){return this}push(e,t){return!1}_destroy(e,t){this.removeAllListeners()}destroy(e){return this.destroyed=!0,this._destroy(e),this}pipe(e,t){return{}}compose(e,t){throw new Error("[unenv] Method not implemented.")}[Symbol.asyncDispose](){return this.destroy(),Promise.resolve()}async*[Symbol.asyncIterator](){throw createNotImplementedError("Readable.asyncIterator")}iterator(e){throw createNotImplementedError("Readable.iterator")}map(e,t){throw createNotImplementedError("Readable.map")}filter(e,t){throw createNotImplementedError("Readable.filter")}forEach(e,t){throw createNotImplementedError("Readable.forEach")}reduce(e,t,n){throw createNotImplementedError("Readable.reduce")}find(e,t){throw createNotImplementedError("Readable.find")}findIndex(e,t){throw createNotImplementedError("Readable.findIndex")}some(e,t){throw createNotImplementedError("Readable.some")}toArray(e){throw createNotImplementedError("Readable.toArray")}every(e,t){throw createNotImplementedError("Readable.every")}flatMap(e,t){throw createNotImplementedError("Readable.flatMap")}drop(e,t){throw createNotImplementedError("Readable.drop")}take(e,t){throw createNotImplementedError("Readable.take")}asIndexedPairs(e){throw createNotImplementedError("Readable.asIndexedPairs")}}const Oe=globalThis.Readable||_Readable;const je=globalThis.Writable||class extends Ne{__unenv__=!0;writable=!0;writableEnded=!1;writableFinished=!1;writableHighWaterMark=0;writableLength=0;writableObjectMode=!1;writableCorked=0;closed=!1;errored=null;writableNeedDrain=!1;destroyed=!1;_data;_encoding="utf-8";constructor(e){super()}pipe(e,t){return{}}_write(e,t,n){if(this.writableEnded)n&&n();else{if(void 0===this._data)this._data=e;else{const n="string"==typeof this._data?Buffer.from(this._data,this._encoding||t||"utf8"):this._data,o="string"==typeof e?Buffer.from(e,t||this._encoding||"utf8"):e;this._data=Buffer.concat([n,o])}this._encoding=t,n&&n()}}_writev(e,t){}_destroy(e,t){}_final(e){}write(e,t,n){const o="string"==typeof t?this._encoding:"utf-8",s="function"==typeof t?t:"function"==typeof n?n:void 0;return this._write(e,o,s),!0}setDefaultEncoding(e){return this}end(e,t,n){const o="function"==typeof e?e:"function"==typeof t?t:"function"==typeof n?n:void 0;if(this.writableEnded)return o&&o(),this;const s=e===o?void 0:e;if(s){const e=t===o?void 0:t;this.write(s,e,o)}return this.writableEnded=!0,this.writableFinished=!0,this.emit("close"),this.emit("finish"),this}cork(){}uncork(){}destroy(e){return this.destroyed=!0,delete this._data,this.removeAllListeners(),this}compose(e,t){throw new Error("[h3] Method not implemented.")}},Pe=class{allowHalfOpen=!0;_destroy;constructor(e=new Oe,t=new je){Object.assign(this,e),Object.assign(this,t),this._destroy=function(...e){return function(...t){for(const n of e)n(...t)}}(e._destroy,t._destroy)}};function getDuplex(){return Object.assign(Pe.prototype,Oe.prototype),Object.assign(Pe.prototype,je.prototype),Pe}const Me=getDuplex(),He=globalThis.Duplex||Me;class Socket extends He{__unenv__=!0;bufferSize=0;bytesRead=0;bytesWritten=0;connecting=!1;destroyed=!1;pending=!1;localAddress="";localPort=0;remoteAddress="";remoteFamily="";remotePort=0;autoSelectFamilyAttemptedAddresses=[];readyState="readOnly";constructor(e){super()}write(e,t,n){return!1}connect(e,t,n){return this}end(e,t,n){return this}setEncoding(e){return this}pause(){return this}resume(){return this}setTimeout(e,t){return this}setNoDelay(e){return this}setKeepAlive(e,t){return this}address(){return{}}unref(){return this}ref(){return this}destroySoon(){this.destroy()}resetAndDestroy(){const e=new Error("ERR_SOCKET_CLOSED");return e.code="ERR_SOCKET_CLOSED",this.destroy(e),this}}class IncomingMessage extends Oe{__unenv__={};aborted=!1;httpVersion="1.1";httpVersionMajor=1;httpVersionMinor=1;complete=!0;connection;socket;headers={};trailers={};method="GET";url="/";statusCode=200;statusMessage="";closed=!1;errored=null;readable=!1;constructor(e){super(),this.socket=this.connection=e||new Socket}get rawHeaders(){return function(e){const t=[];for(const n in e)if(Array.isArray(e[n]))for(const o of e[n])t.push(n,o);else t.push(n,e[n]);return t}(this.headers)}get rawTrailers(){return[]}setTimeout(e,t){return this}get headersDistinct(){return _distinct(this.headers)}get trailersDistinct(){return _distinct(this.trailers)}}function _distinct(e){const t={};for(const[n,o]of Object.entries(e))n&&(t[n]=(Array.isArray(o)?o:[o]).filter(Boolean));return t}class ServerResponse extends je{__unenv__=!0;statusCode=200;statusMessage="";upgrading=!1;chunkedEncoding=!1;shouldKeepAlive=!1;useChunkedEncodingByDefault=!1;sendDate=!1;finished=!1;headersSent=!1;strictContentLength=!1;connection=null;socket=null;req;_headers={};constructor(e){super(),this.req=e}assignSocket(e){e._httpMessage=this,this.socket=e,this.connection=e,this.emit("socket",e),this._flush()}_flush(){this.flushHeaders()}detachSocket(e){}writeContinue(e){}writeHead(e,t,n){e&&(this.statusCode=e),"string"==typeof t&&(this.statusMessage=t,t=void 0);const o=n||t;if(o)if(Array.isArray(o));else for(const e in o)this.setHeader(e,o[e]);return this.headersSent=!0,this}writeProcessing(){}setTimeout(e,t){return this}appendHeader(e,t){e=e.toLowerCase();const n=this._headers[e],o=[...Array.isArray(n)?n:[n],...Array.isArray(t)?t:[t]].filter(Boolean);return this._headers[e]=o.length>1?o:o[0],this}setHeader(e,t){return this._headers[e.toLowerCase()]=t,this}getHeader(e){return this._headers[e.toLowerCase()]}getHeaders(){return this._headers}getHeaderNames(){return Object.keys(this._headers)}hasHeader(e){return e.toLowerCase()in this._headers}removeHeader(e){delete this._headers[e.toLowerCase()]}addTrailers(e){}flushHeaders(){}writeEarlyHints(e,t){"function"==typeof t&&t()}}const Be=new Set([101,204,205,304]);function hasReqHeader(e,t,n){const o=getRequestHeader(e,t);return o&&"string"==typeof o&&o.toLowerCase().includes(n)}function joinHeaders(e){return Array.isArray(e)?e.join(", "):String(e)}function normalizeCookieHeader(e=""){return splitCookiesString(joinHeaders(e))}function normalizeCookieHeaders(e){const t=new Headers;for(const[n,o]of e)if("set-cookie"===n)for(const e of normalizeCookieHeader(o))t.append("set-cookie",e);else t.set(n,joinHeaders(o));return t}const errorHandler=async function(e,t){const{stack:n,statusCode:o,statusMessage:s,message:a}=function(e){const t="function"==typeof process.cwd?process.cwd():"/",n=e.unhandled||e.fatal?[]:(e.stack||"").split("\n").splice(1).filter((e=>e.includes("at "))).map((e=>({text:e.replace(t+"/","./").replace("webpack:/","").replace("file://","").trim(),internal:e.includes("node_modules")&&!e.includes(".cache")||e.includes("internal")||e.includes("new Promise")}))),o=e.statusCode||500;return{stack:n,statusCode:o,statusMessage:e.statusMessage??(404===o?"Not Found":""),message:e.unhandled?"internal server error":e.message||e.toString()}}(e),i={url:t.path,statusCode:o,statusMessage:s,message:a,stack:"",data:e.data};if(e.unhandled||e.fatal){const t=["[nuxt]","[request error]",e.unhandled&&"[unhandled]",e.fatal&&"[fatal]",200!==Number(i.statusCode)&&`[${i.statusCode}]`].filter(Boolean).join(" ");console.error(t,(e.message||e.toString()||"internal server error")+"\n"+n.map((e=>"  "+e.text)).join("  \n"))}if(t.handled)return;if(setResponseStatus(t,200!==i.statusCode&&i.statusCode||500,i.statusMessage),function(e){return!hasReqHeader(e,"accept","text/html")&&(hasReqHeader(e,"accept","application/json")||hasReqHeader(e,"user-agent","curl/")||hasReqHeader(e,"user-agent","httpie/")||hasReqHeader(e,"sec-fetch-mode","cors")||e.path.startsWith("/api/")||e.path.endsWith(".json"))}(t))return setResponseHeader(t,"Content-Type","application/json"),send(t,JSON.stringify(i));const l=getRequestHeaders(t),c=t.path.startsWith("/__nuxt_error")||!!l["x-nuxt-error"]?null:await useNitroApp().localFetch(withQuery(joinURL(useRuntimeConfig(t).app.baseURL,"/__nuxt_error"),i),{headers:{...l,"x-nuxt-error":"true"},redirect:"manual"}).catch((()=>null));if(!c){const{template:e}=await import("../_/error-500.mjs");if(t.handled)return;return setResponseHeader(t,"Content-Type","text/html;charset=UTF-8"),send(t,e(i))}const u=await c.text();if(!t.handled){for(const[e,n]of c.headers.entries())setResponseHeader(t,e,n);return setResponseStatus(t,c.status&&200!==c.status?c.status:void 0,c.statusText),send(t,u)}},$e=[function(e){e.hooks.hook("render:html",(e=>{e.head.push('<script>"use strict";(()=>{const t=window,e=document.documentElement,c=["dark","light"],n=getStorageValue("localStorage","nuxt-color-mode")||"system";let i=n==="system"?u():n;const r=e.getAttribute("data-color-mode-forced");r&&(i=r),l(i),t["__NUXT_COLOR_MODE__"]={preference:n,value:i,getColorScheme:u,addColorScheme:l,removeColorScheme:d};function l(o){const s=""+o+"",a="";e.classList?e.classList.add(s):e.className+=" "+s,a&&e.setAttribute("data-"+a,o)}function d(o){const s=""+o+"",a="";e.classList?e.classList.remove(s):e.className=e.className.replace(new RegExp(s,"g"),""),a&&e.removeAttribute("data-"+a)}function f(o){return t.matchMedia("(prefers-color-scheme"+o+")")}function u(){if(t.matchMedia&&f("").media!=="not all"){for(const o of c)if(f(":"+o).matches)return o}return"light"}})();function getStorageValue(t,e){switch(t){case"localStorage":return window.localStorage.getItem(e);case"sessionStorage":return window.sessionStorage.getItem(e);case"cookie":return getCookie(e);default:return null}}function getCookie(t){const c=("; "+window.document.cookie).split("; "+t+"=");if(c.length===2)return c.pop()?.split(";").shift()}<\/script>')}))}],Le=defineEventHandler((e=>{var t,n;"POST"===e.node.req.method&&(null==(t=e.node.req.url)?void 0:t.includes("/api/asignaturas"))&&(null==(n=e.node.req.url)?void 0:n.includes("/materiales"))&&(e.node.req.headers["content-type"]="multipart/form-data")})),Fe=/^[A-Za-z]:\//;const basename=function(e,t){const n=function(e=""){return e?e.replace(/\\/g,"/").replace(Fe,(e=>e.toUpperCase())):e}(e).split("/").pop();return t&&n.endsWith(t)?n.slice(0,-t.length):n},De={log(e){(console[e.type]||console.log)(...e.args)}};const qe=function(e={}){return v({reporters:[De],...e})}();function klona(e){if("object"!=typeof e)return e;var t,n,o=Object.prototype.toString.call(e);if("[object Object]"===o){if(e.constructor!==Object&&"function"==typeof e.constructor)for(t in n=new e.constructor,e)e.hasOwnProperty(t)&&n[t]!==e[t]&&(n[t]=klona(e[t]));else for(t in n={},e)"__proto__"===t?Object.defineProperty(n,t,{value:klona(e[t]),configurable:!0,enumerable:!0,writable:!0}):n[t]=klona(e[t]);return n}if("[object Array]"===o){for(t=e.length,n=Array(t);t--;)n[t]=klona(e[t]);return n}return"[object Set]"===o?(n=new Set,e.forEach((function(e){n.add(klona(e))})),n):"[object Map]"===o?(n=new Map,e.forEach((function(e,t){n.set(klona(t),klona(e))})),n):"[object Date]"===o?new Date(+e):"[object RegExp]"===o?((n=new RegExp(e.source,e.flags)).lastIndex=e.lastIndex,n):"[object DataView]"===o?new e.constructor(klona(e.buffer)):"[object ArrayBuffer]"===o?e.slice(0):"Array]"===o.slice(-6)?new e.constructor(e):e}qe.consola=qe;const ze=ne({ui:{strategy:"override",card:{background:"bg-zinc-100 dark:bg-zinc-900"},input:{background:"bg-zinc-100 dark:bg-zinc-900",color:{white:{outline:"bg-white dark:bg-zinc-800 text-gray-900 dark:text-white ring-1 ring-inset ring-gray-300 dark:ring-gray-700 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"},gray:{outline:"shadow-sm bg-zinc-50 dark:bg-zinc-800 text-gray-900 dark:text-white ring-1 ring-inset ring-gray-300 dark:ring-gray-700 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"}}},textarea:{background:"bg-zinc-100 dark:bg-zinc-900",color:{white:{outline:"bg-white dark:bg-zinc-800 text-gray-900 dark:text-white ring-0 ring-inset ring-transparent focus:ring-0 focus:ring-transparent"},gray:{outline:"shadow-sm bg-zinc-50 dark:bg-zinc-800 text-gray-900 dark:text-white ring-0 ring-inset ring-transparent focus:ring-0 focus:ring-transparent"}}},dropdown:{background:"bg-white dark:bg-zinc-900",ring:"ring-0 ring-gray-200 dark:ring-gray-700"},table:{tbody:"divide-y divide-zinc-200 dark:divide-gray-800 dark:bg-zinc-900 rounded-lg",th:{color:"text-gray-900 dark:text-white",background:"bg-zinc-900 dark:bg-zinc-900"},td:{color:"text-zinc-900 dark:text-white",background:"bg-zinc-900 dark:bg-zinc-900"},tr:{hover:"hover:bg-zinc-900 dark:hover:bg-zinc-900"},divide:"divide-red-200 dark:divide-red-700"}}},{nuxt:{},icon:{provider:"iconify",class:"",aliases:{},iconifyApiEndpoint:"https://api.iconify.design",localApiEndpoint:"/api/_nuxt_icon",fallbackToApi:!0,cssSelectorPrefix:"i-",cssWherePseudo:!0,mode:"css",attrs:{"aria-hidden":!0},collections:["academicons","akar-icons","ant-design","arcticons","basil","bi","bitcoin-icons","bpmn","brandico","bx","bxl","bxs","bytesize","carbon","catppuccin","cbi","charm","ci","cib","cif","cil","circle-flags","circum","clarity","codicon","covid","cryptocurrency","cryptocurrency-color","dashicons","devicon","devicon-plain","ei","el","emojione","emojione-monotone","emojione-v1","entypo","entypo-social","eos-icons","ep","et","eva","f7","fa","fa-brands","fa-regular","fa-solid","fa6-brands","fa6-regular","fa6-solid","fad","fe","feather","file-icons","flag","flagpack","flat-color-icons","flat-ui","flowbite","fluent","fluent-emoji","fluent-emoji-flat","fluent-emoji-high-contrast","fluent-mdl2","fontelico","fontisto","formkit","foundation","fxemoji","gala","game-icons","geo","gg","gis","gravity-ui","gridicons","grommet-icons","guidance","healthicons","heroicons","heroicons-outline","heroicons-solid","hugeicons","humbleicons","ic","icomoon-free","icon-park","icon-park-outline","icon-park-solid","icon-park-twotone","iconamoon","iconoir","icons8","il","ion","iwwa","jam","la","lets-icons","line-md","logos","ls","lucide","lucide-lab","mage","majesticons","maki","map","marketeq","material-symbols","material-symbols-light","mdi","mdi-light","medical-icon","memory","meteocons","mi","mingcute","mono-icons","mynaui","nimbus","nonicons","noto","noto-v1","octicon","oi","ooui","openmoji","oui","pajamas","pepicons","pepicons-pencil","pepicons-pop","pepicons-print","ph","pixelarticons","prime","ps","quill","radix-icons","raphael","ri","rivet-icons","si-glyph","simple-icons","simple-line-icons","skill-icons","solar","streamline","streamline-emojis","subway","svg-spinners","system-uicons","tabler","tdesign","teenyicons","token","token-branded","topcoat","twemoji","typcn","uil","uim","uis","uit","uiw","unjs","vaadin","vs","vscode-icons","websymbol","weui","whh","wi","wpf","zmdi","zondicons"],fetchTimeout:1500},ui:{primary:"green",gray:"cool",colors:["red","orange","amber","yellow","lime","green","emerald","teal","cyan","sky","blue","indigo","violet","purple","fuchsia","pink","rose","primary"],strategy:"merge"}}),Ue=/\d/,Ge=["-","_","/","."];function isUppercase(e=""){if(!Ue.test(e))return e!==e.toLowerCase()}function upperFirst(e){return e?e[0].toUpperCase()+e.slice(1):""}function kebabCase(e,t){return e?(Array.isArray(e)?e:function(e){const t=Ge,n=[];if(!e||"string"!=typeof e)return n;let o,s,a="";for(const i of e){const e=t.includes(i);if(!0===e){n.push(a),a="",o=void 0;continue}const l=isUppercase(i);if(!1===s){if(!1===o&&!0===l){n.push(a),a=i,o=l;continue}if(!0===o&&!1===l&&a.length>1){const e=a.at(-1);n.push(a.slice(0,Math.max(0,a.length-1))),a=e+i,o=l;continue}}a+=i,o=l,s=e}return n.push(a),n}(e)).map((e=>e.toLowerCase())).join(t):""}function getEnv(e,t){const n=(o=e,kebabCase(o||"","_")).toUpperCase();var o;return destr(process.env[t.prefix+n]??process.env[t.altPrefix+n])}function _isObject(e){return"object"==typeof e&&!Array.isArray(e)}function applyEnv(e,t,n=""){for(const o in e){const s=n?`${n}_${o}`:o,a=getEnv(s,t);_isObject(e[o])?_isObject(a)?(e[o]={...e[o],...a},applyEnv(e[o],t,s)):void 0===a?applyEnv(e[o],t,s):e[o]=a??e[o]:e[o]=a??e[o],t.envExpansion&&"string"==typeof e[o]&&(e[o]=e[o].replace(Ke,((e,t)=>process.env[t]||e)))}return e}const Ke=/{{(.*?)}}/g;const We={app:{baseURL:"/",buildId:"d9168ecf-7696-424a-9e59-7902718438ad",buildAssetsDir:"/_nuxt/",cdnURL:""},nitro:{envPrefix:"NUXT_",routeRules:{"/__nuxt_error":{cache:!1,isr:!1},"/api/**":{cors:!0,headers:{"access-control-allow-origin":"*","access-control-allow-methods":"*","access-control-allow-headers":"*","access-control-max-age":"0","Access-Control-Allow-Methods":"GET,HEAD,PUT,PATCH,POST,DELETE","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Headers":"*"}},"/api/news":{swr:1800,cache:{swr:!0,maxAge:1800},isr:!0},"/**":{ssr:!1},"/_nuxt/builds/meta/**":{headers:{"cache-control":"public, max-age=31536000, immutable"}},"/_nuxt/builds/**":{headers:{"cache-control":"public, max-age=1, immutable"}},"/_nuxt/**":{headers:{"cache-control":"public, max-age=31536000, immutable"}}}},public:{apiBase:"/api",prisma:{log:[],errorFormat:"pretty"}},geminiApiKey:"AIzaSyBTfmMzxl3SYKqPppYjZ-JYhL_YMJZzJrg",icon:{serverKnownCssClasses:[]}},Xe={prefix:"NITRO_",altPrefix:We.nitro.envPrefix??process.env.NITRO_ENV_PREFIX??"_",envExpansion:We.nitro.envExpansion??process.env.NITRO_ENV_EXPANSION??!1},Ve=_deepFreeze(applyEnv(klona(We),Xe));function useRuntimeConfig(e){if(!e)return Ve;if(e.context.nitro.runtimeConfig)return e.context.nitro.runtimeConfig;const t=klona(We);return applyEnv(t,Xe),e.context.nitro.runtimeConfig=t,t}const Ye=_deepFreeze(klona(ze));function _deepFreeze(e){const t=Object.getOwnPropertyNames(e);for(const n of t){const t=e[n];t&&"object"==typeof t&&_deepFreeze(t)}return Object.freeze(e)}new Proxy(Object.create(null),{get:(e,t)=>{console.warn("Please use `useRuntimeConfig()` instead of accessing config directly.");const n=useRuntimeConfig();if(t in n)return n[t]}});const Je=["hasItem","getItem","getItemRaw","setItem","setItemRaw","removeItem","getMeta","setMeta","removeMeta","getKeys","clear","mount","unmount"];function prefixStorage(e,t){if(!(t=function(e){return e=function(e){if(!e)return"";return e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}(e),e?e+":":""}(t)))return e;const n={...e};for(const o of Je)n[o]=(n="",...s)=>e[o](t+n,...s);return n.getKeys=(n="",...o)=>e.getKeys(t+n,...o).then((e=>e.map((e=>e.slice(t.length))))),n}function asyncCall(e,...t){try{return(n=e(...t))&&"function"==typeof n.then?n:Promise.resolve(n)}catch(e){return Promise.reject(e)}var n}function stringify(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return stringify(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Qe="base64:";function serializeRaw(e){return"string"==typeof e?e:Qe+function(e){if(globalThis.Buffer)return Buffer.from(e).toString("base64");return globalThis.btoa(String.fromCodePoint(...e))}(e)}function deserializeRaw(e){return"string"!=typeof e?e:e.startsWith(Qe)?function(e){if(globalThis.Buffer)return Buffer.from(e,"base64");return Uint8Array.from(globalThis.atob(e),(e=>e.codePointAt(0)))}(e.slice(7)):e}function normalizeKey$2(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function joinKeys$1(...e){return normalizeKey$2(e.join(":"))}function normalizeBaseKey(e){return(e=normalizeKey$2(e))?e+":":""}const memory=()=>{const e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,n){e.set(t,n)},setItemRaw(t,n){e.set(t,n)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function watch(e,t,n){return e.watch?e.watch(((e,o)=>t(e,n+o))):()=>{}}async function dispose(e){"function"==typeof e.dispose&&await asyncCall(e.dispose)}const Ze={},normalizeKey$1=function(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""},et={getKeys:()=>Promise.resolve(Object.keys(Ze)),hasItem:e=>(e=normalizeKey$1(e),Promise.resolve(e in Ze)),getItem:e=>(e=normalizeKey$1(e),Promise.resolve(Ze[e]?Ze[e].import():null)),getMeta:e=>(e=normalizeKey$1(e),Promise.resolve(Ze[e]?Ze[e].meta:{}))};function normalizeKey(e,t=":"){return e?e.replace(/[:/\\]/g,t).replace(/^[:/\\]|[:/\\]$/g,""):""}function createError(e,t,n){const o=new Error(`[unstorage] [${e}] ${t}`,n);return Error.captureStackTrace&&Error.captureStackTrace(o,createError),o}const unstorage_47drivers_47vercel_45kv=e=>{const t=normalizeKey(e?.base),r=(...e)=>function(...e){return e.map((e=>normalizeKey(e))).filter(Boolean).join(":")}(t,...e);let n;const getClient=()=>{if(!n){const t="undefined"!=typeof process&&!1!==e.env?`${e.env||"KV"}_`:"";if(!e.url){const n=t+"REST_API_URL";if(!t||!process.env[n])throw createError("vercel-kv",`missing required \`url\` option or '${n}' env.`);e.url=process.env[n]}if(!e.token){const n=t+"REST_API_TOKEN";if(!t||!process.env[n])throw createError("vercel-kv",`missing required \`token\` option or '${n}' env.`);e.token=process.env[n]}n=y(e)}return n};return{name:"vercel-kv",getInstance:getClient,hasItem:e=>getClient().exists(r(e)).then(Boolean),getItem:e=>getClient().get(r(e)),setItem(t,n,o){const s=o?.ttl??e.ttl;return getClient().set(r(t),n,s?{ex:s}:void 0).then((()=>{}))},removeItem:e=>getClient().del(r(e)).then((()=>{})),getKeys:e=>getClient().keys(r(e,"*")),async clear(e){const t=await getClient().keys(r(e,"*"));if(0!==t.length)return getClient().del(...t).then((()=>{}))}}},tt=function(e={}){const t={mounts:{"":e.driver||memory()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},getMount=e=>{for(const n of t.mountpoints)if(e.startsWith(n))return{base:n,relativeKey:e.slice(n.length),driver:t.mounts[n]};return{base:"",relativeKey:e,driver:t.mounts[""]}},getMounts=(e,n)=>t.mountpoints.filter((t=>t.startsWith(e)||n&&e.startsWith(t))).map((n=>({relativeBase:e.length>n.length?e.slice(n.length):void 0,mountpoint:n,driver:t.mounts[n]}))),onChange=(e,n)=>{if(t.watching){n=normalizeKey$2(n);for(const o of t.watchListeners)o(e,n)}},stopWatch=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},runBatch=(e,t,n)=>{const o=new Map,getBatch=e=>{let t=o.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},o.set(e.base,t)),t};for(const n of e){const e="string"==typeof n,o=normalizeKey$2(e?n:n.key),s=e?void 0:n.value,a=e||!n.options?t:{...t,...n.options},i=getMount(o);getBatch(i).items.push({key:o,value:s,relativeKey:i.relativeKey,options:a})}return Promise.all([...o.values()].map((e=>n(e)))).then((e=>e.flat()))},n={hasItem(e,t={}){e=normalizeKey$2(e);const{relativeKey:n,driver:o}=getMount(e);return asyncCall(o.hasItem,n,t)},getItem(e,t={}){e=normalizeKey$2(e);const{relativeKey:n,driver:o}=getMount(e);return asyncCall(o.getItem,n,t).then((e=>destr(e)))},getItems:(e,t={})=>runBatch(e,t,(e=>e.driver.getItems?asyncCall(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:joinKeys$1(e.base,t.key),value:destr(t.value)}))))):Promise.all(e.items.map((t=>asyncCall(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:destr(e)})))))))),getItemRaw(e,t={}){e=normalizeKey$2(e);const{relativeKey:n,driver:o}=getMount(e);return o.getItemRaw?asyncCall(o.getItemRaw,n,t):asyncCall(o.getItem,n,t).then((e=>deserializeRaw(e)))},async setItem(e,t,o={}){if(void 0===t)return n.removeItem(e);e=normalizeKey$2(e);const{relativeKey:s,driver:a}=getMount(e);a.setItem&&(await asyncCall(a.setItem,s,stringify(t),o),a.watch||onChange("update",e))},async setItems(e,t){await runBatch(e,t,(async e=>{if(e.driver.setItems)return asyncCall(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:stringify(e.value),options:e.options}))),t);e.driver.setItem&&await Promise.all(e.items.map((t=>asyncCall(e.driver.setItem,t.relativeKey,stringify(t.value),t.options))))}))},async setItemRaw(e,t,o={}){if(void 0===t)return n.removeItem(e,o);e=normalizeKey$2(e);const{relativeKey:s,driver:a}=getMount(e);if(a.setItemRaw)await asyncCall(a.setItemRaw,s,t,o);else{if(!a.setItem)return;await asyncCall(a.setItem,s,serializeRaw(t),o)}a.watch||onChange("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t}),e=normalizeKey$2(e);const{relativeKey:n,driver:o}=getMount(e);o.removeItem&&(await asyncCall(o.removeItem,n,t),(t.removeMeta||t.removeMata)&&await asyncCall(o.removeItem,n+"$",t),o.watch||onChange("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t}),e=normalizeKey$2(e);const{relativeKey:n,driver:o}=getMount(e),s=Object.create(null);if(o.getMeta&&Object.assign(s,await asyncCall(o.getMeta,n,t)),!t.nativeOnly){const e=await asyncCall(o.getItem,n+"$",t).then((e=>destr(e)));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(s,e))}return s},setMeta(e,t,n={}){return this.setItem(e+"$",t,n)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=normalizeBaseKey(e);const n=getMounts(e,!0);let o=[];const s=[];for(const e of n){const n=await asyncCall(e.driver.getKeys,e.relativeBase,t);for(const t of n){const n=e.mountpoint+normalizeKey$2(t);o.some((e=>n.startsWith(e)))||s.push(n)}o=[e.mountpoint,...o.filter((t=>!t.startsWith(e.mountpoint)))]}return e?s.filter((t=>t.startsWith(e)&&"$"!==t[t.length-1])):s.filter((e=>"$"!==e[e.length-1]))},async clear(e,t={}){e=normalizeBaseKey(e),await Promise.all(getMounts(e,!1).map((async e=>{if(e.driver.clear)return asyncCall(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const n=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(n.map((n=>e.driver.removeItem(n,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>dispose(e))))},watch:async e=>(await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await watch(t.mounts[e],onChange,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await stopWatch()}),async unwatch(){t.watchListeners=[],await stopWatch()},mount(e,o){if((e=normalizeBaseKey(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=o,t.watching&&Promise.resolve(watch(o,onChange,e)).then((n=>{t.unwatch[e]=n})).catch(console.error),n},async unmount(e,n=!0){(e=normalizeBaseKey(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),n&&await dispose(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=normalizeKey$2(e)+":";const t=getMount(e);return{driver:t.driver,base:t.base}},getMounts(e="",t={}){e=normalizeKey$2(e);return getMounts(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint})))},keys:(e,t={})=>n.getKeys(e,t),get:(e,t={})=>n.getItem(e,t),set:(e,t,o={})=>n.setItem(e,t,o),has:(e,t={})=>n.hasItem(e,t),del:(e,t={})=>n.removeItem(e,t),remove:(e,t={})=>n.removeItem(e,t)};return n}({});function useStorage(e=""){return e?prefixStorage(tt,e):tt}function defineCachedFunction(e,t={}){t={name:"_",base:"/cache",swr:!0,maxAge:1,...t};const n={},o=t.group||"nitro/functions",s=t.name||e.name||"_",a=t.integrity||hash([e,t]),i=t.validate||(e=>void 0!==e.value);return async(...l)=>{if(await(t.shouldBypassCache?.(...l)))return e(...l);const c=await(t.getKey||getKey)(...l),u=await(t.shouldInvalidateCache?.(...l)),d=await async function(e,l,c,u){const d=[t.base,o,s,e+".json"].filter(Boolean).join(":").replace(/:\/$/,":index");let f=await useStorage().getItem(d).catch((e=>{console.error("[nitro] [cache] Cache read error.",e),useNitroApp().captureError(e,{event:u,tags:["cache"]})}))||{};if("object"!=typeof f){f={};const e=new Error("Malformed data read from cache.");console.error("[nitro] [cache]",e),useNitroApp().captureError(e,{event:u,tags:["cache"]})}const h=1e3*(t.maxAge??0);h&&(f.expires=Date.now()+h);const p=c||f.integrity!==a||h&&Date.now()-(f.mtime||0)>h||!1===i(f),m=p?(async()=>{const o=n[e];o||(void 0!==f.value&&(t.staleMaxAge||0)>=0&&!1===t.swr&&(f.value=void 0,f.integrity=void 0,f.mtime=void 0,f.expires=void 0),n[e]=Promise.resolve(l()));try{f.value=await n[e]}catch(t){throw o||delete n[e],t}if(!o&&(f.mtime=Date.now(),f.integrity=a,delete n[e],!1!==i(f))){let e;t.maxAge&&!t.swr&&(e={ttl:t.maxAge});const n=useStorage().setItem(d,f,e).catch((e=>{console.error("[nitro] [cache] Cache write error.",e),useNitroApp().captureError(e,{event:u,tags:["cache"]})}));u?.waitUntil&&u.waitUntil(n)}})():Promise.resolve();return void 0===f.value?await m:p&&u&&u.waitUntil&&u.waitUntil(m),t.swr&&!1!==i(f)?(m.catch((e=>{console.error("[nitro] [cache] SWR handler error.",e),useNitroApp().captureError(e,{event:u,tags:["cache"]})})),f):m.then((()=>f))}(c,(()=>e(...l)),u,l[0]&&isEvent(l[0])?l[0]:void 0);let f=d.value;return t.transform&&(f=await t.transform(d,...l)||f),f}}function getKey(...e){return e.length>0?hash(e,{}):""}function escapeKey(e){return String(e).replace(/\W/g,"")}function defineCachedEventHandler(e,t={name:"_",base:"/cache",swr:!0,maxAge:1}){const n=(t.varies||[]).filter(Boolean).map((e=>e.toLowerCase())).sort(),o={...t,getKey:async e=>{const o=await(t.getKey?.(e));if(o)return escapeKey(o);const s=e.node.req.originalUrl||e.node.req.url||e.path;let a;try{a=escapeKey(decodeURI(parseURL(s).pathname)).slice(0,16)||"index"}catch{a="-"}return[`${a}.${hash(s)}`,...n.map((t=>[t,e.node.req.headers[t]])).map((([e,t])=>`${escapeKey(e)}.${hash(t)}`))].join(":")},validate:e=>!!e.value&&(!(e.value.code>=400)&&(void 0!==e.value.body&&("undefined"!==e.value.headers.etag&&"undefined"!==e.value.headers["last-modified"]))),group:t.group||"nitro/handlers",integrity:t.integrity||hash([e,t])},s=function(e,t={}){return defineCachedFunction(e,t)}((async s=>{const a={};for(const e of n){const t=s.node.req.headers[e];void 0!==t&&(a[e]=t)}const i=cloneWithProxy(s.node.req,{headers:a}),l={};let c;const u=createEvent(i,cloneWithProxy(s.node.res,{statusCode:200,writableEnded:!1,writableFinished:!1,headersSent:!1,closed:!1,getHeader:e=>l[e],setHeader(e,t){return l[e]=t,this},getHeaderNames:()=>Object.keys(l),hasHeader:e=>e in l,removeHeader(e){delete l[e]},getHeaders:()=>l,end(e,t,n){return"string"==typeof e&&(c=e),"function"==typeof t&&t(),"function"==typeof n&&n(),this},write:(e,t,n)=>("string"==typeof e&&(c=e),"function"==typeof t&&t(void 0),"function"==typeof n&&n(),!0),writeHead(e,t){if(this.statusCode=e,t){if(Array.isArray(t)||"string"==typeof t)throw new TypeError("Raw headers  is not supported.");for(const e in t){const n=t[e];void 0!==n&&this.setHeader(e,n)}}return this}}));u.fetch=(e,t)=>fetchWithEvent(u,e,t,{fetch:useNitroApp().localFetch}),u.$fetch=(e,t)=>fetchWithEvent(u,e,t,{fetch:globalThis.$fetch}),u.context=s.context,u.context.cache={options:o};const d=await e(u)||c,f=u.node.res.getHeaders();f.etag=String(f.Etag||f.etag||`W/"${hash(d)}"`),f["last-modified"]=String(f["Last-Modified"]||f["last-modified"]||(new Date).toUTCString());const h=[];t.swr?(t.maxAge&&h.push(`s-maxage=${t.maxAge}`),t.staleMaxAge?h.push(`stale-while-revalidate=${t.staleMaxAge}`):h.push("stale-while-revalidate")):t.maxAge&&h.push(`max-age=${t.maxAge}`),h.length>0&&(f["cache-control"]=h.join(", "));return{code:u.node.res.statusCode,headers:f,body:d}}),o);return defineEventHandler((async n=>{if(t.headersOnly){if(handleCacheHeaders(n,{maxAge:t.maxAge}))return;return e(n)}const o=await s(n);if(n.node.res.headersSent||n.node.res.writableEnded)return o.body;if(!handleCacheHeaders(n,{modifiedTime:new Date(o.headers["last-modified"]),etag:o.headers.etag,maxAge:t.maxAge})){n.node.res.statusCode=o.code;for(const e in o.headers){const t=o.headers[e];"set-cookie"===e?n.node.res.appendHeader(e,splitCookiesString(t)):void 0!==t&&n.node.res.setHeader(e,t)}return o.body}}))}function cloneWithProxy(e,t){return new Proxy(e,{get:(e,n,o)=>n in t?t[n]:Reflect.get(e,n,o),set:(e,n,o,s)=>n in t?(t[n]=o,!0):Reflect.set(e,n,o,s)})}tt.mount("/assets",et),tt.mount("data",unstorage_47drivers_47vercel_45kv({driver:"vercelKV"}));const nt=defineCachedEventHandler;function defineRenderHandler(e){const t=useRuntimeConfig();return he((async n=>{const o=useNitroApp(),s={event:n,render:e,response:void 0};if(await o.hooks.callHook("render:before",s),!s.response){if(n.path===`${t.app.baseURL}favicon.ico`)return setResponseHeader(n,"Content-Type","image/x-icon"),send(n,"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");if(s.response=await s.render(n),!s.response){const e=getResponseStatus(n);return setResponseStatus(n,200===e?500:e),send(n,"No response returned from render handler: "+n.path)}}return await o.hooks.callHook("render:response",s.response,s),s.response.headers&&setResponseHeaders(n,s.response.headers),(s.response.statusCode||s.response.statusMessage)&&setResponseStatus(n,s.response.statusCode,s.response.statusMessage),s.response.body}))}const rt=toRouteMatcher(createRouter$1({routes:useRuntimeConfig().nitro.routeRules}));function createRouteRulesHandler(e){return he((t=>{const n=getRouteRules(t);if(n.headers&&ue(t,n.headers),n.redirect){let e=n.redirect.to;if(e.endsWith("/**")){let o=t.path;const s=n.redirect._redirectStripBase;s&&(o=withoutBase(o,s)),e=joinURL(e.slice(0,-3),o)}else if(t.path.includes("?")){e=withQuery(e,getQuery$1(t.path))}return function(e,t,n=302){return e.node.res.statusCode=sanitizeStatusCode(n,e.node.res.statusCode),e.node.res.setHeader("location",t),send(e,`<!DOCTYPE html><html><head><meta http-equiv="refresh" content="0; url=${t.replace(/"/g,"%22")}"></head></html>`,ie.html)}(t,e,n.redirect.statusCode)}if(n.proxy){let o=n.proxy.to;if(o.endsWith("/**")){let e=t.path;const s=n.proxy._proxyStripBase;s&&(e=withoutBase(e,s)),o=joinURL(o.slice(0,-3),e)}else if(t.path.includes("?")){o=withQuery(o,getQuery$1(t.path))}return proxyRequest(t,o,{fetch:e.localFetch,...n.proxy})}}))}function getRouteRules(e){return e.context._nitro=e.context._nitro||{},e.context._nitro.routeRules||(e.context._nitro.routeRules=getRouteRulesForPath(withoutBase(e.path.split("?")[0],useRuntimeConfig().app.baseURL))),e.context._nitro.routeRules}function getRouteRulesForPath(e){return te({},...rt.matchAll(e).reverse())}const ot="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof global?global:{},st="__unctx__",at=ot[st]||(ot[st]=function(e={}){const t={};return{get:(n,o={})=>(t[n]||(t[n]=function(e={}){let t,n=!1;const checkConflict=e=>{if(t&&t!==e)throw new Error("Context conflict")};let o;if(e.asyncContext){const t=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;t?o=new t:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const _getCurrentInstance=()=>{if(o){const e=o.getStore();if(void 0!==e)return e}return t};return{use:()=>{const e=_getCurrentInstance();if(void 0===e)throw new Error("Context is not available");return e},tryUse:()=>_getCurrentInstance(),set:(e,o)=>{o||checkConflict(e),t=e,n=!0},unset:()=>{t=void 0,n=!1},call:(e,s)=>{checkConflict(e),t=e;try{return o?o.run(e,s):s()}finally{n||(t=void 0)}},async callAsync(e,s){t=e;const onRestore=()=>{t=e},onLeave=()=>t===e?onRestore:void 0;lt.add(onLeave);try{const a=o?o.run(e,s):s();return n||(t=void 0),await a}finally{lt.delete(onLeave)}}}}({...e,...o})),t[n])}}()),getContext=(e,t={})=>at.get(e,t),it="__unctx_async_handlers__",lt=ot[it]||(ot[it]=new Set);function baseURL(){return useRuntimeConfig().app.baseURL}function buildAssetsURL(...e){return joinRelativeURL(publicAssetsURL(),useRuntimeConfig().app.buildAssetsDir,...e)}function publicAssetsURL(...e){const t=useRuntimeConfig().app,n=t.cdnURL||t.baseURL;return e.length?joinRelativeURL(n,...e):n}function getDefaultExportFromNamespaceIfNotNamed(e){return e&&Object.prototype.hasOwnProperty.call(e,"default")&&1===Object.keys(e).length?e.default:e}getContext("nitro-app",{asyncContext:!1,AsyncLocalStorage:void 0});const ct=getDefaultExportFromNamespaceIfNotNamed(e);var ut={},dt={};var ft=ct,ht=getDefaultExportFromNamespaceIfNotNamed(t)();dt.defer=function(){var e,t,n=new ht.Promise((function(n,o){e=n,t=o}));return{resolve:e,reject:t,promise:n}},dt.when=ht.resolve,dt.resolve=ht.resolve,dt.all=ht.all,dt.props=ht.props,dt.reject=ht.reject,dt.promisify=ht.promisify,dt.mapSeries=ht.mapSeries,dt.attempt=ht.attempt,dt.nfcall=function(e){var t=Array.prototype.slice.call(arguments,1);return ht.promisify(e).apply(null,t)},ht.prototype.fail=ht.prototype.caught,ht.prototype.also=function(e){return this.then((function(t){var n=ft.extend({},t,e(t));return ht.props(n)}))};var pt={},mt=ct,gt=pt.types={document:"document",paragraph:"paragraph",run:"run",text:"text",tab:"tab",checkbox:"checkbox",hyperlink:"hyperlink",noteReference:"noteReference",image:"image",note:"note",commentReference:"commentReference",comment:"comment",table:"table",tableRow:"tableRow",tableCell:"tableCell",break:"break",bookmarkStart:"bookmarkStart"};var yt={baseline:"baseline",superscript:"superscript",subscript:"subscript"};function Notes(e){this._notes=mt.indexBy(e,(function(e){return noteKey(e.noteType,e.noteId)}))}function noteKey(e,t){return e+"-"+t}function Break(e){return{type:gt.break,breakType:e}}Notes.prototype.resolve=function(e){return this.findNoteByKey(noteKey(e.noteType,e.noteId))},Notes.prototype.findNoteByKey=function(e){return this._notes[e]||null},pt.document=pt.Document=function(e,t){return{type:gt.document,children:e,notes:(t=t||{}).notes||new Notes({}),comments:t.comments||[]}},pt.paragraph=pt.Paragraph=function(e,t){var n=(t=t||{}).indent||{};return{type:gt.paragraph,children:e,styleId:t.styleId||null,styleName:t.styleName||null,numbering:t.numbering||null,alignment:t.alignment||null,indent:{start:n.start||null,end:n.end||null,firstLine:n.firstLine||null,hanging:n.hanging||null}}},pt.run=pt.Run=function(e,t){return{type:gt.run,children:e,styleId:(t=t||{}).styleId||null,styleName:t.styleName||null,isBold:!!t.isBold,isUnderline:!!t.isUnderline,isItalic:!!t.isItalic,isStrikethrough:!!t.isStrikethrough,isAllCaps:!!t.isAllCaps,isSmallCaps:!!t.isSmallCaps,verticalAlignment:t.verticalAlignment||yt.baseline,font:t.font||null,fontSize:t.fontSize||null,highlight:t.highlight||null}},pt.text=pt.Text=function(e){return{type:gt.text,value:e}},pt.tab=pt.Tab=function(){return{type:gt.tab}},pt.checkbox=pt.Checkbox=function(e){return{type:gt.checkbox,checked:e.checked}},pt.Hyperlink=function(e,t){return{type:gt.hyperlink,children:e,href:t.href,anchor:t.anchor,targetFrame:t.targetFrame}},pt.noteReference=pt.NoteReference=function(e){return{type:gt.noteReference,noteType:e.noteType,noteId:e.noteId}},pt.Notes=Notes,pt.Note=function(e){return{type:gt.note,noteType:e.noteType,noteId:e.noteId,body:e.body}},pt.commentReference=function(e){return{type:gt.commentReference,commentId:e.commentId}},pt.comment=function(e){return{type:gt.comment,commentId:e.commentId,body:e.body,authorName:e.authorName,authorInitials:e.authorInitials}},pt.Image=function(e){return{type:gt.image,read:function(t){return t?e.readImage(t):e.readImage().then((function(e){return Buffer.from(e)}))},readAsArrayBuffer:function(){return e.readImage()},readAsBase64String:function(){return e.readImage("base64")},readAsBuffer:function(){return e.readImage().then((function(e){return Buffer.from(e)}))},altText:e.altText,contentType:e.contentType}},pt.Table=function(e,t){return{type:gt.table,children:e,styleId:(t=t||{}).styleId||null,styleName:t.styleName||null}},pt.TableRow=function(e,t){return{type:gt.tableRow,children:e,isHeader:(t=t||{}).isHeader||!1}},pt.TableCell=function(e,t){return{type:gt.tableCell,children:e,colSpan:null==(t=t||{}).colSpan?1:t.colSpan,rowSpan:null==t.rowSpan?1:t.rowSpan}},pt.lineBreak=Break("line"),pt.pageBreak=Break("page"),pt.columnBreak=Break("column"),pt.BookmarkStart=function(e){return{type:gt.bookmarkStart,name:e.name}},pt.verticalAlignment=yt;var wt={},vt=ct;function Result$5(e,t){this.value=e,this.messages=t||[]}function combineMessages(e){var t=[];return vt.flatten(vt.pluck(e,"messages"),!0).forEach((function(e){(function(e,t){return void 0!==vt.find(e,isSameMessage.bind(null,t))})(t,e)||t.push(e)})),t}function isSameMessage(e,t){return e.type===t.type&&e.message===t.message}wt.Result=Result$5,wt.success=function(e){return new Result$5(e,[])},wt.warning=function(e){return{type:"warning",message:e}},wt.error=function(e){return{type:"error",message:e.message,error:e}},Result$5.prototype.map=function(e){return new Result$5(e(this.value),this.messages)},Result$5.prototype.flatMap=function(e){var t=e(this.value);return new Result$5(t.value,combineMessages([this,t]))},Result$5.prototype.flatMapThen=function(e){var t=this;return e(this.value).then((function(e){return new Result$5(e.value,combineMessages([t,e]))}))},Result$5.combine=function(e){return new Result$5(vt.flatten(vt.pluck(e,"value")),combineMessages(e))};var bt={};var Et=getDefaultExportFromNamespaceIfNotNamed(n),_t=getDefaultExportFromNamespaceIfNotNamed(o);bt.openArrayBuffer=function(e){return _t.loadAsync(e).then((function(e){return{exists:function(t){return null!==e.file(t)},read:function(t,n){return e.file(t).async("uint8array").then((function(e){return"base64"===n?Et.fromByteArray(e):n?new TextDecoder(n).decode(e):e}))},write:function(t,n){e.file(t,n)},toArrayBuffer:function(){return e.generateAsync({type:"arraybuffer"})}}}))},bt.splitPath=function(e){var t=e.lastIndexOf("/");return-1===t?{dirname:"",basename:e}:{dirname:e.substring(0,t),basename:e.substring(t+1)}},bt.joinPath=function(){var e=Array.prototype.filter.call(arguments,(function(e){return e})),t=[];return e.forEach((function(e){/^\//.test(e)?t=[e]:t.push(e)})),t.join("/")};var Rt={},Ct={},xt={},It=ct;xt.Element=Element$1,xt.element=function(e,t,n){return new Element$1(e,t,n)},xt.text=function(e){return{type:"text",value:e}};var St=xt.emptyElement={first:function(){return null},firstOrEmpty:function(){return St},attributes:{},children:[]};function Element$1(e,t,n){this.type="element",this.name=e,this.attributes=t||{},this.children=n||[]}Element$1.prototype.first=function(e){return It.find(this.children,(function(t){return t.name===e}))},Element$1.prototype.firstOrEmpty=function(e){return this.first(e)||St},Element$1.prototype.getElementsByTagName=function(e){return toElementList(It.filter(this.children,(function(t){return t.name===e})))},Element$1.prototype.text=function(){if(0===this.children.length)return"";if(1!==this.children.length||"text"!==this.children[0].type)throw new Error("Not implemented");return this.children[0].value};var At={getElementsByTagName:function(e){return toElementList(It.flatten(this.map((function(t){return t.getElementsByTagName(e)}),!0)))}};function toElementList(e){return It.extend(e,At)}var kt={},Tt={};var Nt=getDefaultExportFromNamespaceIfNotNamed(s),Ot=getDefaultExportFromNamespaceIfNotNamed(a);Tt.parseFromString=function(e){var t=null,n=new Nt.DOMParser({errorHandler:function(e,n){t={level:e,message:n}}}).parseFromString(e);if(null===t)return n;throw new Error(t.level+": "+t.message)},Tt.Node=Ot.Node;var jt=dt,Pt=ct,Mt=Tt,Ht=xt,Bt=Ht.Element;kt.readString=function(e,t){t=t||{};try{var n=Mt.parseFromString(e,"text/xml")}catch(e){return jt.reject(e)}if("parsererror"===n.documentElement.tagName)return jt.resolve(new Error(n.documentElement.textContent));function convertNode(e){switch(e.nodeType){case $t.ELEMENT_NODE:return function(e){var t=convertName(e),n=[];Pt.forEach(e.childNodes,(function(e){var t=convertNode(e);t&&n.push(t)}));var o={};return Pt.forEach(e.attributes,(function(e){o[convertName(e)]=e.value})),new Bt(t,o,n)}(e);case $t.TEXT_NODE:return Ht.text(e.nodeValue)}}function convertName(e){if(e.namespaceURI){var n=t[e.namespaceURI];return(n?n+":":"{"+e.namespaceURI+"}")+e.localName}return e.localName}return jt.resolve(convertNode(n.documentElement))};var $t=Mt.Node;var Lt={};var Ft=ct,Dt=getDefaultExportFromNamespaceIfNotNamed(i);function writeTextNode(e,t){e.text(t.value)}Lt.writeString=function(e,t){var n=Ft.invert(t),o={element:function(e,t){var n=e.element(mapElementName(t.name),t.attributes);t.children.forEach((function(e){writeNode(n,e)}))},text:writeTextNode};function writeNode(e,t){return o[t.type](e,t)}function mapElementName(e){var t=/^\{(.*)\}(.*)$/.exec(e);if(t){var o=n[t[1]];return o+(""===o?"":":")+t[2]}return e}return function(e){var n=Dt.create(mapElementName(e.name),{version:"1.0",encoding:"UTF-8",standalone:!0});return Ft.forEach(t,(function(e,t){var o="xmlns"+(""===t?"":":"+t);n.attribute(o,e)})),e.children.forEach((function(e){writeNode(n,e)})),n.end()}(e)};var qt=xt;Ct.Element=qt.Element,Ct.element=qt.element,Ct.emptyElement=qt.emptyElement,Ct.text=qt.text,Ct.readString=kt.readString,Ct.writeString=Lt.writeString;var zt=ct,Ut=dt,Gt=Ct;Rt.read=read$1,Rt.readXmlFromZipFile=function(e,t){return e.exists(t)?e.read(t,"utf-8").then(stripUtf8Bom).then(read$1):Ut.resolve(null)};var Kt={"http://schemas.openxmlformats.org/wordprocessingml/2006/main":"w","http://schemas.openxmlformats.org/officeDocument/2006/relationships":"r","http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing":"wp","http://schemas.openxmlformats.org/drawingml/2006/main":"a","http://schemas.openxmlformats.org/drawingml/2006/picture":"pic","http://purl.oclc.org/ooxml/wordprocessingml/main":"w","http://purl.oclc.org/ooxml/officeDocument/relationships":"r","http://purl.oclc.org/ooxml/drawingml/wordprocessingDrawing":"wp","http://purl.oclc.org/ooxml/drawingml/main":"a","http://purl.oclc.org/ooxml/drawingml/picture":"pic","http://schemas.openxmlformats.org/package/2006/content-types":"content-types","http://schemas.openxmlformats.org/package/2006/relationships":"relationships","http://schemas.openxmlformats.org/markup-compatibility/2006":"mc","urn:schemas-microsoft-com:vml":"v","urn:schemas-microsoft-com:office:word":"office-word","http://schemas.microsoft.com/office/word/2010/wordml":"wordml"};function read$1(e){return Gt.readString(e,Kt).then((function(e){return collapseAlternateContent(e)[0]}))}function stripUtf8Bom(e){return e.replace(/^\uFEFF/g,"")}function collapseAlternateContent(e){return"element"===e.type?"mc:AlternateContent"===e.name?e.first("mc:Fallback").children:(e.children=zt.flatten(e.children.map(collapseAlternateContent,!0)),[e]):[e]}var Wt={};const Xt=getDefaultExportFromNamespaceIfNotNamed(l);var Vt={};Vt.uriToZipEntryName=function(e,t){return"/"===t.charAt(0)?t.substr(1):e+"/"+t},Vt.replaceFragment=function(e,t){var n=e.indexOf("#");-1!==n&&(e=e.substring(0,n));return e+"#"+t},Wt.createBodyReader=function(e){return{readXmlElement:function(t){return new BodyReader(e).readXmlElement(t)},readXmlElements:function(t){return new BodyReader(e).readXmlElements(t)}}},Wt._readNumberingProperties=readNumberingProperties;var Yt=Xt,Jt=ct,Qt=pt,Zt=wt.Result,en=wt.warning,tn=Ct,nn=Vt;function BodyReader(e){var t=[],n=[],o=[],s=e.relationships,a=e.contentTypes,i=e.docxFile,l=e.files,c=e.numbering,u=e.styles;function readXmlElements(e){return combineResults(e.map(readXmlElement))}function readXmlElement(e){if("element"===e.type){var t=d[e.name];if(t)return t(e);if(!Object.prototype.hasOwnProperty.call(on,e.name))return emptyResultWithMessages([en("An unrecognised element was ignored: "+e.name)])}return emptyResult()}function readParagraphProperties(e){return function(e){return readStyle(e,"w:pStyle","Paragraph",u.findParagraphStyleById)}(e).map((function(t){return{type:"paragraphProperties",styleId:t.styleId,styleName:t.name,alignment:e.firstOrEmpty("w:jc").attributes["w:val"],numbering:readNumberingProperties(t.styleId,e.firstOrEmpty("w:numPr"),c),indent:readParagraphIndent(e.firstOrEmpty("w:ind"))}}))}function readParagraphIndent(e){return{start:e.attributes["w:start"]||e.attributes["w:left"],end:e.attributes["w:end"]||e.attributes["w:right"],firstLine:e.attributes["w:firstLine"],hanging:e.attributes["w:hanging"]}}function readRunProperties(e){return function(e){return readStyle(e,"w:rStyle","Run",u.findCharacterStyleById)}(e).map((function(t){var n=e.firstOrEmpty("w:sz").attributes["w:val"],o=/^[0-9]+$/.test(n)?parseInt(n,10)/2:null;return{type:"runProperties",styleId:t.styleId,styleName:t.name,verticalAlignment:e.firstOrEmpty("w:vertAlign").attributes["w:val"],font:e.firstOrEmpty("w:rFonts").attributes["w:ascii"],fontSize:o,isBold:readBooleanElement(e.first("w:b")),isUnderline:readUnderline(e.first("w:u")),isItalic:readBooleanElement(e.first("w:i")),isStrikethrough:readBooleanElement(e.first("w:strike")),isAllCaps:readBooleanElement(e.first("w:caps")),isSmallCaps:readBooleanElement(e.first("w:smallCaps")),highlight:readHighlightValue(e.firstOrEmpty("w:highlight").attributes["w:val"])}}))}function readUnderline(e){if(e){var t=e.attributes["w:val"];return void 0!==t&&"false"!==t&&"0"!==t&&"none"!==t}return!1}function readBooleanElement(e){if(e){var t=e.attributes["w:val"];return"false"!==t&&"0"!==t}return!1}function readHighlightValue(e){return e&&"none"!==e?e:null}function readStyle(e,t,n,o){var s=[],a=e.first(t),i=null,l=null;if(a&&(i=a.attributes["w:val"])){var c=o(i);c?l=c.name:s.push(function(e,t){return en(e+" style with ID "+t+" was referenced but not defined in the document")}(n,i))}return elementResultWithMessages({styleId:i,name:l},s)}function parseCurrentInstrText(e){return function(e,t){var n=/\s*HYPERLINK "(.*)"/.exec(e);if(n)return{type:"hyperlink",options:{href:n[1]}};var o=/\s*HYPERLINK\s+\\l\s+"(.*)"/.exec(e);if(o)return{type:"hyperlink",options:{anchor:o[1]}};if(/\s*FORMCHECKBOX\s*/.exec(e)){var s=t.firstOrEmpty("w:ffData").firstOrEmpty("w:checkBox"),a=s.first("w:checked");return{type:"checkbox",checked:readBooleanElement(null==a?s.first("w:default"):a)}}return{type:"unknown"}}(n.join(""),"begin"===e.type?e.fldChar:tn.emptyElement)}function noteReferenceReader(e){return function(t){var n=t.attributes["w:id"];return elementResult(new Qt.NoteReference({noteType:e,noteId:n}))}}function readChildElements(e){return readXmlElements(e.children)}var d={"w:p":function(e){var t=e.firstOrEmpty("w:pPr");if(!!t.firstOrEmpty("w:rPr").first("w:del"))return e.children.forEach((function(e){o.push(e)})),emptyResult();var n=e.children;return o.length>0&&(n=o.concat(n),o=[]),ReadResult.map(readParagraphProperties(t),readXmlElements(n),(function(e,t){return new Qt.Paragraph(t,e)})).insertExtra()},"w:r":function(e){return ReadResult.map(readRunProperties(e.firstOrEmpty("w:rPr")),readXmlElements(e.children),(function(e,n){var o,s=(o=Jt.last(t.filter((function(e){return"hyperlink"===e.type}))))?o.options:null;return null!==s&&(n=[new Qt.Hyperlink(n,s)]),new Qt.Run(n,e)}))},"w:fldChar":function(e){var o=e.attributes["w:fldCharType"];if("begin"===o)t.push({type:"begin",fldChar:e}),n=[];else if("end"===o){var s=t.pop();if("begin"===s.type&&(s=parseCurrentInstrText(s)),"checkbox"===s.type)return elementResult(Qt.checkbox({checked:s.checked}))}else if("separate"===o){var a=parseCurrentInstrText(t.pop());t.push(a)}return emptyResult()},"w:instrText":function(e){return n.push(e.text()),emptyResult()},"w:t":function(e){return elementResult(new Qt.Text(e.text()))},"w:tab":function(e){return elementResult(new Qt.Tab)},"w:noBreakHyphen":function(){return elementResult(new Qt.Text("‑"))},"w:softHyphen":function(e){return elementResult(new Qt.Text("­"))},"w:sym":function(e){var t=e.attributes["w:font"],n=e.attributes["w:char"],o=Yt.hex(t,n);return null==o&&/^F0..$/.test(n)&&(o=Yt.hex(t,n.substring(2))),null==o?emptyResultWithMessages([en("A w:sym element with an unsupported character was ignored: char "+n+" in font "+t)]):elementResult(new Qt.Text(o.string))},"w:hyperlink":function(e){var t=e.attributes["r:id"],n=e.attributes["w:anchor"];return readXmlElements(e.children).map((function(o){function create(t){var n=e.attributes["w:tgtFrame"]||null;return new Qt.Hyperlink(o,Jt.extend({targetFrame:n},t))}if(t){var a=s.findTargetByRelationshipId(t);return n&&(a=nn.replaceFragment(a,n)),create({href:a})}return n?create({anchor:n}):o}))},"w:tbl":function(e){var t=function(e){return function(e){return readStyle(e,"w:tblStyle","Table",u.findTableStyleById)}(e).map((function(e){return{styleId:e.styleId,styleName:e.name}}))}(e.firstOrEmpty("w:tblPr"));return readXmlElements(e.children).flatMap(calculateRowSpans).flatMap((function(e){return t.map((function(t){return Qt.Table(e,t)}))}))},"w:tr":function(e){var t=!!e.firstOrEmpty("w:trPr").first("w:tblHeader");return readXmlElements(e.children).map((function(e){return Qt.TableRow(e,{isHeader:t})}))},"w:tc":function(e){return readXmlElements(e.children).map((function(t){var n=e.firstOrEmpty("w:tcPr"),o=n.firstOrEmpty("w:gridSpan").attributes["w:val"],s=o?parseInt(o,10):1,a=Qt.TableCell(t,{colSpan:s});return a._vMerge=function(e){var t=e.first("w:vMerge");if(t){var n=t.attributes["w:val"];return"continue"===n||!n}return null}(n),a}))},"w:footnoteReference":noteReferenceReader("footnote"),"w:endnoteReference":noteReferenceReader("endnote"),"w:commentReference":function(e){return elementResult(Qt.commentReference({commentId:e.attributes["w:id"]}))},"w:br":function(e){var t=e.attributes["w:type"];return null==t||"textWrapping"===t?elementResult(Qt.lineBreak):"page"===t?elementResult(Qt.pageBreak):"column"===t?elementResult(Qt.columnBreak):emptyResultWithMessages([en("Unsupported break type: "+t)])},"w:bookmarkStart":function(e){var t=e.attributes["w:name"];return"_GoBack"===t?emptyResult():elementResult(new Qt.BookmarkStart({name:t}))},"mc:AlternateContent":function(e){return readChildElements(e.first("mc:Fallback"))},"w:sdt":function(e){var t,n=e.firstOrEmpty("w:sdtPr").first("wordml:checkbox");if(n){var o=n.first("wordml:checked"),s=!!o&&("false"!==(t=o.attributes["wordml:val"])&&"0"!==t);return elementResult(Qt.checkbox({checked:s}))}return readXmlElements(e.firstOrEmpty("w:sdtContent").children)},"w:ins":readChildElements,"w:object":readChildElements,"w:smartTag":readChildElements,"w:drawing":readChildElements,"w:pict":function(e){return readChildElements(e).toExtra()},"v:roundrect":readChildElements,"v:shape":readChildElements,"v:textbox":readChildElements,"w:txbxContent":readChildElements,"wp:inline":readDrawingElement,"wp:anchor":readDrawingElement,"v:imagedata":function(e){var t=e.attributes["r:id"];return t?readImage(findEmbeddedImageFile(t),e.attributes["o:title"]):emptyResultWithMessages([en("A v:imagedata element without a relationship ID was ignored")])},"v:group":readChildElements,"v:rect":readChildElements};return{readXmlElement:readXmlElement,readXmlElements:readXmlElements};function calculateRowSpans(e){if(Jt.any(e,(function(e){return e.type!==Qt.types.tableRow})))return elementResultWithMessages(e,[en("unexpected non-row element in table, cell merging may be incorrect")]);if(Jt.any(e,(function(e){return Jt.any(e.children,(function(e){return e.type!==Qt.types.tableCell}))})))return elementResultWithMessages(e,[en("unexpected non-cell element in table row, cell merging may be incorrect")]);var t={};return e.forEach((function(e){var n=0;e.children.forEach((function(e){e._vMerge&&t[n]?t[n].rowSpan++:(t[n]=e,e._vMerge=!1),n+=e.colSpan}))})),e.forEach((function(e){e.children=e.children.filter((function(e){return!e._vMerge})),e.children.forEach((function(e){delete e._vMerge}))})),elementResult(e)}function readDrawingElement(e){return combineResults(e.getElementsByTagName("a:graphic").getElementsByTagName("a:graphicData").getElementsByTagName("pic:pic").getElementsByTagName("pic:blipFill").getElementsByTagName("a:blip").map(readBlip.bind(null,e)))}function readBlip(e,t){var n,o=e.first("wp:docPr").attributes,a=null==(n=o.descr)||/^\s*$/.test(n)?o.title:o.descr,i=function(e){var t=e.attributes["r:embed"],n=e.attributes["r:link"];if(t)return findEmbeddedImageFile(t);if(n){var o=s.findTargetByRelationshipId(n);return{path:o,read:l.read.bind(l,o)}}return null}(t);return null===i?emptyResultWithMessages([en("Could not find image file for a:blip element")]):readImage(i,a)}function findEmbeddedImageFile(e){var t=nn.uriToZipEntryName("word",s.findTargetByRelationshipId(e));return{path:t,read:i.read.bind(i,t)}}function readImage(e,t){var n=a.findContentType(e.path);return elementResultWithMessages(Qt.Image({readImage:e.read,altText:t,contentType:n}),rn[n]?[]:en("Image of type "+n+" is unlikely to display in web browsers"))}}function readNumberingProperties(e,t,n){var o=t.firstOrEmpty("w:ilvl").attributes["w:val"],s=t.firstOrEmpty("w:numId").attributes["w:val"];if(void 0!==o&&void 0!==s)return n.findLevel(s,o);if(null!=e){var a=n.findLevelByParagraphStyleId(e);if(null!=a)return a}return null}var rn={"image/png":!0,"image/gif":!0,"image/jpeg":!0,"image/svg+xml":!0,"image/tiff":!0},on={"office-word:wrap":!0,"v:shadow":!0,"v:shapetype":!0,"w:annotationRef":!0,"w:bookmarkEnd":!0,"w:sectPr":!0,"w:proofErr":!0,"w:lastRenderedPageBreak":!0,"w:commentRangeStart":!0,"w:commentRangeEnd":!0,"w:del":!0,"w:footnoteRef":!0,"w:endnoteRef":!0,"w:pPr":!0,"w:rPr":!0,"w:tblPr":!0,"w:tblGrid":!0,"w:trPr":!0,"w:tcPr":!0};function emptyResultWithMessages(e){return new ReadResult(null,null,e)}function emptyResult(){return new ReadResult(null)}function elementResult(e){return new ReadResult(e)}function elementResultWithMessages(e,t){return new ReadResult(e,null,t)}function ReadResult(e,t,n){this.value=e||[],this.extra=t||[],this._result=new Zt({element:this.value,extra:t},n),this.messages=this._result.messages}function combineResults(e){var t=Zt.combine(Jt.pluck(e,"_result"));return new ReadResult(Jt.flatten(Jt.pluck(t.value,"element")),Jt.filter(Jt.flatten(Jt.pluck(t.value,"extra")),identity),t.messages)}function joinElements(e,t){return Jt.flatten([e,t])}function identity(e){return e}ReadResult.prototype.toExtra=function(){return new ReadResult(null,joinElements(this.extra,this.value),this.messages)},ReadResult.prototype.insertExtra=function(){var e=this.extra;return e&&e.length?new ReadResult(joinElements(this.value,e),null,this.messages):this},ReadResult.prototype.map=function(e){var t=this._result.map((function(t){return e(t.element)}));return new ReadResult(t.value,this.extra,t.messages)},ReadResult.prototype.flatMap=function(e){var t=this._result.flatMap((function(t){return e(t.element)._result}));return new ReadResult(t.value.element,joinElements(this.extra,t.value.extra),t.messages)},ReadResult.map=function(e,t,n){return new ReadResult(n(e.value,t.value),joinElements(e.extra,t.extra),e.messages.concat(t.messages))};var sn={DocumentXmlReader:function(e){var t=e.bodyReader;return{convertXmlToDocument:function(n){var o=n.first("w:body");if(null==o)throw new Error("Could not find the body element: are you sure this is a docx file?");var s=t.readXmlElements(o.children).map((function(t){return new an.Document(t,{notes:e.notes,comments:e.comments})}));return new ln(s.value,s.messages)}}}},an=pt,ln=wt.Result;var cn={};function Relationships(e){var t={};e.forEach((function(e){t[e.relationshipId]=e.target}));var n={};return e.forEach((function(e){n[e.type]||(n[e.type]=[]),n[e.type].push(e.target)})),{findTargetByRelationshipId:function(e){return t[e]},findTargetsByType:function(e){return n[e]||[]}}}cn.readRelationships=function(e){var t=[];return e.children.forEach((function(e){if("relationships:Relationship"===e.name){var n={relationshipId:e.attributes.Id,target:e.attributes.Target,type:e.attributes.Type};t.push(n)}})),new Relationships(t)},cn.defaultValue=new Relationships([]),cn.Relationships=Relationships;var un={readContentTypesFromXml:function(e){var t={},n={};return e.children.forEach((function(e){if("content-types:Default"===e.name&&(t[e.attributes.Extension]=e.attributes.ContentType),"content-types:Override"===e.name){var o=e.attributes.PartName;"/"===o.charAt(0)&&(o=o.substring(1)),n[o]=e.attributes.ContentType}})),contentTypes(n,t)}},dn={png:"png",gif:"gif",jpeg:"jpeg",jpg:"jpeg",tif:"tiff",tiff:"tiff",bmp:"bmp"};function contentTypes(e,t){return{findContentType:function(n){var o=e[n];if(o)return o;var s=n.split("."),a=s[s.length-1];if(t.hasOwnProperty(a))return t[a];var i=dn[a.toLowerCase()];return i?"image/"+i:null}}}un.defaultContentTypes=contentTypes({},{});var fn={},hn=ct;function Numbering(e,t,n){var o=hn.flatten(hn.values(t).map((function(e){return hn.values(e.levels)}))),s=hn.indexBy(o.filter((function(e){return null!=e.paragraphStyleId})),"paragraphStyleId");return{findLevel:function findLevel(o,s){var a=e[o];if(a){var i=t[a.abstractNumId];return i?null==i.numStyleLink?t[a.abstractNumId].levels[s]:findLevel(n.findNumberingStyleById(i.numStyleLink).numId,s):null}return null},findLevelByParagraphStyleId:function(e){return s[e]||null}}}fn.readNumberingXml=function(e,t){if(!t||!t.styles)throw new Error("styles is missing");var n=function(e){var t={};return e.getElementsByTagName("w:abstractNum").forEach((function(e){var n=e.attributes["w:abstractNumId"];t[n]=function(e){var t={};e.getElementsByTagName("w:lvl").forEach((function(e){var n=e.attributes["w:ilvl"],o=e.firstOrEmpty("w:numFmt").attributes["w:val"],s=e.firstOrEmpty("w:pStyle").attributes["w:val"];t[n]={isOrdered:"bullet"!==o,level:n,paragraphStyleId:s}}));var n=e.firstOrEmpty("w:numStyleLink").attributes["w:val"];return{levels:t,numStyleLink:n}}(e)})),t}(e);return new Numbering(function(e){var t={};return e.getElementsByTagName("w:num").forEach((function(e){var n=e.attributes["w:numId"],o=e.first("w:abstractNumId").attributes["w:val"];t[n]={abstractNumId:o}})),t}(e),n,t.styles)},fn.Numbering=Numbering,fn.defaultNumbering=new Numbering({},{});var pn={};function Styles(e,t,n,o){return{findParagraphStyleById:function(t){return e[t]},findCharacterStyleById:function(e){return t[e]},findTableStyleById:function(e){return n[e]},findNumberingStyleById:function(e){return o[e]}}}pn.readStylesXml=function(e){var t={},n={},o={},s={},a={paragraph:t,character:n,table:o};return e.getElementsByTagName("w:style").forEach((function(e){var t=function(e){var t=e.attributes["w:type"],n=e.attributes["w:styleId"],o=function(e){var t=e.first("w:name");return t?t.attributes["w:val"]:null}(e);return{type:t,styleId:n,name:o}}(e);if("numbering"===t.type)s[t.styleId]=function(e){var t=e.firstOrEmpty("w:pPr").firstOrEmpty("w:numPr").firstOrEmpty("w:numId").attributes["w:val"];return{numId:t}}(e);else{var n=a[t.type];n&&(n[t.styleId]=t)}})),new Styles(t,n,o,s)},pn.Styles=Styles,pn.defaultStyles=new Styles({},{}),Styles.EMPTY=new Styles({},{},{},{});var mn={},gn=pt,yn=wt.Result;function createReader(e,t){function isFootnoteElement(e){var t=e.attributes["w:type"];return"continuationSeparator"!==t&&"separator"!==t}function readFootnoteElement(n){var o=n.attributes["w:id"];return t.readXmlElements(n.children).map((function(t){return gn.Note({noteType:e,noteId:o,body:t})}))}return function(t){return yn.combine(t.getElementsByTagName("w:"+e).filter(isFootnoteElement).map(readFootnoteElement))}}mn.createFootnotesReader=createReader.bind(mn,"footnote"),mn.createEndnotesReader=createReader.bind(mn,"endnote");var wn={},vn=pt,bn=wt.Result;wn.createCommentsReader=function(e){function readCommentElement(t){var n=t.attributes["w:id"];function readOptionalAttribute(e){return(t.attributes[e]||"").trim()||null}return e.readXmlElements(t.children).map((function(e){return vn.comment({commentId:n,body:e,authorName:readOptionalAttribute("w:author"),authorInitials:readOptionalAttribute("w:initials")})}))}return function(e){return bn.combine(e.getElementsByTagName("w:comment").map(readCommentElement))}};var En={};const _n=getDefaultExportFromNamespaceIfNotNamed(c),Rn=getDefaultExportFromNamespaceIfNotNamed(u),Cn=getDefaultExportFromNamespaceIfNotNamed(d),xn=getDefaultExportFromNamespaceIfNotNamed(f),In=getDefaultExportFromNamespaceIfNotNamed(h);var Sn=_n,An=Rn,kn=Cn,Tn=xn.dirname,Nn=xn.resolve,On=In,jn=dt;function Files$1(e){return{read:function(t,n){return function(t){var n=uriToPath(t);return On(n)?jn.resolve(n):e?jn.resolve(Nn(e,n)):jn.reject(new Error("could not find external image '"+t+"', path of input document is unknown"))}(t).then((function(o){return Pn(o,n).caught((function(n){var o="could not open external image: '"+t+"' (document directory: '"+e+"')\n"+n.message;return jn.reject(new Error(o))}))}))}}}En.Files=Files$1,En.uriToPath=uriToPath,Files$1.relativeToFile=function(e){return new Files$1(Tn(e))};var Pn=jn.promisify(Sn.readFile.bind(Sn));function uriToPath(e,t){t||(t=kn.platform());var n=An.parse(e);if(function(e){return"file:"===e.protocol&&(!e.host||"localhost"===e.host)}(n)||function(e){return!e.protocol&&!e.host}(n)){var o=decodeURIComponent(n.path);return"win32"===t&&/^\/[a-z]:/i.test(o)?o.slice(1):o}throw new Error("Could not convert URI to path: "+e)}ut.read=function(e,t){return t=t||{},Mn.props({contentTypes:Vn(e),partPaths:findPartPaths(e),docxFile:e,files:t.path?Xn.relativeToFile(t.path):new Xn(null)}).also((function(t){return{styles:readStylesFromZipFile(e,t.partPaths.styles)}})).also((function(t){return{numbering:readNumberingFromZipFile(e,t.partPaths.numbering,t.styles)}})).also((function(e){return{footnotes:readXmlFileWithBody(e.partPaths.footnotes,e,(function(e,t){return t?Kn.createFootnotesReader(e)(t):new Bn([])})),endnotes:readXmlFileWithBody(e.partPaths.endnotes,e,(function(e,t){return t?Kn.createEndnotesReader(e)(t):new Bn([])})),comments:readXmlFileWithBody(e.partPaths.comments,e,(function(e,t){return t?Wn.createCommentsReader(e)(t):new Bn([])}))}})).also((function(e){return{notes:e.footnotes.flatMap((function(t){return e.endnotes.map((function(e){return new Hn.Notes(t.concat(e))}))}))}})).then((function(e){return readXmlFileWithBody(e.partPaths.mainDocument,e,(function(t,n){return e.notes.flatMap((function(o){return e.comments.flatMap((function(e){return new Dn({bodyReader:t,notes:o,comments:e}).convertXmlToDocument(n)}))}))}))}))},ut._findPartPaths=findPartPaths;var Mn=dt,Hn=pt,Bn=wt.Result,$n=bt,Ln=Rt.readXmlFromZipFile,Fn=Wt.createBodyReader,Dn=sn.DocumentXmlReader,qn=cn,zn=un,Un=fn,Gn=pn,Kn=mn,Wn=wn,Xn=En.Files;function findPartPaths(e){return Yn(e).then((function(t){var n=findPartPath({docxFile:e,relationships:t,relationshipType:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",basePath:"",fallbackPath:"word/document.xml"});if(!e.exists(n))throw new Error("Could not find main document part. Are you sure this is a valid .docx file?");return xmlFileReader({filename:relationshipsFilename(n),readElement:qn.readRelationships,defaultValue:qn.defaultValue})(e).then((function(t){function findPartRelatedToMainDocument(o){return findPartPath({docxFile:e,relationships:t,relationshipType:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/"+o,basePath:$n.splitPath(n).dirname,fallbackPath:"word/"+o+".xml"})}return{mainDocument:n,comments:findPartRelatedToMainDocument("comments"),endnotes:findPartRelatedToMainDocument("endnotes"),footnotes:findPartRelatedToMainDocument("footnotes"),numbering:findPartRelatedToMainDocument("numbering"),styles:findPartRelatedToMainDocument("styles")}}))}))}function findPartPath(e){var t=e.docxFile,n=e.relationships,o=e.relationshipType,s=e.basePath,a=e.fallbackPath,i=n.findTargetsByType(o).map((function(e){return t=$n.joinPath(s,e),n="/",t.substring(0,n.length)===n?t.substring(n.length):t;var t,n})).filter((function(e){return t.exists(e)}));return 0===i.length?a:i[0]}function xmlFileReader(e){return function(t){return Ln(t,e.filename).then((function(t){return t?e.readElement(t):e.defaultValue}))}}function readXmlFileWithBody(e,t,n){return xmlFileReader({filename:relationshipsFilename(e),readElement:qn.readRelationships,defaultValue:qn.defaultValue})(t.docxFile).then((function(o){var s=new Fn({relationships:o,contentTypes:t.contentTypes,docxFile:t.docxFile,numbering:t.numbering,styles:t.styles,files:t.files});return Ln(t.docxFile,e).then((function(e){return n(s,e)}))}))}function relationshipsFilename(e){var t=$n.splitPath(e);return $n.joinPath(t.dirname,"_rels",t.basename+".rels")}var Vn=xmlFileReader({filename:"[Content_Types].xml",readElement:zn.readContentTypesFromXml,defaultValue:zn.defaultContentTypes});function readNumberingFromZipFile(e,t,n){return xmlFileReader({filename:t,readElement:function(e){return Un.readNumberingXml(e,{styles:n})},defaultValue:Un.defaultNumbering})(e)}function readStylesFromZipFile(e,t){return xmlFileReader({filename:t,readElement:Gn.readStylesXml,defaultValue:Gn.defaultStyles})(e)}var Yn=xmlFileReader({filename:"_rels/.rels",readElement:qn.readRelationships,defaultValue:qn.defaultValue}),Jn={},Qn=pt;Jn.convertElementToRawText=function convertElementToRawText$1(e){if("text"===e.type)return e.value;if(e.type===Qn.types.tab)return"\t";var t="paragraph"===e.type?"\n\n":"";return(e.children||[]).map(convertElementToRawText$1).join("")+t};var Zn={},er=_n,tr=dt,nr=bt;Zn.openZip=function(e){return e.path?rr(e.path).then(nr.openArrayBuffer):e.buffer?tr.resolve(nr.openArrayBuffer(e.buffer)):e.file?tr.resolve(e.file):tr.reject(new Error("Could not find file in options"))};var rr=tr.promisify(er.readFile);var or=ut,sr=Jn.convertElementToRawText,ar=Zn,extractRawText_1=function(e){return ar.openZip(e).then(or.read).then((function(e){return e.map(sr)}))};const ir=new p;var lr,cr,ur;!function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"}(lr||(lr={})),function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"}(cr||(cr={})),function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"}(ur||(ur={}));const dr=["user","model","function","system"];var fr,hr,pr,mr,gr,yr,wr,vr;!function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"}(fr||(fr={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(hr||(hr={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(pr||(pr={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"}(mr||(mr={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER"}(gr||(gr={})),function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"}(yr||(yr={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"}(wr||(wr={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(vr||(vr={}));class GoogleGenerativeAIError extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class GoogleGenerativeAIResponseError extends GoogleGenerativeAIError{constructor(e,t){super(e),this.response=t}}class GoogleGenerativeAIFetchError extends GoogleGenerativeAIError{constructor(e,t,n,o){super(e),this.status=t,this.statusText=n,this.errorDetails=o}}class GoogleGenerativeAIRequestInputError extends GoogleGenerativeAIError{}var br;!function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"}(br||(br={}));class RequestUrl{constructor(e,t,n,o,s){this.model=e,this.task=t,this.apiKey=n,this.stream=o,this.requestOptions=s}toString(){var e,t;const n=(null===(e=this.requestOptions)||void 0===e?void 0:e.apiVersion)||"v1beta";let o=`${(null===(t=this.requestOptions)||void 0===t?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com"}/${n}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}async function getHeaders(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",function(e){const t=[];return(null==e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("genai-js/0.21.0"),t.join(" ")}(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let o=null===(t=e.requestOptions)||void 0===t?void 0:t.customHeaders;if(o){if(!(o instanceof Headers))try{o=new Headers(o)}catch(e){throw new GoogleGenerativeAIRequestInputError(`unable to convert customHeaders value ${JSON.stringify(o)} to Headers: ${e.message}`)}for(const[e,t]of o.entries()){if("x-goog-api-key"===e)throw new GoogleGenerativeAIRequestInputError(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new GoogleGenerativeAIRequestInputError(`Header name ${e} can only be set using the apiClient field`);n.append(e,t)}}return n}async function makeModelRequest(e,t,n,o,s,a={},i=fetch){const{url:l,fetchOptions:c}=await async function(e,t,n,o,s,a){const i=new RequestUrl(e,t,n,o,a);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},buildFetchOptions(a)),{method:"POST",headers:await getHeaders(i),body:s})}}(e,t,n,o,s,a);return async function(e,t,n=fetch){let o;try{o=await n(e,t)}catch(t){!function(e,t){let n=e;e instanceof GoogleGenerativeAIFetchError||e instanceof GoogleGenerativeAIRequestInputError||(n=new GoogleGenerativeAIError(`Error fetching from ${t.toString()}: ${e.message}`),n.stack=e.stack);throw n}(t,e)}o.ok||await async function(e,t){let n,o="";try{const t=await e.json();o=t.error.message,t.error.details&&(o+=` ${JSON.stringify(t.error.details)}`,n=t.error.details)}catch(e){}throw new GoogleGenerativeAIFetchError(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${o}`,e.status,e.statusText,n)}(o,e);return o}(l,c,i)}function buildFetchOptions(e){const t={};if(void 0!==(null==e?void 0:e.signal)||(null==e?void 0:e.timeout)>=0){const n=new AbortController;(null==e?void 0:e.timeout)>=0&&setTimeout((()=>n.abort()),e.timeout),(null==e?void 0:e.signal)&&e.signal.addEventListener("abort",(()=>{n.abort()})),t.signal=n.signal}return t}function addHelpers(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(e.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(e)}`,e);return function(e){var t,n,o,s;const a=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const t of null===(s=null===(o=e.candidates)||void 0===o?void 0:o[0].content)||void 0===s?void 0:s.parts)t.text&&a.push(t.text),t.executableCode&&a.push("\n```"+t.executableCode.language+"\n"+t.executableCode.code+"\n```\n"),t.codeExecutionResult&&a.push("\n```\n"+t.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}(e)}if(e.promptFeedback)throw new GoogleGenerativeAIResponseError(`Text not available. ${formatBlockErrorMessage(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(e.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),getFunctionCalls(e)[0]}if(e.promptFeedback)throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(e.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(e)}`,e);return getFunctionCalls(e)}if(e.promptFeedback)throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(e)}`,e)},e}function getFunctionCalls(e){var t,n,o,s;const a=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const t of null===(s=null===(o=e.candidates)||void 0===o?void 0:o[0].content)||void 0===s?void 0:s.parts)t.functionCall&&a.push(t.functionCall);return a.length>0?a:void 0}const Er=[gr.RECITATION,gr.SAFETY,gr.LANGUAGE];function hadBadFinishReason(e){return!!e.finishReason&&Er.includes(e.finishReason)}function formatBlockErrorMessage(e){var t,n,o;let s="";if(e.candidates&&0!==e.candidates.length||!e.promptFeedback){if(null===(o=e.candidates)||void 0===o?void 0:o[0]){const t=e.candidates[0];hadBadFinishReason(t)&&(s+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(s+=`: ${t.finishMessage}`))}}else s+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(s+=` due to ${e.promptFeedback.blockReason}`),(null===(n=e.promptFeedback)||void 0===n?void 0:n.blockReasonMessage)&&(s+=`: ${e.promptFeedback.blockReasonMessage}`);return s}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,s=n.apply(e,t||[]),a=[];return o={},verb("next"),verb("throw"),verb("return"),o[Symbol.asyncIterator]=function(){return this},o;function verb(e){s[e]&&(o[e]=function(t){return new Promise((function(n,o){a.push([e,t,n,o])>1||resume(e,t)}))})}function resume(e,t){try{(n=s[e](t)).value instanceof __await?Promise.resolve(n.value.v).then(fulfill,reject):settle(a[0][2],n)}catch(e){settle(a[0][3],e)}var n}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){e(t),a.shift(),a.length&&resume(a[0][0],a[0][1])}}"function"==typeof SuppressedError&&SuppressedError;const _r=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function processStream(e){const t=function(e){const t=e.getReader(),n=new ReadableStream({start(e){let n="";return pump();function pump(){return t.read().then((({value:t,done:o})=>{if(o)return n.trim()?void e.error(new GoogleGenerativeAIError("Failed to parse stream")):void e.close();n+=t;let s,a=n.match(_r);for(;a;){try{s=JSON.parse(a[1])}catch(t){return void e.error(new GoogleGenerativeAIError(`Error parsing JSON response: "${a[1]}"`))}e.enqueue(s),n=n.substring(a[0].length),a=n.match(_r)}return pump()}))}}});return n}(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),[n,o]=t.tee();return{stream:generateResponseSequence(n),response:getResponsePromise(o)}}async function getResponsePromise(e){const t=[],n=e.getReader();for(;;){const{done:e,value:o}=await n.read();if(e)return addHelpers(aggregateResponses(t));t.push(o)}}function generateResponseSequence(e){return __asyncGenerator(this,arguments,(function*(){const t=e.getReader();for(;;){const{value:e,done:n}=yield __await(t.read());if(n)break;yield yield __await(addHelpers(e))}}))}function aggregateResponses(e){const t=e[e.length-1],n={promptFeedback:null==t?void 0:t.promptFeedback};for(const t of e){if(t.candidates)for(const e of t.candidates){const t=e.index;if(n.candidates||(n.candidates=[]),n.candidates[t]||(n.candidates[t]={index:e.index}),n.candidates[t].citationMetadata=e.citationMetadata,n.candidates[t].groundingMetadata=e.groundingMetadata,n.candidates[t].finishReason=e.finishReason,n.candidates[t].finishMessage=e.finishMessage,n.candidates[t].safetyRatings=e.safetyRatings,e.content&&e.content.parts){n.candidates[t].content||(n.candidates[t].content={role:e.content.role||"user",parts:[]});const o={};for(const s of e.content.parts)s.text&&(o.text=s.text),s.functionCall&&(o.functionCall=s.functionCall),s.executableCode&&(o.executableCode=s.executableCode),s.codeExecutionResult&&(o.codeExecutionResult=s.codeExecutionResult),0===Object.keys(o).length&&(o.text=""),n.candidates[t].content.parts.push(o)}}t.usageMetadata&&(n.usageMetadata=t.usageMetadata)}return n}async function generateContentStream(e,t,n,o){return processStream(await makeModelRequest(t,br.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),o))}async function generateContent(e,t,n,o){const s=await makeModelRequest(t,br.GENERATE_CONTENT,e,!1,JSON.stringify(n),o);return{response:addHelpers(await s.json())}}function formatSystemInstruction(e){if(null!=e)return"string"==typeof e?{role:"system",parts:[{text:e}]}:e.text?{role:"system",parts:[e]}:e.parts?e.role?e:{role:"system",parts:e.parts}:void 0}function formatNewContent(e){let t=[];if("string"==typeof e)t=[{text:e}];else for(const n of e)"string"==typeof n?t.push({text:n}):t.push(n);return function(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let o=!1,s=!1;for(const a of e)"functionResponse"in a?(n.parts.push(a),s=!0):(t.parts.push(a),o=!0);if(o&&s)throw new GoogleGenerativeAIError("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!o&&!s)throw new GoogleGenerativeAIError("No content is provided for sending chat message.");if(o)return t;return n}(t)}function formatGenerateContentInput(e){let t;if(e.contents)t=e;else{t={contents:[formatNewContent(e)]}}return e.systemInstruction&&(t.systemInstruction=formatSystemInstruction(e.systemInstruction)),t}const Rr=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Cr={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};const xr="SILENT_ERROR";class ChatSession{constructor(e,t,n,o={}){this.model=t,this.params=n,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null==n?void 0:n.history)&&(!function(e){let t=!1;for(const n of e){const{role:e,parts:o}=n;if(!t&&"user"!==e)throw new GoogleGenerativeAIError(`First content should be with role 'user', got ${e}`);if(!dr.includes(e))throw new GoogleGenerativeAIError(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(dr)}`);if(!Array.isArray(o))throw new GoogleGenerativeAIError("Content should have 'parts' property with an array of Parts");if(0===o.length)throw new GoogleGenerativeAIError("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const e of o)for(const t of Rr)t in e&&(s[t]+=1);const a=Cr[e];for(const t of Rr)if(!a.includes(t)&&s[t]>0)throw new GoogleGenerativeAIError(`Content with role '${e}' can't contain '${t}' part`);t=!0}}(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var n,o,s,a,i,l;await this._sendPromise;const c=formatNewContent(e),u={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(o=this.params)||void 0===o?void 0:o.generationConfig,tools:null===(s=this.params)||void 0===s?void 0:s.tools,toolConfig:null===(a=this.params)||void 0===a?void 0:a.toolConfig,systemInstruction:null===(i=this.params)||void 0===i?void 0:i.systemInstruction,cachedContent:null===(l=this.params)||void 0===l?void 0:l.cachedContent,contents:[...this._history,c]},d=Object.assign(Object.assign({},this._requestOptions),t);let f;return this._sendPromise=this._sendPromise.then((()=>generateContent(this._apiKey,this.model,u,d))).then((e=>{var t;if(e.response.candidates&&e.response.candidates.length>0){this._history.push(c);const n=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(n)}else{const t=formatBlockErrorMessage(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}f=e})),await this._sendPromise,f}async sendMessageStream(e,t={}){var n,o,s,a,i,l;await this._sendPromise;const c=formatNewContent(e),u={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(o=this.params)||void 0===o?void 0:o.generationConfig,tools:null===(s=this.params)||void 0===s?void 0:s.tools,toolConfig:null===(a=this.params)||void 0===a?void 0:a.toolConfig,systemInstruction:null===(i=this.params)||void 0===i?void 0:i.systemInstruction,cachedContent:null===(l=this.params)||void 0===l?void 0:l.cachedContent,contents:[...this._history,c]},d=Object.assign(Object.assign({},this._requestOptions),t),f=generateContentStream(this._apiKey,this.model,u,d);return this._sendPromise=this._sendPromise.then((()=>f)).catch((e=>{throw new Error(xr)})).then((e=>e.response)).then((e=>{if(e.candidates&&e.candidates.length>0){this._history.push(c);const t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{const t=formatBlockErrorMessage(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}})).catch((e=>{e.message!==xr&&console.error(e)})),f}}class GenerativeModel{constructor(e,t,n={}){this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=formatSystemInstruction(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var n;const o=formatGenerateContentInput(e),s=Object.assign(Object.assign({},this._requestOptions),t);return generateContent(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},o),s)}async generateContentStream(e,t={}){var n;const o=formatGenerateContentInput(e),s=Object.assign(Object.assign({},this._requestOptions),t);return generateContentStream(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},o),s)}startChat(e){var t;return new ChatSession(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const n=function(e,t){var n;let o={model:null==t?void 0:t.model,generationConfig:null==t?void 0:t.generationConfig,safetySettings:null==t?void 0:t.safetySettings,tools:null==t?void 0:t.tools,toolConfig:null==t?void 0:t.toolConfig,systemInstruction:null==t?void 0:t.systemInstruction,cachedContent:null===(n=null==t?void 0:t.cachedContent)||void 0===n?void 0:n.name,contents:[]};const s=null!=e.generateContentRequest;if(e.contents){if(s)throw new GoogleGenerativeAIRequestInputError("CountTokensRequest must have one of contents or generateContentRequest, not both.");o.contents=e.contents}else if(s)o=Object.assign(Object.assign({},o),e.generateContentRequest);else{const t=formatNewContent(e);o.contents=[t]}return{generateContentRequest:o}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,o){return(await makeModelRequest(t,br.COUNT_TOKENS,e,!1,JSON.stringify(n),o)).json()}(this.apiKey,this.model,n,o)}async embedContent(e,t={}){const n=function(e){if("string"==typeof e||Array.isArray(e))return{content:formatNewContent(e)};return e}(e),o=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,o){return(await makeModelRequest(t,br.EMBED_CONTENT,e,!1,JSON.stringify(n),o)).json()}(this.apiKey,this.model,n,o)}async batchEmbedContents(e,t={}){const n=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,o){const s=n.requests.map((e=>Object.assign(Object.assign({},e),{model:t})));return(await makeModelRequest(t,br.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:s}),o)).json()}(this.apiKey,this.model,e,n)}}class GoogleGenerativeAI{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new GoogleGenerativeAIError("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new GenerativeModel(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new GoogleGenerativeAIRequestInputError("Cached content must contain a `name` field.");if(!e.model)throw new GoogleGenerativeAIRequestInputError("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const n of o)if((null==t?void 0:t[n])&&e[n]&&(null==t?void 0:t[n])!==e[n]){if("model"===n){if((t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue}throw new GoogleGenerativeAIRequestInputError(`Different value for "${n}" specified in modelParams (${t[n]}) and cachedContent (${e[n]})`)}const s=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new GenerativeModel(this.apiKey,s,n)}}const Ir=new GoogleGenerativeAI(process.env.GEMINI_API_KEY||""),Sr=new Map;async function delay(e){return new Promise((t=>setTimeout(t,e)))}async function analyzeDocument(e,t){try{const n=`${e}-${t}`;if(Sr.has(n))return Sr.get(n);const o=await async function(e,t){try{const n=await fetch(e);if(!n.ok)throw new Error(`Error HTTP: ${n.status}`);const o=await n.arrayBuffer(),s=Buffer.from(o);return t.includes("pdf")?(await ir.extractBuffer(s)).pages.map((e=>e.content.map((e=>e.str)).join(" "))).join("\n"):t.includes("document")||t.includes("sheet")||t.includes("presentation")?(await extractRawText_1({buffer:s})).value:`Contenido no extraíble para el tipo: ${t}`}catch(e){return console.error("Error al extraer contenido:",e),`Error al procesar el documento: ${e instanceof Error?e.message:"Error desconocido"}`}}(e,t);let s,a;if(t.includes("image")){s=Ir.getGenerativeModel({model:"gemini-pro-vision"});a=["Analiza esta imagen y lista los 5 principales temas o conceptos.",{inlineData:{data:Buffer.from(await fetch(o).then((e=>e.arrayBuffer()))).toString("base64"),mimeType:t}}]}else s=Ir.getGenerativeModel({model:"gemini-pro"}),a=`Lista los 5 temas principales de este texto:\n\n${o}\n\nSolo la lista, sin texto adicional.`;return await async function(e,t,n,o=3,s=5e3){for(let a=0;a<o;a++)try{const o=await e.generateContent(t),s=await o.response,a=s.text().split("\n").filter((e=>""!==e.trim())).slice(0,5);return Sr.set(n,a),a}catch(e){if(429!==e.status)throw e;console.warn(`Límite de solicitudes alcanzado. Reintentando en ${s}ms... (Intento ${a+1}/${o})`),await delay(s),s*=2}throw new Error("Se alcanzó el máximo de reintentos debido a errores 429.")}(s,a,n)}catch(e){return console.error("Error al analizar:",e),[`Error: ${e instanceof Error?e.message:"Desconocido"}`]}}const Ar={},kr=defineCachedEventHandler((async e=>{const t=function(e,t={}){const n=function(e,t={}){if(t.xForwardedHost){const t=e.node.req.headers["x-forwarded-host"];if(t)return t}return e.node.req.headers.host||"localhost"}(e,t),o=function(e,t={}){return!1!==t.xForwardedProto&&"https"===e.node.req.headers["x-forwarded-proto"]||e.node.req.connection?.encrypted?"https":"http"}(e,t),s=(e.node.req.originalUrl||e.path).replace(/^[/\\]+/g,"/");return new URL(s,`${o}://${n}`)}(e);if(!t)return createError$1({status:400,message:"Invalid icon request"});const n=Ye.icon,o=e.context.params?.collection?.replace(/\.json$/,""),s=o?await(Ar[o]?.()):null,a=n.iconifyApiEndpoint||"https://api.iconify.design",i=t.searchParams.get("icons")?.split(",");if(s&&i?.length){const e=w(s,i);return qe.debug(`[Icon] serving ${(i||[]).map((e=>"`"+o+":"+e+"`")).join(",")} from bundled collection`),e}if(!0===n.fallbackToApi||"server-only"===n.fallbackToApi){const e=new URL("./"+basename(t.pathname)+t.search,a);if(qe.debug(`[Icon] fetching ${(i||[]).map((e=>"`"+o+":"+e+"`")).join(",")} from iconify api`),e.host!==new URL(a).host)return createError$1({status:400,message:"Invalid icon request"});try{return await $fetch(e.href)}catch(e){return qe.error(e),404===e.status?createError$1({status:404}):createError$1({status:500,message:"Failed to fetch fallback icon"})}}return createError$1({status:404})}),{group:"nuxt",name:"icon",getKey(e){const t=e.context.params?.collection?.replace(/\.json$/,"")||"unknown",n=String(getQuery(e).icons||"");return`${t}_${n.split(",")[0]}_${n.length}_${hash(n)}`},swr:!0,maxAge:604800}),_lazy_AzkN6F=()=>import("../routes/renderer.mjs"),Tr=[{route:"",handler:Le,lazy:!1,middleware:!0,method:void 0},{route:"/api/admin/:users",handler:()=>import("../routes/api/admin/_users_.delete.mjs"),lazy:!0,middleware:!1,method:"delete"},{route:"/api/admin/:users",handler:()=>import("../routes/api/admin/_users_.get.mjs"),lazy:!0,middleware:!1,method:"get"},{route:"/api/admin/:users",handler:()=>import("../routes/api/admin/_users_.post.mjs"),lazy:!0,middleware:!1,method:"post"},{route:"/api/admin/:users",handler:()=>import("../routes/api/admin/_users_.put.mjs"),lazy:!0,middleware:!1,method:"put"},{route:"/api/admin/asignaturas/:id",handler:()=>import("../routes/api/admin/asignaturas/_id_.delete.mjs"),lazy:!0,middleware:!1,method:"delete"},{route:"/api/admin/asignaturas",handler:()=>import("../routes/api/admin/index.get.mjs"),lazy:!0,middleware:!1,method:"get"},{route:"/api/admin/select/:users",handler:()=>import("../routes/api/admin/select/_users_.delete.mjs"),lazy:!0,middleware:!1,method:"delete"},{route:"/api/asignaturas/:asignaturaId/generate-link",handler:()=>import("../routes/api/asignaturas/_asignaturaId/generate-link.post.mjs"),lazy:!0,middleware:!1,method:"post"},{route:"/api/asignaturas/:id",handler:()=>import("../routes/api/asignaturas/_id_.delete.mjs"),lazy:!0,middleware:!1,method:"delete"},{route:"/api/asignaturas/:id",handler:()=>import("../routes/api/asignaturas/_id_.get.mjs"),lazy:!0,middleware:!1,method:"get"},{route:"/api/asignaturas/create",handler:()=>import("../routes/api/asignaturas/create.post.mjs"),lazy:!0,middleware:!1,method:"post"},{route:"/api/asignaturas/delete",handler:()=>import("../routes/api/asignaturas/delete.delete.mjs"),lazy:!0,middleware:!1,method:"delete"},{route:"/api/asignaturas/generate-link",handler:()=>import("../routes/api/asignaturas/generate-link.post.mjs"),lazy:!0,middleware:!1,method:"post"},{route:"/api/asignaturas",handler:()=>import("../routes/api/index.get.mjs"),lazy:!0,middleware:!1,method:"get"},{route:"/api/auth/login",handler:()=>import("../routes/api/auth/login.post.mjs"),lazy:!0,middleware:!1,method:"post"},{route:"/api/auth/register",handler:()=>import("../routes/api/auth/register.post.mjs"),lazy:!0,middleware:!1,method:"post"},{route:"/api/docente/eventos/:id",handler:()=>import("../routes/api/docente/eventos/_id_.delete.mjs"),lazy:!0,middleware:!1,method:"delete"},{route:"/api/docente/eventos",handler:()=>import("../routes/api/docente/index.get.mjs"),lazy:!0,middleware:!1,method:"get"},{route:"/api/docente/eventos",handler:()=>import("../routes/api/docente/index.post.mjs"),lazy:!0,middleware:!1,method:"post"},{route:"/api/estudiantes/register",handler:()=>import("../routes/api/estudiantes/register.post.mjs"),lazy:!0,middleware:!1,method:"post"},{route:"/api/files/upload",handler:()=>import("../routes/api/files/upload.post.mjs"),lazy:!0,middleware:!1,method:"post"},{route:"/api/gemini",handler:()=>import("../routes/api/gemini.mjs"),lazy:!0,middleware:!1,method:void 0},{route:"/api/materials/:id",handler:()=>import("../routes/api/materials/_id_.delete.mjs"),lazy:!0,middleware:!1,method:"delete"},{route:"/api/materials/:id",handler:()=>import("../routes/api/materials/_id_.get.mjs"),lazy:!0,middleware:!1,method:"get"},{route:"/api/news",handler:()=>import("../routes/api/news.mjs"),lazy:!0,middleware:!1,method:void 0},{route:"/api/stats/asignaturas/active-inactive",handler:()=>import("../routes/api/stats/asignaturas/active-inactive.get.mjs"),lazy:!0,middleware:!1,method:"get"},{route:"/api/stats/materials/average",handler:()=>import("../routes/api/stats/materials/average.get.mjs"),lazy:!0,middleware:!1,method:"get"},{route:"/api/stats/students/average",handler:()=>import("../routes/api/stats/students/average.get.mjs"),lazy:!0,middleware:!1,method:"get"},{route:"/api/stats/students/count",handler:()=>import("../routes/api/stats/students/count.get.mjs"),lazy:!0,middleware:!1,method:"get"},{route:"/api/stats/subjects/count",handler:()=>import("../routes/api/stats/subjects/count.get.mjs"),lazy:!0,middleware:!1,method:"get"},{route:"/api/students/activities",handler:()=>import("../routes/api/students/activities.get.mjs"),lazy:!0,middleware:!1,method:"get"},{route:"/api/students/calendar",handler:()=>import("../routes/api/students/calendar.get.mjs"),lazy:!0,middleware:!1,method:"get"},{route:"/api/students/chat",handler:()=>import("../routes/api/students/chat.post.mjs"),lazy:!0,middleware:!1,method:"post"},{route:"/api/students/materials",handler:()=>import("../routes/api/students/materials.get.mjs"),lazy:!0,middleware:!1,method:"get"},{route:"/__nuxt_error",handler:_lazy_AzkN6F,lazy:!0,middleware:!1,method:void 0},{route:"/api/_nuxt_icon/:collection",handler:kr,lazy:!1,middleware:!1,method:void 0},{route:"/**",handler:_lazy_AzkN6F,lazy:!0,middleware:!1,method:void 0}];const Nr=function(){const e=useRuntimeConfig(),t=createHooks(),captureError=(e,n={})=>{const o=t.callHookParallel("error",e,n).catch((e=>{console.error("Error while capturing another error",e)}));if(n.event&&isEvent(n.event)){const t=n.event.context.nitro?.errors;t&&t.push({error:e,context:n}),n.event.waitUntil&&n.event.waitUntil(o)}},n=createApp({debug:destr(!1),onError:(e,t)=>(captureError(e,{event:t,tags:["request"]}),errorHandler(e,t)),onRequest:async e=>{await Nr.hooks.callHook("request",e).catch((t=>{captureError(t,{event:e,tags:["request"]})}))},onBeforeResponse:async(e,t)=>{await Nr.hooks.callHook("beforeResponse",e,t).catch((t=>{captureError(t,{event:e,tags:["request","response"]})}))},onAfterResponse:async(e,t)=>{await Nr.hooks.callHook("afterResponse",e,t).catch((t=>{captureError(t,{event:e,tags:["request","response"]})}))}}),o=function(e={}){const t=createRouter$1({}),n={};let o;const s={},addRoute=(e,o,a)=>{let i=n[e];if(i||(n[e]=i={path:e,handlers:{}},t.insert(e,i)),Array.isArray(a))for(const t of a)addRoute(e,o,t);else i.handlers[a]=toEventHandler(o,0,e);return s};s.use=s.add=(e,t,n)=>addRoute(e,t,n||"all");for(const e of pe)s[e]=(t,n)=>s.add(t,n,e);const matchHandler=(e="/",n="get")=>{const s=e.indexOf("?");-1!==s&&(e=e.slice(0,Math.max(0,s)));const a=t.lookup(e);if(!a||!a.handlers)return{error:createError$1({statusCode:404,name:"Not Found",statusMessage:`Cannot find any route matching ${e||"/"}.`})};let i=a.handlers[n]||a.handlers.all;if(!i){o||(o=toRouteMatcher(t));const s=o.matchAll(e).reverse();for(const e of s){if(e.handlers[n]){i=e.handlers[n],a.handlers[n]=a.handlers[n]||i;break}if(e.handlers.all){i=e.handlers.all,a.handlers.all=a.handlers.all||i;break}}}return i?{matched:a,handler:i}:{error:createError$1({statusCode:405,name:"Method Not Allowed",statusMessage:`Method ${n} is not allowed on this route.`})}},a=e.preemptive||e.preemtive;return s.handler=he((e=>{const t=matchHandler(e.path,e.method.toLowerCase());if("error"in t){if(a)throw t.error;return}e.context.matchedRoute=t.matched;const n=t.matched.params||{};return e.context.params=n,Promise.resolve(t.handler(e)).then((e=>void 0===e&&a?null:e))})),s.handler.__resolve__=async e=>{e=function(e=""){return function(e=""){return e.startsWith("/")}(e)?e:"/"+e}(e);const t=matchHandler(e);if("error"in t)return;let n={route:t.matched.path,handler:t.handler};if(t.handler.__resolve__){const o=await t.handler.__resolve__(e);if(!o)return;n={...n,...o}}return n},s}({preemptive:!0}),s=(a=toNodeListener(n),function(e){const t=new IncomingMessage,n=new ServerResponse(t);if(t.url=e.url||"/",t.method=e.method||"GET",t.headers={},e.headers){const n="function"==typeof e.headers.entries?e.headers.entries():Object.entries(e.headers);for(const[e,o]of n)o&&(t.headers[e.toLowerCase()]=o)}return t.headers.host=t.headers.host||e.host||"localhost",t.connection.encrypted=t.connection.encrypted||"https"===e.protocol,t.body=e.body||null,t.__unenv__=e.context,a(t,n).then((()=>{let e=n._data;(Be.has(n.statusCode)||"HEAD"===t.method.toUpperCase())&&(e=null,delete n._headers["content-length"]);const o={body:e,headers:n._headers,status:n.statusCode,statusText:n.statusMessage};return t.destroy(),n.destroy(),o}))});var a;const i=function(e,t=global.fetch){return async function(n,o){const s=n.toString();if(!s.startsWith("/"))return t(s,o);try{const t=await e({url:s,...o});return new Response(t.body,{status:t.status,statusText:t.statusText,headers:Object.fromEntries(Object.entries(t.headers).map((([e,t])=>[e,Array.isArray(t)?t.join(","):String(t)||""])))})}catch(e){return new Response(e.toString(),{status:Number.parseInt(e.statusCode||e.code)||500,statusText:e.statusText})}}}(s,globalThis.fetch),localFetch=(e,t)=>i(e,t).then((e=>function(e){return e.headers.has("set-cookie")?new Response(e.body,{status:e.status,statusText:e.statusText,headers:normalizeCookieHeaders(e.headers)}):e}(e))),l=createFetch$1({fetch:localFetch,Headers:Ie,defaults:{baseURL:e.app.baseURL}});globalThis.$fetch=l,n.use(createRouteRulesHandler({localFetch:localFetch})),n.use(he((e=>{e.context.nitro=e.context.nitro||{errors:[]};const t=e.node.req?.__unenv__;t&&Object.assign(e.context,t),e.fetch=(t,n)=>fetchWithEvent(e,t,n,{fetch:localFetch}),e.$fetch=(t,n)=>fetchWithEvent(e,t,n,{fetch:l}),e.waitUntil=n=>{e.context.nitro._waitUntilPromises||(e.context.nitro._waitUntilPromises=[]),e.context.nitro._waitUntilPromises.push(n),t?.waitUntil&&t.waitUntil(n)},e.captureError=(t,n)=>{captureError(t,{event:e,...n})}})));for(const t of Tr){let s=t.lazy?lazyEventHandler(t.handler):t.handler;if(t.middleware||!t.route){const o=(e.app.baseURL+(t.route||"/")).replace(/\/+/g,"/");n.use(o,s)}else{const e=getRouteRulesForPath(t.route.replace(/:\w+|\*\*/g,"_"));e.cache&&(s=nt(s,{group:"nitro/routes",...e.cache})),o.use(t.route,s,t.method)}}return n.use(e.app.baseURL,o.handler),{hooks:t,h3App:n,router:o,localCall:s,localFetch:localFetch,captureError:captureError}}();function useNitroApp(){return Nr}!function(e){for(const t of $e)try{t(e)}catch(t){throw e.captureError(t,{tags:["plugin"]}),t}}(Nr);const Or=toNodeListener(useNitroApp().h3App),listener=function(e,t){const n=e.headers["x-now-route-matches"];if(n){const{url:t}=parseQuery(n);t&&(e.url=t)}return Or(e,t)};export{Ae as $,withQuery as A,sanitizeStatusCode as B,getContext as C,withTrailingSlash as D,withoutTrailingSlash as E,baseURL as F,GoogleGenerativeAI as G,createHooks as H,toRouteMatcher as I,createRouter$1 as J,upperFirst as K,isEqual as L,diff as M,listener as N,getRouterParam as a,re as b,createError$1 as c,defineEventHandler as d,getRequestHeader as e,getRequestHeaders as f,getQuery as g,analyzeDocument as h,defineRenderHandler as i,buildAssetsURL as j,getRouteRules as k,useNitroApp as l,getResponseStatusText as m,getResponseStatus as n,destr as o,publicAssetsURL as p,ne as q,readBody as r,parseQuery as s,klona as t,useRuntimeConfig as u,te as v,createDefu as w,hasProtocol as x,isScriptProtocol as y,joinURL as z};
//# sourceMappingURL=nitro.mjs.map
