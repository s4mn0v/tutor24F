import e from"./C9-cjxml.js";import{_ as a}from"./Ct_72RIb.js";import{_ as l,f as n,c as i,o as t,w as o,i as u,h as s,k as r,b as d,Q as p,l as c,P as g,C as v,F as m,m as b,T as y,S as f,U as M,B as h,a3 as j,r as I,Y as C,Z as A,W as S,ah as O,a7 as k,j as q,a8 as x,E as w,t as z,e as B,X as V}from"./hFqZFfy7.js";import{i as H,r as $,u as N,n as _,l as U}from"./AhfmuM8Y.js";import{s as W}from"./BvCfb3ib.js";import{f as E}from"./C60RTlwW.js";import{i as F}from"./Bfxjojwb.js";import{u as L,i as Q,a as T}from"./DHMDb2DJ.js";import{u as R}from"./BYz7Z2fJ.js";import{u as P}from"./D9V1fidf.js";import{a as X}from"./DmDc0Qph.js";import"./CCWsANb-.js";import"./CkVD2Uqn.js";import".prisma/client/index-browser";import"./Ci49Vam9.js";import"./chI-DJON.js";import"./Yfl05yA4.js";import"./D7unn5Ia.js";import"./DbuPMTfp.js";import"./BUyXXaLr.js";import"./DSu5y-vr.js";import"./BE7Nko66.js";import"./DNRP4idu.js";const Y=f(S.ui.strategy,S.ui.input,Q),Z=f(S.ui.strategy,S.ui.inputMenu,T),D=n({components:{HCombobox:U,HComboboxButton:_,HComboboxOptions:N,HComboboxOption:$,HComboboxInput:H,UIcon:e,UAvatar:a},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:""},query:{type:String,default:null},by:{type:String,default:void 0},options:{type:Array,default:()=>[]},id:{type:String,default:null},name:{type:String,default:null},required:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>Y.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>Z.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedIcon:{type:String,default:()=>Z.default.selectedIcon},disabled:{type:Boolean,default:!1},nullable:{type:Boolean,default:!1},placeholder:{type:String,default:null},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator:e=>Object.keys(Y.size).includes(e)},color:{type:String,default:()=>Y.default.color,validator:e=>[...S.ui.colors,...Object.keys(Y.color)].includes(e)},variant:{type:String,default:()=>Y.default.variant,validator:e=>[...Object.keys(Y.variant),...Object.values(Y.color).flatMap((e=>Object.keys(e)))].includes(e)},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:null},search:{type:Function,default:void 0},searchAttributes:{type:Array,default:null},searchLazy:{type:Boolean,default:!1},debounce:{type:Number,default:200},popper:{type:Object,default:()=>({})},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},uiMenu:{type:Object,default:()=>({})}},emits:["update:modelValue","update:query","open","close","change"],setup(e,{emit:a,slots:l}){const{ui:n,attrs:i}=L("input",M(e,"ui"),Y,M(e,"class")),{ui:t}=L("inputMenu",M(e,"uiMenu"),Z),o=h((()=>j({},e.popper,t.value.popper))),[u,s]=R(o.value),{size:r,rounded:d}=X({ui:n,props:e}),{emitFormBlur:p,emitFormChange:c,inputId:g,color:v,size:m,name:b}=P(e,Y),y=h((()=>r.value??m.value)),f=h((()=>{if(!e.by)return;if("function"==typeof e.by)return e.by;const a=e.by;return a.indexOf(".")>0?(e,l)=>ae(e,a)===ae(l,a):a})),w=I(""),z=h({get:()=>e.query??w.value,set(e){w.value=e,a("update:query",e)}}),B=h((()=>{if(!e.modelValue)return null;if(e.valueAttribute){const a=K.value.find((a=>{const l=(n=a,e.valueAttribute?ae(n,e.valueAttribute):n);var n,i,t;return i=l,t=e.modelValue,f.value&&"function"!=typeof f.value&&"object"==typeof i&&"object"==typeof t?F(i[e.by],t[e.by]):F(i,t)}));return a?ae(a,e.optionAttribute):null}return["string","number"].includes(typeof e.modelValue)?e.modelValue:ae(e.modelValue,e.optionAttribute)})),H=h((()=>{var a,i;const t=(null==(i=null==(a=n.value.color)?void 0:a[v.value])?void 0:i[e.variant])||n.value.variant[e.variant];return C(A(n.value.base,n.value.form,d.value,n.value.placeholder,n.value.size[y.value],e.padded?n.value.padding[y.value]:"p-0",null==t?void 0:t.replaceAll("{color}",v.value),($.value||l.leading)&&n.value.leading.padding[y.value],(N.value||l.trailing)&&n.value.trailing.padding[y.value]),e.inputClass)})),$=h((()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon)),N=h((()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon)),_=h((()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon)),U=h((()=>e.loading&&!$.value?e.loadingIcon:e.trailingIcon||e.icon)),Q=h((()=>A(n.value.icon.leading.wrapper,n.value.icon.leading.pointer,n.value.icon.leading.padding[y.value]))),T=h((()=>A(n.value.icon.base,v.value&&S.ui.colors.includes(v.value)&&n.value.icon.color.replaceAll("{color}",v.value),n.value.icon.size[y.value],e.loading&&n.value.icon.loading))),D=h((()=>A(n.value.icon.trailing.wrapper,n.value.icon.trailing.padding[y.value]))),G=h((()=>A(n.value.icon.base,v.value&&S.ui.colors.includes(v.value)&&n.value.icon.color.replaceAll("{color}",v.value),n.value.icon.size[y.value],e.loading&&!$.value&&n.value.icon.loading))),J=e.search&&"function"==typeof e.search?O(e.search,e.debounce):void 0,K=E((async()=>J?await J(z.value):e.options||[]),[],{lazy:e.searchLazy});const ee=h((()=>{if(!z.value||J)return K.value;const a=z.value.replace(/[.*+?^${}()|[\]\\]/g,(e=>`\\${e}`));return K.value.filter((l=>{var n;return((null==(n=e.searchAttributes)?void 0:n.length)?e.searchAttributes:[e.optionAttribute]).some((e=>{if(["string","number"].includes(typeof l))return-1!==String(l).search(new RegExp(a,"i"));const n=k(l,e);return null!=n&&-1!==String(n).search(new RegExp(a,"i"))}))}))}));function ae(e,a){return k(e,a)}return q(s,(e=>{e?a("open"):(a("close"),p())})),W((()=>V())),{ui:n,uiMenu:t,attrs:i,name:b,inputId:g,popper:o,trigger:u,container:s,label:B,isLeading:$,isTrailing:N,inputClass:H,leadingIconName:_,leadingIconClass:T,leadingWrapperIconClass:Q,trailingIconName:U,trailingIconClass:G,trailingWrapperIconClass:D,filteredOptions:ee,query:z,accessor:ae,onUpdate:function(l){z.value="",x(e.modelValue)!==x(l)&&(a("update:modelValue",l),a("change",l),c())},onQueryChange:function(e){z.value=e.target.value},by:f}}}),G={class:"truncate"};const J=l(D,[["render",function(l,n,f,M,h,j){const I=c("HComboboxInput"),C=e,A=c("HComboboxButton"),S=a,O=c("HComboboxOption"),k=c("HComboboxOptions"),q=c("HCombobox");return t(),i(q,{by:l.by,name:l.name,"model-value":l.modelValue,disabled:l.disabled,nullable:l.nullable,as:"div",class:v(l.ui.wrapper),"onUpdate:modelValue":l.onUpdate},{default:o((({open:e})=>[u("div",{class:v(l.uiMenu.trigger)},[d(I,p({id:l.inputId,name:l.name,required:l.required,placeholder:l.placeholder,disabled:l.disabled,class:l.inputClass,autocomplete:"off"},l.attrs,{"display-value":()=>l.query?l.query:l.label,onChange:l.onQueryChange}),null,16,["id","name","required","placeholder","disabled","class","display-value","onChange"]),l.isLeading&&l.leadingIconName||l.$slots.leading?(t(),s("span",{key:0,class:v(l.leadingWrapperIconClass)},[g(l.$slots,"leading",{disabled:l.disabled,loading:l.loading},(()=>[d(C,{name:l.leadingIconName,class:v(l.leadingIconClass)},null,8,["name","class"])]))],2)):r("",!0),l.isTrailing&&l.trailingIconName||l.$slots.trailing?(t(),i(A,{key:1,ref:"trigger",class:v(l.trailingWrapperIconClass)},{default:o((()=>[g(l.$slots,"trailing",{disabled:l.disabled,loading:l.loading},(()=>[d(C,{name:l.trailingIconName,class:v(l.trailingIconClass)},null,8,["name","class"])]))])),_:3},8,["class"])):r("",!0)],2),e?(t(),s("div",{key:0,ref:"container",class:v([l.uiMenu.container,l.uiMenu.width])},[d(y,p({appear:""},l.uiMenu.transition),{default:o((()=>[u("div",null,[l.popper.arrow?(t(),s("div",{key:0,"data-popper-arrow":"",class:v(Object.values(l.uiMenu.arrow))},null,2)):r("",!0),d(k,{static:"",class:v([l.uiMenu.base,l.uiMenu.ring,l.uiMenu.rounded,l.uiMenu.shadow,l.uiMenu.background,l.uiMenu.padding,l.uiMenu.height])},{default:o((()=>[(t(!0),s(m,null,b(l.filteredOptions,((e,a)=>(t(),i(O,{key:a,as:"template",value:l.valueAttribute?l.accessor(e,l.valueAttribute):e,disabled:e.disabled},{default:o((({active:a,selected:n,disabled:o})=>[u("li",{class:v([l.uiMenu.option.base,l.uiMenu.option.rounded,l.uiMenu.option.padding,l.uiMenu.option.size,l.uiMenu.option.color,a?l.uiMenu.option.active:l.uiMenu.option.inactive,n&&l.uiMenu.option.selected,o&&l.uiMenu.option.disabled])},[u("div",{class:v(l.uiMenu.option.container)},[g(l.$slots,"option",{option:e,active:a,selected:n},(()=>[e.icon?(t(),i(C,{key:0,name:e.icon,class:v([l.uiMenu.option.icon.base,a?l.uiMenu.option.icon.active:l.uiMenu.option.icon.inactive,e.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):e.avatar?(t(),i(S,p({key:1,ref_for:!0},{size:l.uiMenu.option.avatar.size,...e.avatar},{class:l.uiMenu.option.avatar.base,"aria-hidden":"true"}),null,16,["class"])):e.chip?(t(),s("span",{key:2,class:v(l.uiMenu.option.chip.base),style:w({background:`#${e.chip}`})},null,6)):r("",!0),u("span",G,z(["string","number"].includes(typeof e)?e:l.accessor(e,l.optionAttribute)),1)]))],2),n?(t(),s("span",{key:0,class:v([l.uiMenu.option.selectedIcon.wrapper,l.uiMenu.option.selectedIcon.padding])},[d(C,{name:l.selectedIcon,class:v(l.uiMenu.option.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])],2)):r("",!0)],2)])),_:2},1032,["value","disabled"])))),128)),l.query&&!l.filteredOptions.length?(t(),s("p",{key:0,class:v(l.uiMenu.option.empty)},[g(l.$slots,"option-empty",{query:l.query},(()=>[B(z(l.uiMenu.default.optionEmpty.label.replace("{query}",l.query)),1)]))],2)):l.filteredOptions.length?r("",!0):(t(),s("p",{key:1,class:v(l.uiMenu.empty)},[g(l.$slots,"empty",{query:l.query},(()=>[B(z(l.uiMenu.default.empty.label),1)]))],2))])),_:3},8,["class"])])])),_:3},16)],2)):r("",!0)])),_:3},8,["by","name","model-value","disabled","nullable","class","onUpdate:modelValue"])}]]);export{J as default};
