import{_ as e,a}from"./BAH7dDJZ.js";import r from"./CCWsANb-.js";import{u as o,x as t,r as l,g as n,h as s,o as d,i,b as u,t as c,y as p,k as g,n as m,v,z as y,A as b}from"./hFqZFfy7.js";import{u as f}from"./DxHkahMw.js";import"./BN2OBxPi.js";import"./C9-cjxml.js";import"./BdaDRl_o.js";import"./Bfxjojwb.js";import"./Ch5OrHHS.js";import"./DHMDb2DJ.js";import"./DmDc0Qph.js";import"./CHOj1P8S.js";import"./CkVD2Uqn.js";import".prisma/client/index-browser";const x={class:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900"},h={class:"max-w-md w-full space-y-8 bg-white dark:bg-gray-800 p-8 rounded-xl shadow-md"},k={class:"flex justify-end"},w={class:"text-center text-3xl font-extrabold text-gray-900 dark:text-white"},j={class:"rounded-md shadow-sm -space-y-px"},C={key:0},I={key:1},z={key:2},U={key:3},D={class:"relative"},N=["type"],R={key:0,class:"text-red-500 text-sm text-center"},V={key:1,class:"text-green-500 text-sm text-center"},q={type:"submit",class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800"},T={class:"text-center"},A={__name:"login",setup(A){const E=o(),L=t(),{login:_,register:O,isAuthenticated:P,getUserRole:$}=f(),M=l(""),S=l(""),Y=l("DOCENTE"),B=l(""),F=l(""),G=l(""),H=l(!1),J=l("true"===E.query.register),K=l(""),Q=l("");n((()=>{if(P()){const e=$();e&&L.push(`/${e.toLowerCase()}`)}}));const W=async()=>{K.value="",Q.value="";try{if(J.value)await O(M.value,S.value,Y.value,B.value,F.value,G.value),Q.value="¡Registro exitoso! Por favor, inicia sesión.",J.value=!1,M.value="",S.value="",B.value="",F.value="",G.value="";else{await _(M.value,S.value);const e=$();e?L.push(`/${e.toLowerCase()}`):L.push("/")}}catch(e){K.value=e.message||"La autenticación falló. Por favor, verifica tus credenciales."}},X=()=>{J.value=!J.value,K.value="",Q.value=""};return(o,t)=>{const l=e,n=a,f=r;return d(),s("div",x,[i("div",h,[i("div",k,[u(l),u(n)]),i("h2",w,c(J.value?"Registrarse":"Ingresar a Tutor IUDC"),1),i("form",{class:"mt-8 space-y-6",onSubmit:p(W,["prevent"])},[t[14]||(t[14]=i("input",{type:"hidden",name:"remember",value:"true"},null,-1)),i("div",j,[i("div",null,[t[7]||(t[7]=i("label",{for:"email-address",class:"sr-only"},"Correo electrónico",-1)),m(i("input",{id:"email-address",name:"email",type:"email",autocomplete:"email",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm bg-white dark:bg-zinc-700",placeholder:"Correo electrónico","onUpdate:modelValue":t[0]||(t[0]=e=>M.value=e)},null,512),[[v,M.value]])]),J.value?(d(),s("div",C,[t[8]||(t[8]=i("label",{for:"documentoIdentidad",class:"sr-only"},"Documento de Identidad",-1)),m(i("input",{id:"documentoIdentidad",name:"documentoIdentidad",type:"text",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white dark:bg-zinc-700",placeholder:"Documento de Identidad","onUpdate:modelValue":t[1]||(t[1]=e=>B.value=e)},null,512),[[v,B.value]])])):g("",!0),J.value?(d(),s("div",I,[t[9]||(t[9]=i("label",{for:"nombre",class:"sr-only"},"Nombre",-1)),m(i("input",{id:"nombre",name:"nombre",type:"text",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white dark:bg-zinc-700",placeholder:"Nombre","onUpdate:modelValue":t[2]||(t[2]=e=>F.value=e)},null,512),[[v,F.value]])])):g("",!0),J.value?(d(),s("div",z,[t[10]||(t[10]=i("label",{for:"telefono",class:"sr-only"},"Teléfono",-1)),m(i("input",{id:"telefono",name:"telefono",type:"tel",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white dark:bg-zinc-700",placeholder:"Teléfono (opcional)","onUpdate:modelValue":t[3]||(t[3]=e=>G.value=e)},null,512),[[v,G.value]])])):g("",!0),J.value?(d(),s("div",U,[t[12]||(t[12]=i("label",{for:"role",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Rol",-1)),m(i("select",{id:"role",name:"role",class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md bg-white dark:bg-zinc-700 text-gray-900 dark:text-white","onUpdate:modelValue":t[4]||(t[4]=e=>Y.value=e)},t[11]||(t[11]=[i("option",{value:"ADMIN"},"Administrador",-1),i("option",{value:"DOCENTE"},"Docente",-1)]),512),[[y,Y.value]])])):g("",!0),i("div",D,[t[13]||(t[13]=i("label",{for:"password",class:"sr-only"},"Contraseña",-1)),m(i("input",{type:H.value?"text":"password",id:"password",name:"password",autocomplete:"current-password",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm bg-white dark:bg-zinc-700",placeholder:"Contraseña","onUpdate:modelValue":t[5]||(t[5]=e=>S.value=e)},null,8,N),[[b,S.value]]),i("button",{type:"button",class:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5",onClick:t[6]||(t[6]=e=>H.value=!H.value)},[u(f,{name:H.value?"heroicons:eye-slash":"i-heroicons-eye",class:"h-5 w-5 text-black dark:text-white"},null,8,["name"])])])]),K.value?(d(),s("div",R,c(K.value),1)):g("",!0),Q.value?(d(),s("div",V,c(Q.value),1)):g("",!0),i("div",null,[i("button",q,c(J.value?"Registrarse":"Iniciar sesión"),1)])],32),i("div",T,[i("a",{href:"#",class:"font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300",onClick:p(X,["prevent"])},c(J.value?"¿Ya tienes cuenta? Inicia sesión":"¿Necesitas una cuenta? Regístrate"),1)])])])}}};export{A as default};
