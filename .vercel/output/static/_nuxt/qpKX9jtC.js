import e from"./BJht0Fqd.js";import t from"./MFsz-r7O.js";import a from"./BQWut4pg.js";import o from"./BEP5_JP-.js";import{_ as n,f as l,h as s,o as r,i,P as u,k as c,C as d,F as p,m,b as y,Q as g,c as f,y as x,S as b,U as v,B as h,a3 as k,r as S,a7 as w,j as C,a8 as j,W as A,t as B,e as O}from"./y4QvXspP.js";import{c as $}from"./BmYt0hqU.js";import{i as R}from"./Bfxjojwb.js";import{u as V}from"./BsUv8T9A.js";import"./N1GbHz2C.js";import"./D0xtSe3C.js";import"./Ch5OrHHS.js";import"./CcWMAPI5.js";import"./CHOj1P8S.js";import"./D5749dPv.js";import"./CGY6ERjo.js";import".prisma/client/index-browser";const E=b(A.ui.strategy,A.ui.table,{wrapper:"relative overflow-x-auto",base:"min-w-full table-fixed",divide:"divide-y divide-gray-300 dark:divide-gray-700",thead:"relative",tbody:"divide-y divide-gray-200 dark:divide-gray-800",caption:"sr-only",tr:{base:"",selected:"bg-gray-50 dark:bg-gray-800/50",expanded:"bg-gray-50 dark:bg-gray-800/50",active:"hover:bg-gray-50 dark:hover:bg-gray-800/50 cursor-pointer"},th:{base:"text-left rtl:text-right",padding:"px-4 py-3.5",color:"text-gray-900 dark:text-white",font:"font-semibold",size:"text-sm"},td:{base:"whitespace-nowrap",padding:"px-4 py-4",color:"text-gray-500 dark:text-gray-400",font:"",size:"text-sm"},checkbox:{padding:"ps-4"},loadingState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4 animate-spin"},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4"},expand:{icon:"transform transition-transform duration-200"},progress:{wrapper:"absolute inset-x-0 -bottom-[0.5px] p-0"},default:{sortAscIcon:"i-heroicons-bars-arrow-up-20-solid",sortDescIcon:"i-heroicons-bars-arrow-down-20-solid",sortButton:{icon:"i-heroicons-arrows-up-down-20-solid",trailing:!0,square:!0,color:"gray",variant:"ghost",class:"-m-1.5"},expandButton:{icon:"i-heroicons-chevron-down",color:"gray",variant:"ghost",size:"xs",class:"-my-1.5 align-middle"},checkbox:{color:"primary"},progress:{color:"primary",animation:"carousel"},loadingState:{icon:"i-heroicons-arrow-path-20-solid",label:"Loading..."},emptyState:{icon:"i-heroicons-circle-stack-20-solid",label:"No items."}}});function D(e,t){return R(e,t)}function I(e,t,a){return e===t?0:"asc"===a?e<t?-1:1:e>t?-1:1}function z(e){return new Set(e.map((e=>JSON.stringify(e))))}const U=l({components:{UIcon:o,UButton:t,UProgress:a,UCheckbox:e},inheritAttrs:!1,props:{modelValue:{type:Array,default:null},by:{type:[String,Function],default:()=>D},rows:{type:Array,default:()=>[]},columns:{type:Array,default:null},columnAttribute:{type:String,default:"label"},sort:{type:Object,default:()=>({})},sortMode:{type:String,default:"auto"},sortButton:{type:Object,default:()=>E.default.sortButton},sortAscIcon:{type:String,default:()=>E.default.sortAscIcon},sortDescIcon:{type:String,default:()=>E.default.sortDescIcon},expandButton:{type:Object,default:()=>E.default.expandButton},expand:{type:Object,default:()=>null},loading:{type:Boolean,default:!1},loadingState:{type:Object,default:()=>E.default.loadingState},emptyState:{type:Object,default:()=>E.default.emptyState},caption:{type:String,default:null},progress:{type:Object,default:()=>E.default.progress},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},multipleExpand:{type:Boolean,default:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue","update:sort","update:expand","select:all"],setup(e,{emit:t,attrs:a}){const{ui:o,attrs:n}=V("table",v(e,"ui"),E,v(e,"class")),l=h((()=>{const t=e.columns??Object.keys(e.rows[0]).map((e=>{return{key:e,label:(t=e,t?t[0].toUpperCase()+t.slice(1):""),sortable:!1,class:void 0,sort:I};var t}));return t.find((e=>"select"===e.key))||!e.modelValue?t:[{key:"select",sortable:!1,class:void 0,sort:I},...t]})),s=$(e,"sort",t,{passive:!0,defaultValue:k({},e.sort,{column:null,direction:"asc"})}),r=$(e,"expand",t,{passive:!0,defaultValue:k({},e.expand,{openedRows:[],row:null})}),i=S(null),u={column:s.value.column,direction:null},c=h((()=>{var t;if(!(null==(t=s.value)?void 0:t.column)||"manual"===e.sortMode)return e.rows;const{column:a,direction:o}=s.value;return e.rows.slice().sort(((e,t)=>{var n;const s=w(e,a),r=w(t,a);return((null==(n=l.value.find((e=>e.key===a)))?void 0:n.sort)??I)(s,r,o)}))})),d=h({get:()=>e.modelValue,set(e){t("update:modelValue",e)}}),p=h((()=>e.rows.length)),m=h((()=>{const t=z(d.value),a=z(e.rows);return Array.from(t).filter((e=>a.has(e))).length})),y=h((()=>!(!d.value||!e.rows)&&(m.value>0&&m.value<p.value))),g=h((()=>m.value===p.value)),f=h((()=>null===e.emptyState?null:{...o.value.default.emptyState,...e.emptyState})),x=h((()=>null===e.loadingState?null:{...o.value.default.loadingState,...e.loadingState}));function b(t,a){if("string"==typeof e.by){const n=(o=e.by,e=>w(e,o));return n(t)===n(a)}var o;return e.by(t,a)}function A(t){return!!e.modelValue&&d.value.some((e=>b(j(e),j(t))))}function B(e){var t;return!!(null==(t=r.value)?void 0:t.openedRows)&&r.value.openedRows.some((t=>b(t,e)))}return C(c,(()=>{i.value=new Date}),{deep:!0}),{ui:o,attrs:n,sort:s,columns:l,rows:c,selected:d,indeterminate:y,emptyState:f,loadingState:x,isAllRowChecked:g,onChangeCheckbox:function(t,a){d.value=t?e.singleSelect?[a]:[...d.value,a]:d.value.filter((e=>!b(j(e),j(a))))},isSelected:A,onSort:function(e){if(s.value.column===e.key){const t=e.direction&&"asc"!==e.direction?"asc":"desc";s.value.direction===t?s.value=k({},u,{column:null,direction:"asc"}):s.value={column:s.value.column,direction:"asc"===s.value.direction?"desc":"asc"}}else s.value={column:e.key,direction:e.direction||"asc"}},onSelect:function(e){const t=window.getSelection();t&&t.toString().length>0||a.onSelect&&a.onSelect(e)},onContextmenu:function(e,t){a.onContextmenu&&a.onContextmenu(e,t)},onChange:function(a){a?function(){const t=[...d.value];e.rows.forEach((e=>{A(e)||t.push(e)})),d.value=t}():d.value=[],t("select:all",a)},getRowData:function(e,t,a=""){return w(e,t,a)},toggleOpened:function(t){r.value={openedRows:B(t)?r.value.openedRows.filter((e=>!b(e,t))):e.multipleExpand?[...r.value.openedRows,t]:[t],row:t}},getAriaSort:function(e){if(e.sortable)return s.value.column!==e.key?"none":"asc"===s.value.direction?"ascending":"desc"===s.value.direction?"descending":void 0},isExpanded:B,retriggerSlot:i}}}),_=["aria-sort"],F={key:1},M={key:0},N={key:0},P=["colspan"],q={key:1},J=["colspan"],L=["onClick","onContextmenu"],Q={key:0},W={colspan:"100%"};const G=n(U,[["render",function(n,l,b,v,h,k){const S=e,w=t,C=a,j=o;return r(),s("div",g({class:n.ui.wrapper},n.attrs),[i("table",{class:d([n.ui.base,n.ui.divide])},[n.$slots.caption||n.caption?u(n.$slots,"caption",{key:0},(()=>[i("caption",{class:d(n.ui.caption)},B(n.caption),3)])):c("",!0),i("thead",{class:d(n.ui.thead)},[i("tr",{class:d(n.ui.tr.base)},[n.expand?(r(),s("th",{key:0,scope:"col",class:d(n.ui.tr.base)},l[0]||(l[0]=[i("span",{class:"sr-only"},"Expand",-1)]),2)):c("",!0),(r(!0),s(p,null,m(n.columns,((e,t)=>(r(),s("th",{key:t,scope:"col",class:d([n.ui.th.base,n.ui.th.padding,n.ui.th.color,n.ui.th.font,n.ui.th.size,"select"===e.key&&n.ui.checkbox.padding,e.class]),"aria-sort":n.getAriaSort(e)},[!n.singleSelect&&n.modelValue&&"select"===e.key?u(n.$slots,"select-header",{key:0,indeterminate:n.indeterminate,checked:n.isAllRowChecked,change:n.onChange},(()=>[y(S,g({"model-value":n.isAllRowChecked,indeterminate:n.indeterminate,ref_for:!0},n.ui.default.checkbox,{"aria-label":"Select all",onChange:n.onChange}),null,16,["model-value","indeterminate","onChange"])])):u(n.$slots,`${e.key}-header`,{key:1,column:e,sort:n.sort,onSort:n.onSort},(()=>[e.sortable?(r(),f(w,g({key:0,ref_for:!0},{...n.ui.default.sortButton||{},...n.sortButton},{icon:n.sort.column&&n.sort.column===e.key?"asc"===n.sort.direction?n.sortAscIcon:n.sortDescIcon:n.sortButton.icon||n.ui.default.sortButton.icon,label:e[n.columnAttribute],onClick:t=>n.onSort(e)}),null,16,["icon","label","onClick"])):(r(),s("span",F,B(e[n.columnAttribute]),1))]))],10,_)))),128))],2),n.loading&&n.progress?(r(),s("tr",M,[i("td",{colspan:0,class:d(n.ui.progress.wrapper)},[y(C,g({...n.ui.default.progress||{},...n.progress},{size:"2xs"}),null,16)],2)])):c("",!0)],2),i("tbody",{class:d(n.ui.tbody)},[n.loadingState&&n.loading&&!n.rows.length?(r(),s("tr",N,[i("td",{colspan:n.columns.length+(n.modelValue?1:0)+(n.expand?1:0)},[u(n.$slots,"loading-state",{},(()=>[i("div",{class:d(n.ui.loadingState.wrapper)},[n.loadingState.icon?(r(),f(j,{key:0,name:n.loadingState.icon,class:d(n.ui.loadingState.icon),"aria-hidden":"true"},null,8,["name","class"])):c("",!0),i("p",{class:d(n.ui.loadingState.label)},B(n.loadingState.label),3)],2)]))],8,P)])):n.emptyState&&!n.rows.length?(r(),s("tr",q,[i("td",{colspan:n.columns.length+(n.modelValue?1:0)+(n.expand?1:0)},[u(n.$slots,"empty-state",{},(()=>[i("div",{class:d(n.ui.emptyState.wrapper)},[n.emptyState.icon?(r(),f(j,{key:0,name:n.emptyState.icon,class:d(n.ui.emptyState.icon),"aria-hidden":"true"},null,8,["name","class"])):c("",!0),i("p",{class:d(n.ui.emptyState.label)},B(n.emptyState.label),3)],2)]))],8,J)])):(r(!0),s(p,{key:2},m(n.rows,((e,t)=>(r(),s(p,{key:t},[i("tr",{class:d([n.ui.tr.base,n.isSelected(e)&&n.ui.tr.selected,n.isExpanded(e)&&n.ui.tr.expanded,n.$attrs.onSelect&&n.ui.tr.active,null==e?void 0:e.class]),onClick:()=>n.onSelect(e),onContextmenu:t=>n.onContextmenu(t,e)},[n.expand?(r(),s("td",{key:0,class:d([n.ui.td.base,n.ui.td.padding,n.ui.td.color,n.ui.td.font,n.ui.td.size])},[n.$slots["expand-action"]?u(n.$slots,"expand-action",{key:0,row:e,isExpanded:n.isExpanded(e),toggle:()=>n.toggleOpened(e)}):(r(),f(w,g({key:1,disabled:e.disabledExpand,ref_for:!0},{...n.ui.default.expandButton||{},...n.expandButton},{ui:{icon:{base:[n.ui.expand.icon,n.isExpanded(e)&&"rotate-180"].join(" ")}},onClickCapture:x((t=>n.toggleOpened(e)),["stop"])}),null,16,["disabled","ui","onClickCapture"]))],2)):c("",!0),(r(!0),s(p,null,m(n.columns,((a,o)=>{var l;return r(),s("td",{key:o,class:d([n.ui.td.base,n.ui.td.padding,n.ui.td.color,n.ui.td.font,n.ui.td.size,null==a?void 0:a.rowClass,null==(l=e[a.key])?void 0:l.class,"select"===a.key&&n.ui.checkbox.padding])},[n.modelValue&&"select"===a.key?u(n.$slots,"select-data",{key:0,checked:n.isSelected(e),change:t=>n.onChangeCheckbox(t,e)},(()=>[y(S,g({"model-value":n.isSelected(e),ref_for:!0},n.ui.default.checkbox,{"aria-label":"Select row",onChange:t=>n.onChangeCheckbox(t,e)}),null,16,["model-value","onChange"])])):u(n.$slots,`${a.key}-data`,{key:n.retriggerSlot,column:a,row:e,index:t,getRowData:t=>n.getRowData(e,a.key,t)},(()=>[O(B(n.getRowData(e,a.key)),1)]))],2)})),128))],42,L),n.isExpanded(e)?(r(),s("tr",Q,[i("td",W,[u(n.$slots,"expand",{row:e,index:t})])])):c("",!0)],64)))),128))],2)],2)],16)}]]);export{G as default};
