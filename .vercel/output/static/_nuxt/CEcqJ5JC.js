import{c as e,i as t}from"./DbuPMTfp.js";import{M as l,r,$ as o,f as a,L as n,N as s,B as u,g as i,j as d,D as f,aB as p,J as v,ai as c}from"./hFqZFfy7.js";import{a as m}from"./D7unn5Ia.js";import{u as h,f as g}from"./BE7Nko66.js";import{o as y,A as P}from"./BvCfb3ib.js";function b(t,r,o,a){e.isServer||l((e=>{(t=null!=t?t:window).addEventListener(r,o,a),e((()=>t.removeEventListener(r,o,a)))}))}var w,E=((w=E||{})[w.Forwards=0]="Forwards",w[w.Backwards=1]="Backwards",w);function j(){let e=r(0);return m("keydown",(t=>{"Tab"===t.key&&(e.value=t.shiftKey?1:0)})),e}function T({defaultContainers:e=[],portals:l,mainTreeNodeRef:a}={}){let n=r(null),s=t(n);function u(){var t,r,o;let a=[];for(let l of e)null!==l&&(l instanceof HTMLElement?a.push(l):"value"in l&&l.value instanceof HTMLElement&&a.push(l.value));if(null!=l&&l.value)for(let e of l.value)a.push(e);for(let e of null!=(t=null==s?void 0:s.querySelectorAll("html > *, body > *"))?t:[])e!==document.body&&e!==document.head&&e instanceof HTMLElement&&"headlessui-portal-root"!==e.id&&(e.contains(y(n))||e.contains(null==(o=null==(r=y(n))?void 0:r.getRootNode())?void 0:o.host)||a.some((t=>e.contains(t)))||a.push(e));return a}return{resolveContainers:u,contains:e=>u().some((t=>t.contains(e))),mainTreeNodeRef:n,MainTreeNode:()=>null!=a?null:o(g,{features:h.Hidden,ref:n})}}let C=Symbol("ForcePortalRootContext");let S=a({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup:(e,{slots:t,attrs:l})=>(n(C,e.force),()=>{let{force:r,...o}=e;return P({theirProps:o,ourProps:{},slot:{},slots:t,attrs:l,name:"ForcePortalRoot"})})});const B=new WeakMap;function x(e,t){let l=t(function(e){var t;return null!=(t=B.get(e))?t:0}(e));return l<=0?B.delete(e):B.set(e,l),l}let L=a({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:a,attrs:n}){let v=r(null),m=u((()=>t(v))),h=s(C,!1),g=s(k,null),b=r(!0===h||null==g?function(e){let l=t(e);if(!l){if(null===e)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let r=l.getElementById("headlessui-portal-root");if(r)return r;let o=l.createElement("div");return o.setAttribute("id","headlessui-portal-root"),l.body.appendChild(o)}(v.value):g.resolveTarget());b.value&&x(b.value,(e=>e+1));let w=r(!1);i((()=>{w.value=!0})),l((()=>{h||null!=g&&(b.value=g.resolveTarget())}));let E=s(M,null),j=!1,T=c();return d(v,(()=>{if(j||!E)return;let e=y(v);e&&(f(E.register(e),T),j=!0)})),f((()=>{var e,t;let l=null==(e=m.value)?void 0:e.getElementById("headlessui-portal-root");!l||b.value!==l||x(b.value,(e=>e-1))||b.value.children.length>0||null==(t=b.value.parentElement)||t.removeChild(b.value)})),()=>{if(!w.value||null===b.value)return null;let t={ref:v,"data-headlessui-portal":""};return o(p,{to:b.value},P({ourProps:t,theirProps:e,slot:{},attrs:n,slots:a,name:"Portal"}))}}}),M=Symbol("PortalParentContext");function R(){let e=s(M,null),t=r([]);function l(l){let r=t.value.indexOf(l);-1!==r&&t.value.splice(r,1),e&&e.unregister(l)}let o={register:function(r){return t.value.push(r),e&&e.register(r),()=>l(r)},unregister:l,portals:t};return[t,a({name:"PortalWrapper",setup:(e,{slots:t})=>(n(M,o),()=>{var e;return null==(e=t.default)?void 0:e.call(t)})})]}let k=Symbol("PortalGroupContext"),F=a({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:l}){let r=v({resolveTarget:()=>e.target});return n(k,r),()=>{let{target:r,...o}=e;return P({theirProps:o,ourProps:{},slot:{},attrs:t,slots:l,name:"PortalGroup"})}}});export{L as $,b as E,T as N,E as d,j as n,R as q,S as u,F as z};
